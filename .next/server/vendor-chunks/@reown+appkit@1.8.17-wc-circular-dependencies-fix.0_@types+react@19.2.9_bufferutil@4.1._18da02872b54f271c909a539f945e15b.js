"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b";
exports.ids = ["vendor-chunks/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/exports/constants.js":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/exports/constants.js ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PACKAGE_VERSION: () => (/* binding */ PACKAGE_VERSION)\n/* harmony export */ });\nconst PACKAGE_VERSION = '1.8.17-wc-circular-dependencies-fix.0';\n//# sourceMappingURL=constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL2V4cG9ydHMvY29uc3RhbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQIiwic291cmNlcyI6WyIvaG9tZS9iZXJndGF0dC9wcm9qZWN0cy9lbXRweWxhYi9saWtlbGkvbm9kZV9tb2R1bGVzLy5wbnBtL0ByZW93bithcHBraXRAMS44LjE3LXdjLWNpcmN1bGFyLWRlcGVuZGVuY2llcy1maXguMF9AdHlwZXMrcmVhY3RAMTkuMi45X2J1ZmZlcnV0aWxANC4xLl8xOGRhMDI4NzJiNTRmMjcxYzkwOWE1MzlmOTQ1ZTE1Yi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC9kaXN0L2VzbS9leHBvcnRzL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgUEFDS0FHRV9WRVJTSU9OID0gJzEuOC4xNy13Yy1jaXJjdWxhci1kZXBlbmRlbmNpZXMtZml4LjAnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/exports/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/exports/core.js":
/*!*********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/exports/core.js ***!
  \*********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppKit: () => (/* reexport safe */ _src_client_appkit_core_js__WEBPACK_IMPORTED_MODULE_0__.AppKit),\n/* harmony export */   createAppKit: () => (/* binding */ createAppKit)\n/* harmony export */ });\n/* harmony import */ var _src_client_appkit_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../src/client/appkit-core.js */ \"(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/client/appkit-core.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/exports/constants.js\");\n\n\nfunction createAppKit(options) {\n    return new _src_client_appkit_core_js__WEBPACK_IMPORTED_MODULE_0__.AppKit({\n        ...options,\n        basic: true,\n        sdkVersion: `html-core-${_constants_js__WEBPACK_IMPORTED_MODULE_1__.PACKAGE_VERSION}`\n    });\n}\n\n//# sourceMappingURL=core.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL2V4cG9ydHMvY29yZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNEO0FBQ0w7QUFDMUM7QUFDUCxlQUFlLDhEQUFNO0FBQ3JCO0FBQ0E7QUFDQSxpQ0FBaUMsMERBQWUsQ0FBQztBQUNqRCxLQUFLO0FBQ0w7QUFDa0I7QUFDbEIiLCJzb3VyY2VzIjpbIi9ob21lL2Jlcmd0YXR0L3Byb2plY3RzL2VtdHB5bGFiL2xpa2VsaS9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL2V4cG9ydHMvY29yZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBLaXQgfSBmcm9tICcuLi9zcmMvY2xpZW50L2FwcGtpdC1jb3JlLmpzJztcbmltcG9ydCB7IFBBQ0tBR0VfVkVSU0lPTiB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBcHBLaXQob3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgQXBwS2l0KHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgYmFzaWM6IHRydWUsXG4gICAgICAgIHNka1ZlcnNpb246IGBodG1sLWNvcmUtJHtQQUNLQUdFX1ZFUlNJT059YFxuICAgIH0pO1xufVxuZXhwb3J0IHsgQXBwS2l0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3JlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/exports/core.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/client/appkit-base-client.js":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/client/appkit-base-client.js ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppKitBaseClient: () => (/* binding */ AppKitBaseClient)\n/* harmony export */ });\n/* harmony import */ var _walletconnect_universal_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/universal-provider */ \"(ssr)/./node_modules/.pnpm/@walletconnect+universal-provider@2.23.2_bufferutil@4.1.0_typescript@5.9.3_utf-8-validate@5.0.10_zod@3.25.76/node_modules/@walletconnect/universal-provider/dist/index.js\");\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @reown/appkit-common */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-common@1.8.17-wc-circular-dependencies-fix.0_bufferutil@4.1.0_typescript@_8f594b12ae5e4091be36eb1310763710/node_modules/@reown/appkit-common/dist/esm/src/utils/ConstantsUtil.js\");\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @reown/appkit-common */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-common@1.8.17-wc-circular-dependencies-fix.0_bufferutil@4.1.0_typescript@_8f594b12ae5e4091be36eb1310763710/node_modules/@reown/appkit-common/dist/esm/src/utils/ParseUtil.js\");\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @reown/appkit-common */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-common@1.8.17-wc-circular-dependencies-fix.0_bufferutil@4.1.0_typescript@_8f594b12ae5e4091be36eb1310763710/node_modules/@reown/appkit-common/dist/esm/src/utils/NetworkUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ChainController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/BlockchainApiController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ProviderController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/ChainControllerUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/CoreHelperUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ConnectorController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/StorageUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ConnectionController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/EnsController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/AssetUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/AlertController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/ConnectionControllerUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/OptionsController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/ConnectorUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ApiController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/OnRampController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ModalController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/SendController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/WalletConnectUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/EventsController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/AdapterController/index.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ThemeController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/SIWXUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/ConstantsUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/RouterController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/PublicStateController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/SnackController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/WalletUtil.js\");\n/* harmony import */ var _reown_appkit_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @reown/appkit-ui */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-ui@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4_9eb8ccdcd5d7dd856b288f5f3341f953/node_modules/@reown/appkit-ui/dist/esm/exports/index.js\");\n/* harmony import */ var _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @reown/appkit-utils */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-utils@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferuti_27588a39054def81394fb486614d2b2b/node_modules/@reown/appkit-utils/dist/esm/src/TokenUtil.js\");\n/* harmony import */ var _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @reown/appkit-utils */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-utils@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferuti_27588a39054def81394fb486614d2b2b/node_modules/@reown/appkit-utils/dist/esm/src/ErrorUtil.js\");\n/* harmony import */ var _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @reown/appkit-utils */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-utils@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferuti_27588a39054def81394fb486614d2b2b/node_modules/@reown/appkit-utils/dist/esm/src/CaipNetworkUtil.js\");\n/* harmony import */ var _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @reown/appkit-utils */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-utils@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferuti_27588a39054def81394fb486614d2b2b/node_modules/@reown/appkit-utils/dist/esm/src/ConstantsUtil.js\");\n/* harmony import */ var _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @reown/appkit-utils */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-utils@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferuti_27588a39054def81394fb486614d2b2b/node_modules/@reown/appkit-utils/dist/esm/src/HelpersUtil.js\");\n/* harmony import */ var _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @reown/appkit-utils */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-utils@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferuti_27588a39054def81394fb486614d2b2b/node_modules/@reown/appkit-utils/dist/esm/src/LoggerUtil.js\");\n/* harmony import */ var _universal_adapter_client_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../universal-adapter/client.js */ \"(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/universal-adapter/client.js\");\n/* harmony import */ var _utils_ConfigUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/ConfigUtil.js */ \"(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/utils/ConfigUtil.js\");\n\n\n\n\n\n\n\nclass AppKitBaseClient {\n    constructor(options) {\n        this.chainNamespaces = [];\n        this.features = {};\n        this.remoteFeatures = {};\n        this.reportedAlertErrors = {};\n        // -- Public Internal ---------------------------------------------------\n        this.getCaipNetwork = (chainNamespace, id) => {\n            if (chainNamespace) {\n                const caipNetworkWithId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getCaipNetworks(chainNamespace)?.find(c => c.id === id);\n                if (caipNetworkWithId) {\n                    return caipNetworkWithId;\n                }\n                const namespaceCaipNetwork = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getNetworkData(chainNamespace)?.caipNetwork;\n                if (namespaceCaipNetwork) {\n                    return namespaceCaipNetwork;\n                }\n                const requestedCaipNetworks = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getRequestedCaipNetworks(chainNamespace);\n                return requestedCaipNetworks.filter(c => c.chainNamespace === chainNamespace)?.[0];\n            }\n            return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipNetwork || this.defaultCaipNetwork;\n        };\n        this.getCaipNetworkId = () => {\n            const network = this.getCaipNetwork();\n            if (network) {\n                return network.id;\n            }\n            return undefined;\n        };\n        this.getCaipNetworks = (namespace) => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getCaipNetworks(namespace);\n        this.getActiveChainNamespace = () => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n        this.setRequestedCaipNetworks = (requestedCaipNetworks, chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setRequestedCaipNetworks(requestedCaipNetworks, chain);\n        };\n        this.getApprovedCaipNetworkIds = () => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAllApprovedCaipNetworkIds();\n        this.getCaipAddress = (chainNamespace) => {\n            if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain === chainNamespace || !chainNamespace) {\n                return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipAddress;\n            }\n            return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.chains.get(chainNamespace)?.accountState?.caipAddress;\n        };\n        this.setClientId = clientId => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_5__.BlockchainApiController.setClientId(clientId);\n        };\n        this.getProvider = (namespace) => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProvider(namespace);\n        this.getProviderType = (namespace) => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProviderId(namespace);\n        this.getPreferredAccountType = (namespace) => (0,_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_7__.getPreferredAccountType)(namespace);\n        this.setCaipAddress = (caipAddress, chain, shouldRefresh = false) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('caipAddress', caipAddress, chain, shouldRefresh);\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('address', _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.getPlainAddress(caipAddress), chain, shouldRefresh);\n        };\n        this.setBalance = (balance, balanceSymbol, chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('balance', balance, chain);\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('balanceSymbol', balanceSymbol, chain);\n        };\n        this.setProfileName = (profileName, chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('profileName', profileName, chain);\n        };\n        this.setProfileImage = (profileImage, chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('profileImage', profileImage, chain);\n        };\n        this.setUser = (user, chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('user', user, chain);\n        };\n        this.resetAccount = (chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.resetAccount(chain);\n        };\n        this.setCaipNetwork = caipNetwork => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setActiveCaipNetwork(caipNetwork);\n        };\n        this.setCaipNetworkOfNamespace = (caipNetwork, chainNamespace) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setChainNetworkData(chainNamespace, { caipNetwork });\n        };\n        this.setStatus = (status, chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('status', status, chain);\n            // If at least one namespace is connected, set the connection status\n            if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.isConnected()) {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.setConnectionStatus('connected');\n            }\n            else {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.setConnectionStatus('disconnected');\n            }\n        };\n        this.getAddressByChainNamespace = (chainNamespace) => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAccountData(chainNamespace)?.address;\n        this.setConnectors = connectors => {\n            const allConnectors = [..._reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.state.allConnectors, ...connectors];\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.setConnectors(allConnectors);\n        };\n        this.setConnections = (connections, chainNamespace) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.setConnections(connections, chainNamespace);\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.setConnections(connections, chainNamespace);\n        };\n        this.fetchIdentity = request => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_5__.BlockchainApiController.fetchIdentity(request);\n        this.getReownName = address => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_12__.EnsController.getNamesForAddress(address);\n        this.getConnectors = () => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectors();\n        this.getConnectorImage = connector => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_13__.AssetUtil.getConnectorImage(connector);\n        this.getConnections = (namespace) => {\n            if (!this.remoteFeatures.multiWallet) {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n                return [];\n            }\n            return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_16__.ConnectionControllerUtil.getConnectionsData(namespace).connections;\n        };\n        this.getRecentConnections = (namespace) => {\n            if (!this.remoteFeatures.multiWallet) {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n                return [];\n            }\n            return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_16__.ConnectionControllerUtil.getConnectionsData(namespace).recentConnections;\n        };\n        this.switchConnection = async (params) => {\n            if (!this.remoteFeatures.multiWallet) {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n                return;\n            }\n            await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.switchConnection(params);\n        };\n        this.deleteConnection = params => {\n            if (!this.remoteFeatures.multiWallet) {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n                return;\n            }\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.deleteAddressFromConnection(params);\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.syncStorageConnections();\n        };\n        this.setConnectedWalletInfo = (connectedWalletInfo, chain) => {\n            const type = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProviderId(chain);\n            const walletInfo = connectedWalletInfo ? { ...connectedWalletInfo, type } : undefined;\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('connectedWalletInfo', walletInfo, chain);\n        };\n        this.getIsConnectedState = () => Boolean(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipAddress);\n        this.addAddressLabel = (address, label, chain) => {\n            const addressLabels = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAccountData(chain)?.addressLabels || {};\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('addressLabels', { ...addressLabels, [address]: label }, chain);\n        };\n        this.removeAddressLabel = (address, chain) => {\n            const addressLabels = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAccountData(chain)?.addressLabels || {};\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('addressLabels', { ...addressLabels, [address]: undefined }, chain);\n        };\n        this.getAddress = (chainNamespace) => {\n            const namespace = chainNamespace || _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n            return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAccountData(namespace)?.address;\n        };\n        this.resetNetwork = (namespace) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.resetNetwork(namespace);\n        };\n        this.addConnector = connector => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.addConnector(connector);\n        };\n        this.resetWcConnection = () => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.resetWcConnection();\n        };\n        this.setAddressExplorerUrl = (addressExplorerUrl, chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('addressExplorerUrl', addressExplorerUrl, chain);\n        };\n        this.setSmartAccountDeployed = (isDeployed, chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('smartAccountDeployed', isDeployed, chain);\n        };\n        this.setPreferredAccountType = (preferredAccountType, chain) => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setAccountProp('preferredAccountType', preferredAccountType, chain);\n        };\n        this.setEIP6963Enabled = enabled => {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEIP6963Enabled(enabled);\n        };\n        this.handleUnsafeRPCRequest = () => {\n            if (this.isOpen()) {\n                // If we are on the modal but there is no transaction stack, close the modal\n                if (this.isTransactionStackEmpty()) {\n                    return;\n                }\n                // Check if we need to replace or redirect\n                this.redirect('ApproveTransaction');\n            }\n            else {\n                // If called from outside the modal, open ApproveTransaction\n                this.open({ view: 'ApproveTransaction' });\n            }\n        };\n        this.options = options;\n        this.version = options.sdkVersion;\n        this.caipNetworks = this.extendCaipNetworks(options);\n        this.chainNamespaces = this.getChainNamespacesSet(options.adapters, this.caipNetworks);\n        this.defaultCaipNetwork = this.extendDefaultCaipNetwork(options);\n        this.chainAdapters = this.createAdapters(options.adapters);\n        this.readyPromise = this.initialize(options);\n    }\n    getChainNamespacesSet(adapters, caipNetworks) {\n        const adapterNamespaces = adapters\n            ?.map(adapter => adapter.namespace)\n            .filter((namespace) => Boolean(namespace));\n        if (adapterNamespaces?.length) {\n            return [...new Set(adapterNamespaces)];\n        }\n        const networkNamespaces = caipNetworks?.map(network => network.chainNamespace);\n        return [...new Set(networkNamespaces)];\n    }\n    async initialize(options) {\n        this.initializeProjectSettings(options);\n        this.initControllers(options);\n        await this.initChainAdapters();\n        this.sendInitializeEvent(options);\n        if (options.features?.headless && !_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_18__.ConnectorUtil.hasInjectedConnectors()) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_19__.ApiController.prefetch({\n                fetchNetworkImages: false,\n                fetchConnectorImages: false,\n                fetchWalletRanks: false,\n                fetchRecommendedWallets: true\n            });\n        }\n        if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.enableReconnect) {\n            await this.syncExistingConnection();\n            await this.syncAdapterConnections();\n        }\n        else {\n            await this.unSyncExistingConnection();\n        }\n        if (!options.basic && !options.manualWCControl) {\n            this.remoteFeatures = await _utils_ConfigUtil_js__WEBPACK_IMPORTED_MODULE_3__.ConfigUtil.fetchRemoteFeatures(options);\n        }\n        await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_19__.ApiController.fetchUsage();\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setRemoteFeatures(this.remoteFeatures);\n        if (this.remoteFeatures.onramp) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_20__.OnRampController.setOnrampProviders(this.remoteFeatures.onramp);\n        }\n        // Check allowed origins only if email or social features are enabled\n        if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.remoteFeatures?.email ||\n            (Array.isArray(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.remoteFeatures?.socials) &&\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.remoteFeatures?.socials.length > 0)) {\n            await this.checkAllowedOrigins();\n        }\n        if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.features?.reownAuthentication ||\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.remoteFeatures?.reownAuthentication) {\n            const { ReownAuthentication } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f\").then(__webpack_require__.bind(__webpack_require__, /*! @reown/appkit-controllers/features */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/exports/features.js\"));\n            const currentSIWX = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.siwx;\n            if (!(currentSIWX instanceof ReownAuthentication)) {\n                if (currentSIWX) {\n                    console.warn('ReownAuthentication option is enabled, SIWX configuration will be overridden.');\n                }\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setSIWX(new ReownAuthentication());\n            }\n            // If siwx is already configured for ReownAuthentication we keep the current instance\n        }\n    }\n    async openSend(args) {\n        const namespaceToUse = args.namespace || _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n        const caipAddress = this.getCaipAddress(namespaceToUse);\n        const chainId = this.getCaipNetwork(namespaceToUse)?.id;\n        if (!caipAddress) {\n            throw new Error('openSend: caipAddress not found');\n        }\n        if (chainId?.toString() !== args.chainId.toString()) {\n            const caipNetwork = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getCaipNetworkById(args.chainId, namespaceToUse);\n            if (!caipNetwork) {\n                throw new Error(`openSend: caipNetwork with chainId ${args.chainId} not found`);\n            }\n            await this.switchNetwork(caipNetwork, { throwOnFailure: true });\n        }\n        try {\n            const symbol = _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_21__.TokenUtil.getTokenSymbolByAddress(args.assetAddress);\n            if (symbol) {\n                await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_19__.ApiController.fetchTokenImages([symbol]);\n            }\n        }\n        catch {\n            /* Ignore */\n        }\n        await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_22__.ModalController.open({\n            view: 'WalletSend',\n            data: { send: args }\n        });\n        return new Promise((resolve, reject) => {\n            const unsubscribe = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_23__.SendController.subscribeKey('hash', hash => {\n                if (hash) {\n                    cleanup();\n                    resolve({ hash });\n                }\n            });\n            const unsubscribeModal = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_22__.ModalController.subscribe(modal => {\n                if (!modal.open) {\n                    cleanup();\n                    reject(new Error('Modal closed'));\n                }\n            });\n            const cleanup = this.createCleanupHandler([unsubscribe, unsubscribeModal]);\n        });\n    }\n    toModalOptions() {\n        function isSwap(options) {\n            return options?.view === 'Swap';\n        }\n        function isSend(options) {\n            return options?.view === 'WalletSend';\n        }\n        return {\n            isSwap,\n            isSend\n        };\n    }\n    async checkAllowedOrigins() {\n        try {\n            const allowedOrigins = await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_19__.ApiController.fetchAllowedOrigins();\n            if (!_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.isClient()) {\n                return;\n            }\n            const currentOrigin = window.location.origin;\n            const isOriginAllowed = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_24__.WcHelpersUtil.isOriginAllowed(currentOrigin, allowedOrigins, _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.DEFAULT_ALLOWED_ANCESTORS);\n            if (!isOriginAllowed) {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(_reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_ERRORS.ORIGIN_NOT_ALLOWED, 'error');\n            }\n        }\n        catch (error) {\n            if (!(error instanceof Error)) {\n                return;\n            }\n            switch (error.message) {\n                case 'RATE_LIMITED':\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(_reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION, 'error');\n                    break;\n                case 'SERVER_ERROR': {\n                    const originalError = error.cause instanceof Error ? error.cause : error;\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open({\n                        displayMessage: _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,\n                        debugMessage: _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(originalError.message)\n                    }, 'error');\n                    break;\n                }\n                default:\n                    break;\n            }\n        }\n    }\n    createCleanupHandler(unsubscribeFunctions) {\n        return () => {\n            unsubscribeFunctions.forEach(unsubscribe => {\n                try {\n                    unsubscribe();\n                }\n                catch {\n                    // Ignore cleanup errors\n                }\n            });\n        };\n    }\n    sendInitializeEvent(options) {\n        const { ...optionsCopy } = options;\n        delete optionsCopy.adapters;\n        delete optionsCopy.universalProvider;\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_26__.EventsController.sendEvent({\n            type: 'track',\n            event: 'INITIALIZE',\n            properties: {\n                ...optionsCopy,\n                networks: options.networks.map(n => n.id),\n                siweConfig: {\n                    options: options.siweConfig?.options || {}\n                }\n            }\n        });\n    }\n    // -- Controllers initialization ---------------------------------------------------\n    initControllers(options) {\n        this.initializeOptionsController(options);\n        this.initializeChainController(options);\n        this.initializeThemeController(options);\n        this.initializeConnectionController(options);\n        this.initializeConnectorController();\n    }\n    initAdapterController() {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_27__.AdapterController.initialize(this.chainAdapters);\n    }\n    initializeThemeController(options) {\n        if (options.themeMode) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__.ThemeController.setThemeMode(options.themeMode);\n        }\n        if (options.themeVariables) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__.ThemeController.setThemeVariables(options.themeVariables);\n        }\n    }\n    initializeChainController(options) {\n        if (!this.connectionControllerClient) {\n            throw new Error('ConnectionControllerClient must be set');\n        }\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.initialize(options.adapters ?? [], this.caipNetworks, {\n            connectionControllerClient: this.connectionControllerClient\n        });\n        const network = this.getDefaultNetwork();\n        if (network) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setActiveCaipNetwork(network);\n        }\n    }\n    initializeConnectionController(options) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.initialize(options.adapters ?? []);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.setWcBasic(options.basic ?? false);\n    }\n    initializeConnectorController() {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.initialize(this.chainNamespaces);\n    }\n    initializeProjectSettings(options) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setProjectId(options.projectId);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setSdkVersion(options.sdkVersion);\n    }\n    initializeOptionsController(options) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setDebug(options.debug !== false);\n        // On by default\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEnableWalletGuide(options.enableWalletGuide !== false);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEnableWallets(options.enableWallets !== false);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEIP6963Enabled(options.enableEIP6963 !== false);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEnableNetworkSwitch(options.enableNetworkSwitch !== false);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEnableReconnect(options.enableReconnect !== false);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEnableMobileFullScreen(options.enableMobileFullScreen === true);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setCoinbasePreference(options.coinbasePreference);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEnableAuthLogger(options.enableAuthLogger !== false);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setCustomRpcUrls(options.customRpcUrls);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEnableEmbedded(options.enableEmbedded);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setAllWallets(options.allWallets);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setIncludeWalletIds(options.includeWalletIds);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setExcludeWalletIds(options.excludeWalletIds);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setFeaturedWalletIds(options.featuredWalletIds);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setTokens(options.tokens);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setTermsConditionsUrl(options.termsConditionsUrl);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setPrivacyPolicyUrl(options.privacyPolicyUrl);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setCustomWallets(options.customWallets);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setFeatures(options.features);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setAllowUnsupportedChain(options.allowUnsupportedChain);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setUniversalProviderConfigOverride(options.universalProviderConfigOverride);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setPreferUniversalLinks(options.experimental_preferUniversalLinks);\n        // Save option in controller\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setDefaultAccountTypes(options.defaultAccountTypes);\n        const defaultMetaData = this.getDefaultMetaData();\n        if (!options.metadata && defaultMetaData) {\n            options.metadata = defaultMetaData;\n        }\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setMetadata(options.metadata);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setDisableAppend(options.disableAppend);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setEnableEmbedded(options.enableEmbedded);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setSIWX(options.siwx);\n        this.features = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.features ?? {};\n        if (!options.projectId) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(_reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED, 'error');\n            return;\n        }\n        const evmAdapter = options.adapters?.find(adapter => adapter.namespace === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CHAIN.EVM);\n        // Set the SIWE client for EVM chains\n        if (evmAdapter) {\n            if (options.siweConfig) {\n                if (options.siwx) {\n                    throw new Error('Cannot set both `siweConfig` and `siwx` options');\n                }\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setSIWX(options.siweConfig.mapToSIWX());\n            }\n        }\n    }\n    getDefaultMetaData() {\n        if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.isClient()) {\n            return {\n                name: document.getElementsByTagName('title')?.[0]?.textContent || '',\n                description: document.querySelector('meta[property=\"og:description\"]')?.content || '',\n                url: window.location.origin,\n                icons: [document.querySelector('link[rel~=\"icon\"]')?.href || '']\n            };\n        }\n        return null;\n    }\n    // -- Network Initialization ---------------------------------------------------\n    setUnsupportedNetwork(chainId) {\n        const namespace = this.getActiveChainNamespace();\n        if (namespace) {\n            const unsupportedNetwork = _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_29__.CaipNetworksUtil.getUnsupportedNetwork(`${namespace}:${chainId}`);\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setActiveCaipNetwork(unsupportedNetwork);\n        }\n    }\n    getDefaultNetwork() {\n        return _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_29__.CaipNetworksUtil.getCaipNetworkFromStorage(this.defaultCaipNetwork);\n    }\n    extendCaipNetwork(network, options) {\n        const extendedNetwork = _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_29__.CaipNetworksUtil.extendCaipNetwork(network, {\n            customNetworkImageUrls: options.chainImages,\n            projectId: options.projectId\n        });\n        return extendedNetwork;\n    }\n    extendCaipNetworks(options) {\n        const extendedNetworks = _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_29__.CaipNetworksUtil.extendCaipNetworks(options.networks, {\n            customNetworkImageUrls: options.chainImages,\n            customRpcUrls: options.customRpcUrls,\n            projectId: options.projectId\n        });\n        return extendedNetworks;\n    }\n    extendDefaultCaipNetwork(options) {\n        const defaultNetwork = options.networks.find(n => n.id === options.defaultNetwork?.id);\n        const extendedNetwork = defaultNetwork\n            ? _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_29__.CaipNetworksUtil.extendCaipNetwork(defaultNetwork, {\n                customNetworkImageUrls: options.chainImages,\n                customRpcUrls: options.customRpcUrls,\n                projectId: options.projectId\n            })\n            : undefined;\n        return extendedNetwork;\n    }\n    /**\n     * Disconnects a connector with the given namespace and id. If the connector id is not provided, disconnects the adapter (namespace).\n     * @param namespace ChainNamespace\n     * @param id string\n     * @returns\n     */\n    async disconnectConnector(namespace, id) {\n        try {\n            this.setLoading(true, namespace);\n            let disconnectResult = {\n                connections: []\n            };\n            const adapter = this.getAdapter(namespace);\n            const caipAddress = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.chains.get(namespace)?.accountState?.caipAddress;\n            /**\n             * When the page loaded, the controller doesn't have address yet.\n             * To disconnect, we are checking enableReconnect flag to disconnect the namespace.\n             */\n            if ((caipAddress || !_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.enableReconnect) && adapter?.disconnect) {\n                disconnectResult = await adapter.disconnect({ id });\n            }\n            this.setLoading(false, namespace);\n            return disconnectResult;\n        }\n        catch (error) {\n            this.setLoading(false, namespace);\n            throw new Error(`Failed to disconnect chains: ${error.message}`);\n        }\n    }\n    // -- Client Initialization ---------------------------------------------------\n    createClients() {\n        this.connectionControllerClient = {\n            connectWalletConnect: async () => {\n                const activeChain = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n                const adapter = this.getAdapter(activeChain);\n                const chainId = this.getCaipNetwork(activeChain)?.id;\n                const connections = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.getConnections(activeChain);\n                const isMultiWallet = this.remoteFeatures.multiWallet;\n                const hasConnections = connections.length > 0;\n                if (!adapter) {\n                    throw new Error('Adapter not found');\n                }\n                const result = await adapter.connectWalletConnect(chainId);\n                const shouldClose = !hasConnections || !isMultiWallet;\n                if (shouldClose) {\n                    this.close();\n                }\n                this.setClientId(result?.clientId || null);\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.setConnectedNamespaces([..._reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.chains.keys()]);\n                await this.syncWalletConnectAccount();\n                await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_30__.SIWXUtil.initializeIfEnabled();\n            },\n            connectExternal: async (params) => {\n                const connectResult = await this.onConnectExternal(params);\n                await this.connectInactiveNamespaces(params, connectResult);\n                return connectResult ? { address: connectResult.address } : undefined;\n            },\n            reconnectExternal: async ({ id, info, type, provider }) => {\n                const namespace = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n                const adapter = this.getAdapter(namespace);\n                if (!namespace) {\n                    throw new Error('reconnectExternal: namespace not found');\n                }\n                if (!adapter) {\n                    throw new Error('reconnectExternal: adapter not found');\n                }\n                if (adapter?.reconnect) {\n                    await adapter?.reconnect({ id, info, type, provider, chainId: this.getCaipNetwork()?.id });\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.addConnectedNamespace(namespace);\n                    this.syncConnectedWalletInfo(namespace);\n                }\n            },\n            disconnectConnector: async (params) => {\n                await this.disconnectConnector(params.namespace, params.id);\n            },\n            disconnect: async (params) => {\n                const { id: connectorIdParam, chainNamespace, initialDisconnect } = params || {};\n                const namespace = chainNamespace || _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n                const namespaceConnectorId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectorId(namespace);\n                const isAuth = connectorIdParam === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.AUTH ||\n                    namespaceConnectorId === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.AUTH;\n                const isWalletConnect = connectorIdParam === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT ||\n                    namespaceConnectorId === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;\n                try {\n                    const namespaces = Array.from(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.chains.keys());\n                    let namespacesToDisconnect = chainNamespace ? [chainNamespace] : namespaces;\n                    /*\n                     * If the connector is WalletConnect or Auth, disconnect all namespaces\n                     * since they share a single connector instance across all adapters\n                     */\n                    if (isWalletConnect || isAuth) {\n                        namespacesToDisconnect = namespaces;\n                    }\n                    const disconnectPromises = namespacesToDisconnect.map(async (ns) => {\n                        const currentConnectorId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectorId(ns);\n                        const connectorIdToDisconnect = connectorIdParam || currentConnectorId;\n                        const disconnectData = await this.disconnectConnector(ns, connectorIdToDisconnect);\n                        if (disconnectData) {\n                            if (isAuth) {\n                                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.deleteConnectedSocialProvider();\n                            }\n                            disconnectData.connections.forEach(connection => {\n                                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.addDisconnectedConnectorId(connection.connectorId, ns);\n                            });\n                        }\n                        if (initialDisconnect) {\n                            this.onDisconnectNamespace({ chainNamespace: ns, closeModal: false });\n                        }\n                    });\n                    const disconnectResults = await Promise.allSettled(disconnectPromises);\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_23__.SendController.resetSend();\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.resetWcConnection();\n                    if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_30__.SIWXUtil.getSIWX()?.signOutOnDisconnect) {\n                        await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_30__.SIWXUtil.clearSessions();\n                    }\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.setFilterByNamespace(undefined);\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.syncStorageConnections();\n                    const failures = disconnectResults.filter((result) => result.status === 'rejected');\n                    if (failures.length > 0) {\n                        throw new Error(failures.map(f => f.reason.message).join(', '));\n                    }\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_26__.EventsController.sendEvent({\n                        type: 'track',\n                        event: 'DISCONNECT_SUCCESS',\n                        properties: {\n                            namespace: chainNamespace || 'all'\n                        }\n                    });\n                }\n                catch (error) {\n                    throw new Error(`Failed to disconnect chains: ${error.message}`);\n                }\n            },\n            checkInstalled: (ids) => {\n                if (!ids) {\n                    return Boolean(window.ethereum);\n                }\n                return ids.some(id => Boolean(window.ethereum?.[String(id)]));\n            },\n            signMessage: async (message) => {\n                const namespace = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n                const adapter = this.getAdapter(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n                if (!namespace) {\n                    throw new Error('signMessage: namespace not found');\n                }\n                if (!adapter) {\n                    throw new Error('signMessage: adapter not found');\n                }\n                const address = this.getAddress(namespace);\n                if (!address) {\n                    throw new Error('signMessage: address not found');\n                }\n                const result = await adapter?.signMessage({\n                    message,\n                    address,\n                    provider: _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProvider(namespace)\n                });\n                return result?.signature || '';\n            },\n            sendTransaction: async (args) => {\n                const namespace = args.chainNamespace;\n                if (!namespace) {\n                    throw new Error('sendTransaction: namespace not found');\n                }\n                if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_31__.ConstantsUtil.SEND_SUPPORTED_NAMESPACES.includes(namespace)) {\n                    const adapter = this.getAdapter(namespace);\n                    if (!adapter) {\n                        throw new Error('sendTransaction: adapter not found');\n                    }\n                    const provider = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProvider(namespace);\n                    const result = await adapter?.sendTransaction({\n                        ...args,\n                        caipNetwork: this.getCaipNetwork(),\n                        provider\n                    });\n                    return result?.hash || '';\n                }\n                return '';\n            },\n            estimateGas: async (args) => {\n                const namespace = args.chainNamespace;\n                if (namespace === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CHAIN.EVM) {\n                    const adapter = this.getAdapter(namespace);\n                    if (!adapter) {\n                        throw new Error('estimateGas: adapter is required but got undefined');\n                    }\n                    const provider = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProvider(namespace);\n                    const caipNetwork = this.getCaipNetwork();\n                    if (!caipNetwork) {\n                        throw new Error('estimateGas: caipNetwork is required but got undefined');\n                    }\n                    const result = await adapter?.estimateGas({ ...args, provider, caipNetwork });\n                    return result?.gas || 0n;\n                }\n                return 0n;\n            },\n            getEnsAvatar: async () => {\n                const namespace = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n                if (!namespace) {\n                    throw new Error('getEnsAvatar: namespace is required but got undefined');\n                }\n                const address = this.getAddress(namespace);\n                if (!address) {\n                    throw new Error('getEnsAvatar: address not found');\n                }\n                await this.syncIdentity({\n                    address,\n                    chainId: Number(this.getCaipNetwork()?.id),\n                    chainNamespace: namespace\n                });\n                const accountData = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAccountData();\n                return accountData?.profileImage || false;\n            },\n            getEnsAddress: async (name) => await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_24__.WcHelpersUtil.resolveReownName(name),\n            writeContract: async (args) => {\n                const namespace = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n                const adapter = this.getAdapter(namespace);\n                if (!namespace) {\n                    throw new Error('writeContract: namespace is required but got undefined');\n                }\n                if (!adapter) {\n                    throw new Error('writeContract: adapter is required but got undefined');\n                }\n                const caipNetwork = this.getCaipNetwork();\n                const caipAddress = this.getCaipAddress();\n                const provider = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProvider(namespace);\n                if (!caipNetwork || !caipAddress) {\n                    throw new Error('writeContract: caipNetwork or caipAddress is required but got undefined');\n                }\n                const result = await adapter?.writeContract({ ...args, caipNetwork, provider, caipAddress });\n                return result?.hash;\n            },\n            writeSolanaTransaction: async (args) => {\n                const namespace = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n                const adapter = this.getAdapter(namespace);\n                if (!namespace) {\n                    throw new Error('writeContract: namespace is required but got undefined');\n                }\n                if (!adapter) {\n                    throw new Error('writeContract: adapter is required but got undefined');\n                }\n                const caipNetwork = this.getCaipNetwork();\n                const caipAddress = this.getCaipAddress();\n                const provider = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProvider(namespace);\n                if (!caipNetwork || !caipAddress) {\n                    throw new Error('writeContract: caipNetwork or caipAddress is required but got undefined');\n                }\n                const result = await adapter?.writeSolanaTransaction({\n                    ...args,\n                    caipNetwork,\n                    provider,\n                    caipAddress\n                });\n                return result?.hash;\n            },\n            parseUnits: (value, decimals) => {\n                const adapter = this.getAdapter(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n                if (!adapter) {\n                    throw new Error('parseUnits: adapter is required but got undefined');\n                }\n                return adapter?.parseUnits({ value, decimals }) ?? 0n;\n            },\n            formatUnits: (value, decimals) => {\n                const adapter = this.getAdapter(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n                if (!adapter) {\n                    throw new Error('formatUnits: adapter is required but got undefined');\n                }\n                return adapter?.formatUnits({ value, decimals }) ?? '0';\n            },\n            getCapabilities: async (params) => {\n                const adapter = this.getAdapter(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n                if (!adapter) {\n                    throw new Error('getCapabilities: adapter is required but got undefined');\n                }\n                return await adapter?.getCapabilities(params);\n            },\n            grantPermissions: async (params) => {\n                const adapter = this.getAdapter(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n                if (!adapter) {\n                    throw new Error('grantPermissions: adapter is required but got undefined');\n                }\n                return await adapter?.grantPermissions(params);\n            },\n            revokePermissions: async (params) => {\n                const adapter = this.getAdapter(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n                if (!adapter) {\n                    throw new Error('revokePermissions: adapter is required but got undefined');\n                }\n                if (adapter?.revokePermissions) {\n                    return await adapter.revokePermissions(params);\n                }\n                return '0x';\n            },\n            walletGetAssets: async (params) => {\n                const adapter = this.getAdapter(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n                if (!adapter) {\n                    throw new Error('walletGetAssets: adapter is required but got undefined');\n                }\n                return (await adapter?.walletGetAssets(params)) ?? {};\n            },\n            updateBalance: (namespace) => {\n                const address = this.getAddress(namespace);\n                const caipNetwork = this.getCaipNetwork(namespace);\n                if (!caipNetwork || !address) {\n                    return;\n                }\n                this.updateNativeBalance(address, caipNetwork?.id, namespace);\n            }\n        };\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.setClient(this.connectionControllerClient);\n    }\n    async onConnectExternal(params) {\n        const activeChain = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n        const namespace = params.chain || activeChain;\n        const adapter = this.getAdapter(namespace);\n        let shouldUpdateNetwork = true;\n        if (params.type === _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_32__.ConstantsUtil.CONNECTOR_TYPE_AUTH) {\n            const authNamespaces = _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS;\n            const hasConnectedAuthNamespace = authNamespaces.some(namespace => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectorId(namespace) === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.AUTH);\n            if (hasConnectedAuthNamespace && params.chain !== activeChain) {\n                shouldUpdateNetwork = false;\n            }\n        }\n        if (params.chain && params.chain !== activeChain && !params.caipNetwork) {\n            const toConnectNetwork = this.getCaipNetworks().find(network => network.chainNamespace === params.chain);\n            if (toConnectNetwork && shouldUpdateNetwork) {\n                this.setCaipNetwork(toConnectNetwork);\n            }\n        }\n        if (!namespace) {\n            throw new Error('connectExternal: namespace not found');\n        }\n        if (!adapter) {\n            throw new Error('connectExternal: adapter not found');\n        }\n        const fallbackCaipNetwork = this.getCaipNetwork(namespace);\n        const caipNetworkToUse = params.caipNetwork || fallbackCaipNetwork;\n        const res = await adapter.connect({\n            id: params.id,\n            address: params.address,\n            info: params.info,\n            type: params.type,\n            provider: params.provider,\n            socialUri: params.socialUri,\n            chainId: params.caipNetwork?.id || fallbackCaipNetwork?.id,\n            rpcUrl: params.caipNetwork?.rpcUrls?.default?.http?.[0] ||\n                fallbackCaipNetwork?.rpcUrls?.default?.http?.[0]\n        });\n        if (!res) {\n            return undefined;\n        }\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.addConnectedNamespace(namespace);\n        this.syncProvider({ ...res, chainNamespace: namespace });\n        this.setStatus('connected', namespace);\n        this.syncConnectedWalletInfo(namespace);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.removeDisconnectedConnectorId(params.id, namespace);\n        return { address: res.address, connectedCaipNetwork: caipNetworkToUse };\n    }\n    async connectInactiveNamespaces(params, connectResult) {\n        const isConnectingToAuth = params.type === _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_32__.ConstantsUtil.CONNECTOR_TYPE_AUTH;\n        const otherAuthNamespaces = _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_33__.HelpersUtil.getOtherAuthNamespaces(connectResult?.connectedCaipNetwork?.chainNamespace);\n        const activeCaipNetwork = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipNetwork;\n        const activeAdapter = this.getAdapter(activeCaipNetwork?.chainNamespace);\n        if (isConnectingToAuth) {\n            await Promise.all(otherAuthNamespaces.map(async (ns) => {\n                try {\n                    const provider = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProvider(ns);\n                    const caipNetworkToUse = this.getCaipNetwork(ns);\n                    const adapter = this.getAdapter(ns);\n                    const res = await adapter?.connect({\n                        ...params,\n                        provider,\n                        socialUri: undefined,\n                        chainId: caipNetworkToUse?.id,\n                        rpcUrl: caipNetworkToUse?.rpcUrls?.default?.http?.[0]\n                    });\n                    if (res) {\n                        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.addConnectedNamespace(ns);\n                        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.removeDisconnectedConnectorId(params.id, ns);\n                        this.setStatus('connected', ns);\n                        this.syncConnectedWalletInfo(ns);\n                    }\n                }\n                catch (error) {\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.warn(_reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage, _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(ns, error instanceof Error ? error.message : undefined), _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code);\n                }\n            }));\n            // Make the secure site back to current network after reconnecting the other namespaces\n            if (activeCaipNetwork) {\n                await activeAdapter?.switchNetwork({\n                    caipNetwork: activeCaipNetwork\n                });\n            }\n        }\n    }\n    getApprovedCaipNetworksData() {\n        const providerType = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProviderId(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n        if (providerType === _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_32__.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT) {\n            const namespaces = this.universalProvider?.session?.namespaces;\n            return {\n                /*\n                 * MetaMask Wallet only returns 1 namespace in the session object. This makes it imposible\n                 * to switch to other networks. Setting supportsAllNetworks to true for MetaMask Wallet\n                 * will make it possible to switch to other networks.\n                 */\n                supportsAllNetworks: this.universalProvider?.session?.peer?.metadata.name === 'MetaMask Wallet',\n                approvedCaipNetworkIds: this.getChainsFromNamespaces(namespaces)\n            };\n        }\n        return { supportsAllNetworks: true, approvedCaipNetworkIds: [] };\n    }\n    async switchCaipNetwork(caipNetwork) {\n        const networkNamespace = caipNetwork.chainNamespace;\n        const namespaceAddress = this.getAddressByChainNamespace(caipNetwork.chainNamespace);\n        if (namespaceAddress) {\n            const providerType = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProviderId(networkNamespace);\n            if (caipNetwork.chainNamespace === _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain) {\n                const adapter = this.getAdapter(networkNamespace);\n                await adapter?.switchNetwork({ caipNetwork });\n            }\n            else {\n                this.setCaipNetwork(caipNetwork);\n                if (providerType === _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_32__.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT) {\n                    this.syncWalletConnectAccount();\n                }\n                else {\n                    const address = this.getAddressByChainNamespace(networkNamespace);\n                    if (address) {\n                        this.syncAccount({\n                            address,\n                            chainId: caipNetwork.id,\n                            chainNamespace: networkNamespace\n                        });\n                    }\n                }\n            }\n        }\n        else {\n            this.setCaipNetwork(caipNetwork);\n        }\n    }\n    getChainsFromNamespaces(namespaces = {}) {\n        return Object.values(namespaces).flatMap((namespace) => {\n            const chains = (namespace.chains || []);\n            const accountsChains = namespace.accounts.map(account => {\n                const { chainId, chainNamespace } = _reown_appkit_common__WEBPACK_IMPORTED_MODULE_34__.ParseUtil.parseCaipAddress(account);\n                return `${chainNamespace}:${chainId}`;\n            });\n            return Array.from(new Set([...chains, ...accountsChains]));\n        });\n    }\n    // -- Adapter Initialization ---------------------------------------------------\n    createAdapters(blueprints) {\n        this.createClients();\n        return this.chainNamespaces.reduce((adapters, namespace) => {\n            const blueprint = blueprints?.find(b => b.namespace === namespace);\n            if (blueprint) {\n                blueprint.construct({\n                    namespace,\n                    projectId: this.options?.projectId,\n                    networks: this.caipNetworks?.filter(({ chainNamespace }) => chainNamespace === namespace)\n                });\n                adapters[namespace] = blueprint;\n            }\n            else {\n                adapters[namespace] = new _universal_adapter_client_js__WEBPACK_IMPORTED_MODULE_2__.UniversalAdapter({\n                    namespace,\n                    networks: this.getCaipNetworks()\n                });\n            }\n            return adapters;\n            // eslint-disable-next-line @typescript-eslint/prefer-reduce-type-parameter\n        }, {});\n    }\n    async initChainAdapter(namespace) {\n        this.onConnectors(namespace);\n        this.listenAdapter(namespace);\n        const adapter = this.getAdapter(namespace);\n        if (!adapter) {\n            throw new Error('adapter not found');\n        }\n        await adapter.syncConnectors();\n        await this.createUniversalProviderForAdapter(namespace);\n    }\n    async initChainAdapters() {\n        await Promise.all(this.chainNamespaces.map(async (namespace) => {\n            await this.initChainAdapter(namespace);\n        }));\n        this.initAdapterController();\n    }\n    onConnectors(chainNamespace) {\n        const adapter = this.getAdapter(chainNamespace);\n        adapter?.on('connectors', this.setConnectors.bind(this));\n    }\n    listenAdapter(chainNamespace) {\n        const adapter = this.getAdapter(chainNamespace);\n        if (!adapter) {\n            return;\n        }\n        const connectionStatus = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.getConnectionStatus();\n        if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.enableReconnect === false) {\n            this.setStatus('disconnected', chainNamespace);\n        }\n        else if (connectionStatus === 'connected') {\n            this.setStatus('connecting', chainNamespace);\n        }\n        else if (connectionStatus === 'disconnected') {\n            /*\n             * Address cache is kept after disconnecting from the wallet\n             * but should be cleared if appkit is launched in disconnected state\n             */\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.clearAddressCache();\n            this.setStatus(connectionStatus, chainNamespace);\n        }\n        else {\n            this.setStatus(connectionStatus, chainNamespace);\n        }\n        adapter.on('switchNetwork', ({ address, chainId }) => {\n            const caipNetwork = this.getCaipNetworks().find(n => n.id.toString() === chainId.toString() ||\n                n.caipNetworkId.toString() === chainId.toString());\n            const isSameNamespace = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain === chainNamespace;\n            const accountAddress = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.chains.get(chainNamespace)?.accountState?.address;\n            if (caipNetwork) {\n                const account = isSameNamespace && address ? address : accountAddress;\n                if (account) {\n                    this.syncAccount({ address: account, chainId: caipNetwork.id, chainNamespace });\n                }\n            }\n            else {\n                this.setUnsupportedNetwork(chainId);\n            }\n        });\n        adapter.on('disconnect', () => {\n            const isMultiWallet = this.remoteFeatures.multiWallet;\n            const allConnections = Array.from(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.state.connections.values()).flat();\n            this.onDisconnectNamespace({\n                chainNamespace,\n                closeModal: !isMultiWallet || allConnections.length === 0\n            });\n        });\n        adapter.on('connections', connections => {\n            this.setConnections(connections, chainNamespace);\n        });\n        adapter.on('pendingTransactions', () => {\n            const address = this.getAddress(chainNamespace);\n            const activeCaipNetwork = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipNetwork;\n            if (!address || !activeCaipNetwork?.id) {\n                return;\n            }\n            this.updateNativeBalance(address, activeCaipNetwork.id, activeCaipNetwork.chainNamespace);\n        });\n        adapter.on('accountChanged', ({ address, chainId, connector }) => {\n            this.handlePreviousConnectorConnection(connector);\n            const isActiveChain = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain === chainNamespace;\n            if (connector?.provider) {\n                this.syncProvider({\n                    id: connector.id,\n                    type: connector.type,\n                    provider: connector?.provider,\n                    chainNamespace\n                });\n                this.syncConnectedWalletInfo(chainNamespace);\n            }\n            const namespaceNetworkId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getNetworkData(chainNamespace)?.caipNetwork?.id;\n            const syncAccountChainId = chainId || namespaceNetworkId;\n            if (isActiveChain && syncAccountChainId) {\n                this.syncAccount({\n                    address,\n                    chainId: syncAccountChainId,\n                    chainNamespace\n                });\n            }\n            else if (!isActiveChain && syncAccountChainId) {\n                this.syncAccountInfo(address, syncAccountChainId, chainNamespace);\n                this.syncBalance({ address, chainId: syncAccountChainId, chainNamespace });\n            }\n            else {\n                this.syncAccountInfo(address, chainId, chainNamespace);\n            }\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.addConnectedNamespace(chainNamespace);\n        });\n    }\n    /**\n     * Checks the incoming connector and handles the previous connection in the connector's namespace, and if necessary (i.e multi-wallet is disabled) disconnects the previous connector\n     * @param connector\n     */\n    async handlePreviousConnectorConnection(connector) {\n        const namespace = connector?.chain;\n        const newConnectorId = connector?.id;\n        const currentConnectorId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectorId(namespace);\n        const isMultiWalletEnabled = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.remoteFeatures?.multiWallet;\n        const hasNewConnectorConnected = currentConnectorId !== newConnectorId;\n        const shouldDisconnectPreviousConnector = namespace &&\n            newConnectorId &&\n            currentConnectorId &&\n            hasNewConnectorConnected &&\n            !isMultiWalletEnabled;\n        try {\n            if (shouldDisconnectPreviousConnector) {\n                await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.disconnect({ id: currentConnectorId, namespace });\n            }\n        }\n        catch (error) {\n            console.warn('Error disconnecting previous connector', error);\n        }\n    }\n    async createUniversalProviderForAdapter(chainNamespace) {\n        await this.getUniversalProvider();\n        if (this.universalProvider) {\n            await this.chainAdapters?.[chainNamespace]?.setUniversalProvider?.(this.universalProvider);\n        }\n    }\n    // -- Connection Sync ---------------------------------------------------\n    async syncExistingConnection() {\n        await Promise.allSettled(this.chainNamespaces.map(namespace => this.syncNamespaceConnection(namespace)));\n    }\n    async unSyncExistingConnection() {\n        try {\n            await Promise.allSettled(this.chainNamespaces.map(namespace => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.disconnect({ namespace, initialDisconnect: true })));\n        }\n        catch (error) {\n            // eslint-disable-next-line no-console\n            console.error('Error disconnecting existing connections:', error);\n        }\n    }\n    async reconnectWalletConnect() {\n        await this.syncWalletConnectAccount();\n        const address = this.getAddress();\n        if (!this.getCaipAddress()) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.deleteRecentWallet();\n        }\n        const recentWallet = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.getRecentWallet();\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_26__.EventsController.sendEvent({\n            type: 'track',\n            event: 'CONNECT_SUCCESS',\n            address,\n            properties: {\n                method: _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.isMobile() ? 'mobile' : 'qrcode',\n                name: recentWallet?.name || 'Unknown',\n                reconnect: true,\n                view: _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_35__.RouterController.state.view,\n                walletRank: recentWallet?.order\n            }\n        });\n    }\n    async syncNamespaceConnection(namespace) {\n        try {\n            if (namespace === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CHAIN.EVM && _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.isSafeApp()) {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.setConnectorId(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.SAFE, namespace);\n            }\n            const connectorId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectorId(namespace);\n            this.setStatus('connecting', namespace);\n            switch (connectorId) {\n                case _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT:\n                    await this.reconnectWalletConnect();\n                    break;\n                case _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.AUTH:\n                    // Handled during initialization of adapters' auth provider\n                    break;\n                default:\n                    await this.syncAdapterConnection(namespace);\n            }\n        }\n        catch (err) {\n            console.warn(\"AppKit couldn't sync existing connection\", err);\n            this.setStatus('disconnected', namespace);\n        }\n    }\n    onDisconnectNamespace(options) {\n        const { chainNamespace, closeModal } = options || {};\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.resetAccount(chainNamespace);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.resetNetwork(chainNamespace);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.removeConnectedNamespace(chainNamespace);\n        const namespaces = Array.from(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.chains.keys());\n        const namespacesToDisconnect = chainNamespace ? [chainNamespace] : namespaces;\n        namespacesToDisconnect.forEach(ns => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.addDisconnectedConnectorId(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectorId(ns) || '', ns));\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.removeConnectorId(chainNamespace);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.resetChain(chainNamespace);\n        this.setUser(null, chainNamespace);\n        this.setStatus('disconnected', chainNamespace);\n        this.setConnectedWalletInfo(null, chainNamespace);\n        if (closeModal !== false) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_22__.ModalController.close();\n        }\n    }\n    async syncAdapterConnections() {\n        await Promise.allSettled(this.chainNamespaces.map(namespace => {\n            const adapter = this.getAdapter(namespace);\n            const caipAddress = this.getCaipAddress(namespace);\n            const caipNetwork = this.getCaipNetwork(namespace);\n            return adapter?.syncConnections({\n                connectToFirstConnector: !caipAddress,\n                caipNetwork\n            });\n        }));\n    }\n    async syncAdapterConnection(namespace) {\n        const adapter = this.getAdapter(namespace);\n        const caipNetwork = this.getCaipNetwork(namespace);\n        const connectorId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectorId(namespace);\n        const connectors = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectors(namespace);\n        const connector = connectors.find(c => c.id === connectorId);\n        try {\n            if (!adapter || !connector) {\n                throw new Error(`Adapter or connector not found for namespace ${namespace}`);\n            }\n            if (!caipNetwork?.id) {\n                throw new Error('CaipNetwork not found');\n            }\n            const connection = await adapter?.syncConnection({\n                namespace,\n                id: connector.id,\n                chainId: caipNetwork.id,\n                rpcUrl: caipNetwork?.rpcUrls?.default?.http?.[0]\n            });\n            if (connection) {\n                this.syncProvider({ ...connection, chainNamespace: namespace });\n                await this.syncAccount({ ...connection, chainNamespace: namespace });\n                this.setStatus('connected', namespace);\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_26__.EventsController.sendEvent({\n                    type: 'track',\n                    event: 'CONNECT_SUCCESS',\n                    address: connection.address,\n                    properties: {\n                        method: 'browser',\n                        name: connector.info?.name || connector.name || 'Unknown',\n                        reconnect: true,\n                        view: _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_35__.RouterController.state.view,\n                        walletRank: connector?.explorerWallet?.order\n                    }\n                });\n            }\n            else {\n                this.setStatus('disconnected', namespace);\n            }\n        }\n        catch (e) {\n            this.onDisconnectNamespace({ chainNamespace: namespace, closeModal: false });\n        }\n    }\n    async syncWalletConnectAccount() {\n        const sessionNamespaces = Object.keys(this.universalProvider?.session?.namespaces || {});\n        const syncTasks = this.chainNamespaces.map(async (chainNamespace) => {\n            const adapter = this.getAdapter(chainNamespace);\n            if (!adapter) {\n                return;\n            }\n            const namespaceAccounts = this.universalProvider?.session?.namespaces?.[chainNamespace]?.accounts || [];\n            // We try and find the address for this network in the session object.\n            const activeChainId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipNetwork?.id;\n            const sessionAddress = namespaceAccounts.find(account => {\n                const { chainId } = _reown_appkit_common__WEBPACK_IMPORTED_MODULE_34__.ParseUtil.parseCaipAddress(account);\n                return chainId === activeChainId?.toString();\n            }) || namespaceAccounts[0];\n            if (sessionAddress) {\n                const caipAddress = _reown_appkit_common__WEBPACK_IMPORTED_MODULE_34__.ParseUtil.validateCaipAddress(sessionAddress);\n                const { chainId, address } = _reown_appkit_common__WEBPACK_IMPORTED_MODULE_34__.ParseUtil.parseCaipAddress(caipAddress);\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.setProviderId(chainNamespace, _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_32__.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT);\n                if (this.caipNetworks &&\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipNetwork &&\n                    adapter.namespace !== _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CHAIN.EVM) {\n                    const provider = adapter.getWalletConnectProvider({\n                        caipNetworks: this.getCaipNetworks(),\n                        provider: this.universalProvider,\n                        activeCaipNetwork: _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipNetwork\n                    });\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.setProvider(chainNamespace, provider);\n                }\n                else {\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.setProvider(chainNamespace, this.universalProvider);\n                }\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.setConnectorId(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT, chainNamespace);\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.addConnectedNamespace(chainNamespace);\n                await this.syncAccount({\n                    address,\n                    chainId,\n                    chainNamespace\n                });\n            }\n            else if (sessionNamespaces.includes(chainNamespace)) {\n                this.setStatus('disconnected', chainNamespace);\n            }\n            const data = this.getApprovedCaipNetworksData();\n            this.syncConnectedWalletInfo(chainNamespace);\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.setApprovedCaipNetworksData(chainNamespace, {\n                approvedCaipNetworkIds: data.approvedCaipNetworkIds,\n                supportsAllNetworks: data.supportsAllNetworks\n            });\n        });\n        await Promise.all(syncTasks);\n    }\n    syncProvider({ type, provider, id, chainNamespace }) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.setProviderId(chainNamespace, type);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.setProvider(chainNamespace, provider);\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.setConnectorId(id, chainNamespace);\n    }\n    async syncAccount(params) {\n        const isActiveNamespace = params.chainNamespace === _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n        const networkOfChain = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getCaipNetworkByNamespace(params.chainNamespace, params.chainId);\n        const { address, chainId, chainNamespace } = params;\n        const { chainId: activeChainId } = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.getActiveNetworkProps();\n        const chainIdToUse = networkOfChain?.id || activeChainId;\n        const isUnsupportedNetwork = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipNetwork?.name === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.UNSUPPORTED_NETWORK_NAME;\n        const shouldSupportAllNetworks = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getNetworkProp('supportsAllNetworks', chainNamespace);\n        this.setStatus('connected', chainNamespace);\n        if (isUnsupportedNetwork && !shouldSupportAllNetworks) {\n            return;\n        }\n        if (chainIdToUse) {\n            let caipNetwork = this.getCaipNetworks().find(n => n.id.toString() === chainIdToUse.toString());\n            let fallbackCaipNetwork = this.getCaipNetworks().find(n => n.chainNamespace === chainNamespace);\n            // If doesn't support all networks, we need to use approved networks\n            if (!shouldSupportAllNetworks && !caipNetwork && !fallbackCaipNetwork) {\n                // Connection can be requested for a chain that is not supported by the wallet so we need to use approved networks here\n                const caipNetworkIds = this.getApprovedCaipNetworkIds() || [];\n                const caipNetworkId = caipNetworkIds.find(id => _reown_appkit_common__WEBPACK_IMPORTED_MODULE_34__.ParseUtil.parseCaipNetworkId(id)?.chainId === chainIdToUse.toString());\n                const fallBackCaipNetworkId = caipNetworkIds.find(id => _reown_appkit_common__WEBPACK_IMPORTED_MODULE_34__.ParseUtil.parseCaipNetworkId(id)?.chainNamespace === chainNamespace);\n                caipNetwork = this.getCaipNetworks().find(n => n.caipNetworkId === caipNetworkId);\n                fallbackCaipNetwork = this.getCaipNetworks().find(n => n.caipNetworkId === fallBackCaipNetworkId ||\n                    // This is a workaround used in Solana network to support deprecated caipNetworkId\n                    ('deprecatedCaipNetworkId' in n && n.deprecatedCaipNetworkId === fallBackCaipNetworkId));\n            }\n            const network = caipNetwork || fallbackCaipNetwork;\n            if (network?.chainNamespace === _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain) {\n                // If the network is unsupported and the user doesn't allow unsupported chains, we show the unsupported chain UI\n                if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.enableNetworkSwitch &&\n                    !_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.allowUnsupportedChain &&\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipNetwork?.name === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.UNSUPPORTED_NETWORK_NAME) {\n                    _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.showUnsupportedChainUI();\n                }\n                else {\n                    this.setCaipNetwork(network);\n                }\n            }\n            else if (!isActiveNamespace) {\n                if (networkOfChain) {\n                    this.setCaipNetworkOfNamespace(networkOfChain, chainNamespace);\n                }\n            }\n            this.syncConnectedWalletInfo(chainNamespace);\n            const currentAddress = this.getAddress(chainNamespace);\n            if (!_reown_appkit_utils__WEBPACK_IMPORTED_MODULE_33__.HelpersUtil.isLowerCaseMatch(address, currentAddress)) {\n                this.syncAccountInfo(address, network?.id, chainNamespace);\n            }\n            if (isActiveNamespace) {\n                await this.syncBalance({ address, chainId: network?.id, chainNamespace });\n            }\n            else {\n                await this.syncBalance({ address, chainId: networkOfChain?.id, chainNamespace });\n            }\n            this.syncIdentity({\n                address,\n                chainId,\n                chainNamespace\n            });\n        }\n    }\n    async syncAccountInfo(address, chainId, chainNamespace) {\n        const caipAddress = this.getCaipAddress(chainNamespace);\n        const newChainId = chainId || caipAddress?.split(':')[1];\n        if (!newChainId) {\n            return;\n        }\n        const newCaipAddress = `${chainNamespace}:${newChainId}:${address}`;\n        this.setCaipAddress(newCaipAddress, chainNamespace, true);\n        await this.syncIdentity({\n            address,\n            chainId: newChainId,\n            chainNamespace\n        });\n    }\n    async syncReownName(address, chainNamespace) {\n        try {\n            const registeredWcNames = await this.getReownName(address);\n            if (registeredWcNames[0]) {\n                const wcName = registeredWcNames[0];\n                this.setProfileName(wcName.name, chainNamespace);\n            }\n            else {\n                this.setProfileName(null, chainNamespace);\n            }\n        }\n        catch {\n            this.setProfileName(null, chainNamespace);\n        }\n    }\n    syncConnectedWalletInfo(chainNamespace) {\n        const connectorId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectorId(chainNamespace);\n        const providerType = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProviderId(chainNamespace);\n        if (providerType === _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_32__.ConstantsUtil.CONNECTOR_TYPE_ANNOUNCED ||\n            providerType === _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_32__.ConstantsUtil.CONNECTOR_TYPE_INJECTED) {\n            if (connectorId) {\n                const connectors = this.getConnectors();\n                const connector = connectors.find(c => {\n                    const isConnectorId = c.id === connectorId;\n                    const isRdns = c.info?.rdns === connectorId;\n                    const hasMultiChainConnector = c.connectors?.some(_c => _c.id === connectorId || _c.info?.rdns === connectorId);\n                    return isConnectorId || isRdns || Boolean(hasMultiChainConnector);\n                });\n                if (connector) {\n                    const { info, name, imageUrl } = connector;\n                    const icon = imageUrl || this.getConnectorImage(connector);\n                    this.setConnectedWalletInfo({ name, icon, ...info }, chainNamespace);\n                }\n            }\n        }\n        else if (providerType === _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_32__.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT) {\n            const provider = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProvider(chainNamespace);\n            if (provider?.session) {\n                this.setConnectedWalletInfo({\n                    ...provider.session.peer.metadata,\n                    name: provider.session.peer.metadata.name,\n                    icon: provider.session.peer.metadata.icons?.[0]\n                }, chainNamespace);\n            }\n        }\n        else if (connectorId) {\n            if (connectorId === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.COINBASE_SDK ||\n                connectorId === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.COINBASE) {\n                const connector = this.getConnectors().find(c => c.id === connectorId);\n                const name = connector?.name || 'Coinbase Wallet';\n                const icon = connector?.imageUrl || this.getConnectorImage(connector);\n                const info = connector?.info;\n                this.setConnectedWalletInfo({\n                    ...info,\n                    name,\n                    icon\n                }, chainNamespace);\n            }\n        }\n    }\n    async syncBalance(params) {\n        const caipNetwork = _reown_appkit_common__WEBPACK_IMPORTED_MODULE_36__.NetworkUtil.getNetworksByNamespace(this.getCaipNetworks(), params.chainNamespace).find(n => n.id.toString() === params.chainId?.toString());\n        if (!caipNetwork || !params.chainId) {\n            return;\n        }\n        await this.updateNativeBalance(params.address, params.chainId, params.chainNamespace);\n    }\n    async ready() {\n        await this.readyPromise;\n    }\n    async updateNativeBalance(address, chainId, namespace) {\n        const adapter = this.getAdapter(namespace);\n        const caipNetwork = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getCaipNetworkByNamespace(namespace, chainId);\n        if (adapter) {\n            const balance = await adapter.getBalance({\n                address,\n                chainId,\n                caipNetwork,\n                tokens: this.options.tokens\n            });\n            this.setBalance(balance.balance, balance.symbol, namespace);\n            return balance;\n        }\n        return undefined;\n    }\n    // -- Universal Provider ---------------------------------------------------\n    async initializeUniversalAdapter() {\n        const logger = _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_37__.LoggerUtil.createLogger((error, ...args) => {\n            if (error) {\n                this.handleAlertError(error);\n            }\n            // eslint-disable-next-line no-console\n            console.error(...args);\n        });\n        const universalProviderOptions = {\n            projectId: this.options?.projectId,\n            metadata: {\n                name: this.options?.metadata ? this.options?.metadata.name : '',\n                description: this.options?.metadata ? this.options?.metadata.description : '',\n                url: this.options?.metadata ? this.options?.metadata.url : '',\n                icons: this.options?.metadata ? this.options?.metadata.icons : ['']\n            },\n            logger\n        };\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setManualWCControl(Boolean(this.options?.manualWCControl));\n        this.universalProvider =\n            this.options.universalProvider ?? (await _walletconnect_universal_provider__WEBPACK_IMPORTED_MODULE_0__[\"default\"].init(universalProviderOptions));\n        const originalDisconnect = this.universalProvider.disconnect.bind(this.universalProvider);\n        this.universalProvider.disconnect = async () => {\n            try {\n                return await originalDisconnect();\n            }\n            catch (error) {\n                if (error instanceof Error) {\n                    const isAlreadyDisconnected = error.message.includes('Missing or invalid. Record was recently deleted');\n                    if (isAlreadyDisconnected) {\n                        return undefined;\n                    }\n                }\n                throw error;\n            }\n        };\n        if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.enableReconnect === false && this.universalProvider.session) {\n            await this.universalProvider.disconnect();\n        }\n        this.listenWalletConnect();\n    }\n    listenWalletConnect() {\n        if (this.universalProvider) {\n            this.chainNamespaces.forEach(namespace => {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_24__.WcHelpersUtil.listenWcProvider({\n                    universalProvider: this.universalProvider,\n                    namespace,\n                    onDisplayUri: uri => {\n                        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.setUri(uri);\n                    },\n                    onConnect: accounts => {\n                        const { address } = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.getAccount(accounts[0]);\n                        for (const namespace of this.chainNamespaces) {\n                            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.removeDisconnectedConnectorId(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT, namespace);\n                        }\n                        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.finalizeWcConnection(address);\n                    },\n                    onDisconnect: () => {\n                        if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.noAdapters) {\n                            this.resetAccount(namespace);\n                        }\n                        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.resetWcConnection();\n                    },\n                    onChainChanged: chainId => {\n                        const activeNamespace = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n                        const isCurrentConnectorWalletConnect = activeNamespace &&\n                            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.state.activeConnectorIds[activeNamespace] ===\n                                _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;\n                        if (activeNamespace === namespace &&\n                            (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.noAdapters || isCurrentConnectorWalletConnect)) {\n                            const caipNetwork = this.getCaipNetworks().find(n => n.id.toString() === chainId.toString() ||\n                                n.caipNetworkId.toString() === chainId.toString());\n                            const currentCaipNetwork = this.getCaipNetwork();\n                            if (!caipNetwork) {\n                                this.setUnsupportedNetwork(chainId);\n                                return;\n                            }\n                            if (currentCaipNetwork?.id.toString() !== caipNetwork?.id.toString() &&\n                                currentCaipNetwork?.chainNamespace === caipNetwork?.chainNamespace) {\n                                this.setCaipNetwork(caipNetwork);\n                            }\n                        }\n                    },\n                    onAccountsChanged: accounts => {\n                        const activeNamespace = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n                        const isCurrentConnectorWalletConnect = activeNamespace &&\n                            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.state.activeConnectorIds[activeNamespace] ===\n                                _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;\n                        if (activeNamespace === namespace &&\n                            (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.noAdapters || isCurrentConnectorWalletConnect)) {\n                            const account = accounts?.[0];\n                            if (account) {\n                                this.syncAccount({\n                                    address: account.address,\n                                    chainId: account.chainId,\n                                    chainNamespace: account.chainNamespace\n                                });\n                            }\n                        }\n                    }\n                });\n            });\n        }\n    }\n    createUniversalProvider() {\n        if (!this.universalProviderInitPromise &&\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.isClient() &&\n            this.options?.projectId) {\n            this.universalProviderInitPromise = this.initializeUniversalAdapter();\n        }\n        return this.universalProviderInitPromise;\n    }\n    async getUniversalProvider() {\n        if (!this.universalProvider) {\n            try {\n                await this.createUniversalProvider();\n            }\n            catch (err) {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_26__.EventsController.sendEvent({\n                    type: 'error',\n                    event: 'INTERNAL_SDK_ERROR',\n                    properties: {\n                        errorType: 'UniversalProviderInitError',\n                        errorMessage: err instanceof Error ? err.message : 'Unknown',\n                        uncaught: false\n                    }\n                });\n                // eslint-disable-next-line no-console\n                console.error('AppKit:getUniversalProvider - Cannot create provider', err);\n            }\n        }\n        return this.universalProvider;\n    }\n    getDisabledCaipNetworks() {\n        const approvedCaipNetworkIds = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAllApprovedCaipNetworkIds();\n        const requestedCaipNetworks = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAllRequestedCaipNetworks();\n        const sortedNetworks = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.sortRequestedNetworks(approvedCaipNetworkIds, requestedCaipNetworks);\n        return sortedNetworks.filter(network => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.isCaipNetworkDisabled(network));\n    }\n    // - Utils -------------------------------------------------------------------\n    handleAlertError(error) {\n        const matchedUniversalProviderError = Object.entries(_reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.UniversalProviderErrors).find(([, { message }]) => error.message.includes(message));\n        const [errorKey, errorValue] = matchedUniversalProviderError ?? [];\n        const { message, alertErrorKey } = errorValue ?? {};\n        if (errorKey && message && !this.reportedAlertErrors[errorKey]) {\n            const alertError = _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_ERRORS[alertErrorKey];\n            if (alertError) {\n                _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(alertError, 'error');\n                this.reportedAlertErrors[errorKey] = true;\n            }\n        }\n    }\n    getAdapter(namespace) {\n        if (!namespace) {\n            return undefined;\n        }\n        return this.chainAdapters?.[namespace];\n    }\n    createAdapter(blueprint) {\n        if (!blueprint) {\n            return;\n        }\n        const namespace = blueprint.namespace;\n        if (!namespace) {\n            return;\n        }\n        this.createClients();\n        const adapterBlueprint = blueprint;\n        adapterBlueprint.namespace = namespace;\n        adapterBlueprint.construct({\n            namespace,\n            projectId: this.options?.projectId,\n            networks: this.caipNetworks?.filter(({ chainNamespace }) => chainNamespace === namespace)\n        });\n        if (!this.chainNamespaces.includes(namespace)) {\n            this.chainNamespaces.push(namespace);\n        }\n        if (this.chainAdapters) {\n            this.chainAdapters[namespace] = adapterBlueprint;\n        }\n    }\n    // -- Public -------------------------------------------------------------------\n    async open(options) {\n        await this.injectModalUi();\n        if (options?.uri) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.setUri(options.uri);\n        }\n        const { isSwap, isSend } = this.toModalOptions();\n        if (isSwap(options)) {\n            return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_22__.ModalController.open({\n                ...options,\n                data: { swap: options.arguments }\n            });\n        }\n        else if (isSend(options)) {\n            if (options.arguments) {\n                return this.openSend(options.arguments);\n            }\n        }\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_22__.ModalController.open(options);\n    }\n    async close() {\n        await this.injectModalUi();\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_22__.ModalController.close();\n    }\n    setLoading(loading, namespace) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_22__.ModalController.setLoading(loading, namespace);\n    }\n    async disconnect(chainNamespace) {\n        await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.disconnect({ namespace: chainNamespace });\n    }\n    getSIWX() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.siwx;\n    }\n    // -- review these -------------------------------------------------------------------\n    getError() {\n        return '';\n    }\n    getChainId() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeCaipNetwork?.id;\n    }\n    async switchNetwork(appKitNetwork, { throwOnFailure = false } = {}) {\n        const network = this.getCaipNetworks().find(n => n.id === appKitNetwork.id);\n        if (!network) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(_reown_appkit_utils__WEBPACK_IMPORTED_MODULE_25__.ErrorUtil.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND, 'error');\n            return;\n        }\n        await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.switchActiveNetwork(network, { throwOnFailure });\n    }\n    getWalletProvider() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain\n            ? _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.state.providers[_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain]\n            : null;\n    }\n    getWalletProviderType() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.getProviderId(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n    }\n    subscribeProviders(callback) {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ProviderController.subscribeProviders(callback);\n    }\n    getThemeMode() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__.ThemeController.state.themeMode;\n    }\n    getThemeVariables() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__.ThemeController.state.themeVariables;\n    }\n    setThemeMode(themeMode) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__.ThemeController.setThemeMode(themeMode);\n        (0,_reown_appkit_ui__WEBPACK_IMPORTED_MODULE_1__.setColorTheme)(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__.ThemeController.state.themeMode);\n    }\n    setTermsConditionsUrl(termsConditionsUrl) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setTermsConditionsUrl(termsConditionsUrl);\n    }\n    setPrivacyPolicyUrl(privacyPolicyUrl) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setPrivacyPolicyUrl(privacyPolicyUrl);\n    }\n    setThemeVariables(themeVariables) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__.ThemeController.setThemeVariables(themeVariables);\n        (0,_reown_appkit_ui__WEBPACK_IMPORTED_MODULE_1__.setThemeVariables)(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__.ThemeController.state.themeVariables);\n    }\n    subscribeTheme(callback) {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_28__.ThemeController.subscribe(callback);\n    }\n    subscribeConnections(callback) {\n        if (!this.remoteFeatures.multiWallet) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_14__.AlertController.open(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT, 'info');\n            return () => undefined;\n        }\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.subscribe(callback);\n    }\n    getWalletInfo(namespace) {\n        if (namespace) {\n            return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.chains.get(namespace)?.accountState?.connectedWalletInfo;\n        }\n        const accountData = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAccountData();\n        return accountData?.connectedWalletInfo;\n    }\n    getAccount(_namespace) {\n        const namespace = _namespace || _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain;\n        const authConnector = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getAuthConnector(namespace);\n        const accountState = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.getAccountData(namespace);\n        const activeConnectorId = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.getConnectedConnectorId(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.state.activeChain);\n        const connections = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_11__.ConnectionController.getConnections(namespace);\n        if (!namespace) {\n            throw new Error('AppKit:getAccount - namespace is required');\n        }\n        const allAccounts = connections.flatMap(connection => connection.accounts.map(({ address, type, publicKey }) => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.createAccount(namespace, address, (type || 'eoa'), publicKey)));\n        if (!accountState) {\n            return undefined;\n        }\n        return {\n            allAccounts,\n            caipAddress: accountState.caipAddress,\n            address: _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_8__.CoreHelperUtil.getPlainAddress(accountState.caipAddress),\n            isConnected: Boolean(accountState.caipAddress),\n            status: accountState.status,\n            embeddedWalletInfo: authConnector && activeConnectorId === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_15__.ConstantsUtil.CONNECTOR_ID.AUTH\n                ? {\n                    user: accountState.user\n                        ? {\n                            ...accountState.user,\n                            /*\n                             * Getting the username from the chain controller works well for social logins,\n                             * but Farcaster uses a different connection flow and doesn't emit the username via events.\n                             * Since the username is stored in local storage before the chain controller updates,\n                             * it's safe to use the local storage value here.\n                             */\n                            username: _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_10__.StorageUtil.getConnectedSocialUsername()\n                        }\n                        : undefined,\n                    authProvider: accountState.socialProvider || 'email',\n                    accountType: (0,_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_7__.getPreferredAccountType)(namespace),\n                    isSmartAccountDeployed: Boolean(accountState.smartAccountDeployed)\n                }\n                : undefined\n        };\n    }\n    subscribeAccount(callback, namespace) {\n        const unsubArr = [];\n        const updateVal = () => {\n            const account = this.getAccount(namespace);\n            if (!account) {\n                return;\n            }\n            callback(account);\n        };\n        if (namespace) {\n            const unsub = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.subscribeChainProp('accountState', updateVal, namespace);\n            unsubArr.push(unsub);\n        }\n        else {\n            const unsub = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.subscribe(updateVal);\n            unsubArr.push(unsub);\n        }\n        const unsub = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.subscribe(updateVal);\n        unsubArr.push(unsub);\n        return () => {\n            unsubArr.forEach(fn => fn());\n        };\n    }\n    subscribeNetwork(callback) {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.subscribe(({ activeCaipNetwork }) => {\n            callback({\n                caipNetwork: activeCaipNetwork,\n                chainId: activeCaipNetwork?.id,\n                caipNetworkId: activeCaipNetwork?.caipNetworkId\n            });\n        });\n    }\n    subscribeWalletInfo(callback, namespace) {\n        if (namespace) {\n            return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.subscribeChainProp('accountState', accountState => callback(accountState?.connectedWalletInfo), namespace);\n        }\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.subscribeChainProp('accountState', accountState => callback(accountState?.connectedWalletInfo));\n    }\n    subscribeShouldUpdateToAddress(callback) {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.subscribeChainProp('accountState', accountState => callback(accountState?.shouldUpdateToAddress));\n    }\n    subscribeCaipNetworkChange(callback) {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.subscribeKey('activeCaipNetwork', callback);\n    }\n    getState() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_38__.PublicStateController.state;\n    }\n    getRemoteFeatures() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.remoteFeatures;\n    }\n    subscribeState(callback) {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_38__.PublicStateController.subscribe(callback);\n    }\n    subscribeRemoteFeatures(callback) {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.subscribeKey('remoteFeatures', callback);\n    }\n    showErrorMessage(message) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_39__.SnackController.showError(message);\n    }\n    showSuccessMessage(message) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_39__.SnackController.showSuccess(message);\n    }\n    getEvent() {\n        return { ..._reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_26__.EventsController.state };\n    }\n    subscribeEvents(callback) {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_26__.EventsController.subscribe(callback);\n    }\n    replace(route) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_35__.RouterController.replace(route);\n    }\n    redirect(route) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_35__.RouterController.push(route);\n    }\n    popTransactionStack(status) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_35__.RouterController.popTransactionStack(status);\n    }\n    isOpen() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_22__.ModalController.state.open;\n    }\n    isTransactionStackEmpty() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_35__.RouterController.state.transactionStack.length === 0;\n    }\n    static getInstance() {\n        return this.instance;\n    }\n    updateFeatures(newFeatures) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setFeatures(newFeatures);\n    }\n    updateRemoteFeatures(newRemoteFeatures) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setRemoteFeatures(newRemoteFeatures);\n    }\n    updateOptions(newOptions) {\n        const currentOptions = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state || {};\n        const updatedOptions = { ...currentOptions, ...newOptions };\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setOptions(updatedOptions);\n    }\n    setConnectMethodsOrder(connectMethodsOrder) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setConnectMethodsOrder(connectMethodsOrder);\n    }\n    setWalletFeaturesOrder(walletFeaturesOrder) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setWalletFeaturesOrder(walletFeaturesOrder);\n    }\n    setCollapseWallets(collapseWallets) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setCollapseWallets(collapseWallets);\n    }\n    setSocialsOrder(socialsOrder) {\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.setSocialsOrder(socialsOrder);\n    }\n    getConnectMethodsOrder() {\n        return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_40__.WalletUtil.getConnectOrderMethod(_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_17__.OptionsController.state.features, _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_9__.ConnectorController.getConnectors());\n    }\n    /**\n     * Adds a network to an existing adapter in AppKit.\n     * @param namespace - The chain namespace to add the network to (e.g. 'eip155', 'solana')\n     * @param network - The network configuration to add\n     * @throws Error if adapter for namespace doesn't exist\n     */\n    addNetwork(namespace, network) {\n        if (this.chainAdapters && !this.chainAdapters[namespace]) {\n            throw new Error(`Adapter for namespace ${namespace} doesn't exist`);\n        }\n        const extendedNetwork = this.extendCaipNetwork(network, this.options);\n        if (!this.getCaipNetworks().find(n => n.id === extendedNetwork.id)) {\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.addNetwork(extendedNetwork);\n        }\n    }\n    /**\n     * Removes a network from an existing adapter in AppKit.\n     * @param namespace - The chain namespace the network belongs to\n     * @param networkId - The network ID to remove\n     * @throws Error if adapter for namespace doesn't exist or if removing last network\n     */\n    removeNetwork(namespace, networkId) {\n        if (this.chainAdapters && !this.chainAdapters[namespace]) {\n            throw new Error(`Adapter for namespace ${namespace} doesn't exist`);\n        }\n        const networkToRemove = this.getCaipNetworks().find(n => n.id === networkId);\n        if (!networkToRemove) {\n            return;\n        }\n        _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.ChainController.removeNetwork(namespace, networkId);\n    }\n}\n//# sourceMappingURL=appkit-base-client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL3NyYy9jbGllbnQvYXBwa2l0LWJhc2UtY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRTtBQUNXO0FBQytkO0FBQ3hlO0FBQ3NFO0FBQ3hFO0FBQ2Q7QUFDN0M7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHNFQUFlO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxzRUFBZTtBQUM1RDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsc0VBQWU7QUFDN0Q7QUFDQTtBQUNBLG1CQUFtQixzRUFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHNFQUFlO0FBQzdELDZDQUE2QyxzRUFBZTtBQUM1RDtBQUNBLFlBQVksc0VBQWU7QUFDM0I7QUFDQSwrQ0FBK0Msc0VBQWU7QUFDOUQ7QUFDQSxnQkFBZ0Isc0VBQWU7QUFDL0IsdUJBQXVCLHNFQUFlO0FBQ3RDO0FBQ0EsbUJBQW1CLHNFQUFlO0FBQ2xDO0FBQ0E7QUFDQSxZQUFZLDhFQUF1QjtBQUNuQztBQUNBLDBDQUEwQyx5RUFBa0I7QUFDNUQsOENBQThDLHlFQUFrQjtBQUNoRSxzREFBc0Qsa0ZBQXVCO0FBQzdFO0FBQ0EsWUFBWSxzRUFBZTtBQUMzQixZQUFZLHNFQUFlLDJCQUEyQixxRUFBYztBQUNwRTtBQUNBO0FBQ0EsWUFBWSxzRUFBZTtBQUMzQixZQUFZLHNFQUFlO0FBQzNCO0FBQ0E7QUFDQSxZQUFZLHNF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ZUFBZSx5RUFBaUI7QUFDaEM7QUFDQTtBQUNBLFFBQVEsdUVBQWU7QUFDdkI7QUFDQTtBQUNBLFFBQVEsdUVBQWU7QUFDdkI7QUFDQTtBQUNBLGlCQUFpQixHQUFHLHdFQUFnQjtBQUNwQztBQUNBO0FBQ0EsZUFBZSx3RUFBZ0I7QUFDL0I7QUFDQTtBQUNBLFFBQVEsd0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxRQUFRLHdFQUFnQjtBQUN4QjtBQUNBO0FBQ0EsUUFBUSx3RUFBZ0I7QUFDeEI7QUFDQTtBQUNBLGVBQWUsdUVBQWU7QUFDOUI7QUFDQTtBQUNBLGVBQWUsd0VBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlFQUFpQjtBQUN6QjtBQUNBO0FBQ0EsUUFBUSx5RUFBaUI7QUFDekI7QUFDQTtBQUNBLCtCQUErQix5RUFBaUI7QUFDaEQsaUNBQWlDO0FBQ2pDLFFBQVEseUVBQWlCO0FBQ3pCO0FBQ0E7QUFDQSxRQUFRLHlFQUFpQjtBQUN6QjtBQUNBO0FBQ0EsUUFBUSx5RUFBaUI7QUFDekI7QUFDQTtBQUNBLFFBQVEseUVBQWlCO0FBQ3pCO0FBQ0E7QUFDQSxRQUFRLHlFQUFpQjtBQUN6QjtBQUNBO0FBQ0EsZUFBZSxrRUFBVSx1QkFBdUIseUVBQWlCLGlCQUFpQiwwRUFBbUI7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELFdBQVc7QUFDaEU7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzRUFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxXQUFXO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNFQUFlO0FBQ3ZCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL2hvbWUvYmVyZ3RhdHQvcHJvamVjdHMvZW10cHlsYWIvbGlrZWxpL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVvd24rYXBwa2l0QDEuOC4xNy13Yy1jaXJjdWxhci1kZXBlbmRlbmNpZXMtZml4LjBfQHR5cGVzK3JlYWN0QDE5LjIuOV9idWZmZXJ1dGlsQDQuMS5fMThkYTAyODcyYjU0ZjI3MWM5MDlhNTM5Zjk0NWUxNWIvbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQvZGlzdC9lc20vc3JjL2NsaWVudC9hcHBraXQtYmFzZS1jbGllbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVuaXZlcnNhbFByb3ZpZGVyIGZyb20gJ0B3YWxsZXRjb25uZWN0L3VuaXZlcnNhbC1wcm92aWRlcic7XG5pbXBvcnQgeyBDb25zdGFudHNVdGlsLCBOZXR3b3JrVXRpbCwgUGFyc2VVdGlsIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb21tb24nO1xuaW1wb3J0IHsgQWRhcHRlckNvbnRyb2xsZXIsIEFsZXJ0Q29udHJvbGxlciwgQXBpQ29udHJvbGxlciwgQXNzZXRVdGlsLCBCbG9ja2NoYWluQXBpQ29udHJvbGxlciwgQ2hhaW5Db250cm9sbGVyLCBDb25uZWN0aW9uQ29udHJvbGxlciwgQ29ubmVjdGlvbkNvbnRyb2xsZXJVdGlsLCBDb25uZWN0b3JDb250cm9sbGVyLCBDb25uZWN0b3JVdGlsLCBDb25zdGFudHNVdGlsIGFzIENvcmVDb25zdGFudHNVdGlsLCBDb3JlSGVscGVyVXRpbCwgRW5zQ29udHJvbGxlciwgRXZlbnRzQ29udHJvbGxlciwgTW9kYWxDb250cm9sbGVyLCBPblJhbXBDb250cm9sbGVyLCBPcHRpb25zQ29udHJvbGxlciwgUHJvdmlkZXJDb250cm9sbGVyLCBQdWJsaWNTdGF0ZUNvbnRyb2xsZXIsIFJvdXRlckNvbnRyb2xsZXIsIFNJV1hVdGlsLCBTZW5kQ29udHJvbGxlciwgU25hY2tDb250cm9sbGVyLCBTdG9yYWdlVXRpbCwgVGhlbWVDb250cm9sbGVyLCBXYWxsZXRVdGlsLCBXY0hlbHBlcnNVdGlsLCBnZXRQcmVmZXJyZWRBY2NvdW50VHlwZSB9IGZyb20gJ0ByZW93bi9hcHBraXQtY29udHJvbGxlcnMnO1xuaW1wb3J0IHsgc2V0Q29sb3JUaGVtZSwgc2V0VGhlbWVWYXJpYWJsZXMgfSBmcm9tICdAcmVvd24vYXBwa2l0LXVpJztcbmltcG9ydCB7IENhaXBOZXR3b3Jrc1V0aWwsIEVycm9yVXRpbCwgSGVscGVyc1V0aWwsIExvZ2dlclV0aWwsIFRva2VuVXRpbCwgQ29uc3RhbnRzVXRpbCBhcyBVdGlsQ29uc3RhbnRzVXRpbCB9IGZyb20gJ0ByZW93bi9hcHBraXQtdXRpbHMnO1xuaW1wb3J0IHsgVW5pdmVyc2FsQWRhcHRlciB9IGZyb20gJy4uL3VuaXZlcnNhbC1hZGFwdGVyL2NsaWVudC5qcyc7XG5pbXBvcnQgeyBDb25maWdVdGlsIH0gZnJvbSAnLi4vdXRpbHMvQ29uZmlnVXRpbC5qcyc7XG5leHBvcnQgY2xhc3MgQXBwS2l0QmFzZUNsaWVudCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLmNoYWluTmFtZXNwYWNlcyA9IFtdO1xuICAgICAgICB0aGlzLmZlYXR1cmVzID0ge307XG4gICAgICAgIHRoaXMucmVtb3RlRmVhdHVyZXMgPSB7fTtcbiAgICAgICAgdGhpcy5yZXBvcnRlZEFsZXJ0RXJyb3JzID0ge307XG4gICAgICAgIC8vIC0tIFB1YmxpYyBJbnRlcm5hbCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgdGhpcy5nZXRDYWlwTmV0d29yayA9IChjaGFpbk5hbWVzcGFjZSwgaWQpID0+IHtcbiAgICAgICAgICAgIGlmIChjaGFpbk5hbWVzcGFjZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhaXBOZXR3b3JrV2l0aElkID0gQ2hhaW5Db250cm9sbGVyLmdldENhaXBOZXR3b3JrcyhjaGFpbk5hbWVzcGFjZSk/LmZpbmQoYyA9PiBjLmlkID09PSBpZCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhaXBOZXR3b3JrV2l0aElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWlwTmV0d29ya1dpdGhJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZXNwYWNlQ2FpcE5ldHdvcmsgPSBDaGFpbkNvbnRyb2xsZXIuZ2V0TmV0d29ya0RhdGEoY2hhaW5OYW1lc3BhY2UpPy5jYWlwTmV0d29yaztcbiAgICAgICAgICAgICAgICBpZiAobmFtZXNwYWNlQ2FpcE5ldHdvcmspIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzcGFjZUNhaXBOZXR3b3JrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRDYWlwTmV0d29ya3MgPSBDaGFpbkNvbnRyb2xsZXIuZ2V0UmVxdWVzdGVkQ2FpcE5ldHdvcmtzKGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdGVkQ2FpcE5ldHdvcmtzLmZpbHRlcihjID0+IGMuY2hhaW5OYW1lc3BhY2UgPT09IGNoYWluTmFtZXNwYWNlKT8uWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDYWlwTmV0d29yayB8fCB0aGlzLmRlZmF1bHRDYWlwTmV0d29yaztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRDYWlwTmV0d29ya0lkID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV0d29yayA9IHRoaXMuZ2V0Q2FpcE5ldHdvcmsoKTtcbiAgICAgICAgICAgIGlmIChuZXR3b3JrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldHdvcmsuaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldENhaXBOZXR3b3JrcyA9IChuYW1lc3BhY2UpID0+IENoYWluQ29udHJvbGxlci5nZXRDYWlwTmV0d29ya3MobmFtZXNwYWNlKTtcbiAgICAgICAgdGhpcy5nZXRBY3RpdmVDaGFpbk5hbWVzcGFjZSA9ICgpID0+IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbjtcbiAgICAgICAgdGhpcy5zZXRSZXF1ZXN0ZWRDYWlwTmV0d29ya3MgPSAocmVxdWVzdGVkQ2FpcE5ldHdvcmtzLCBjaGFpbikgPT4ge1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldFJlcXVlc3RlZENhaXBOZXR3b3JrcyhyZXF1ZXN0ZWRDYWlwTmV0d29ya3MsIGNoYWluKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRBcHByb3ZlZENhaXBOZXR3b3JrSWRzID0gKCkgPT4gQ2hhaW5Db250cm9sbGVyLmdldEFsbEFwcHJvdmVkQ2FpcE5ldHdvcmtJZHMoKTtcbiAgICAgICAgdGhpcy5nZXRDYWlwQWRkcmVzcyA9IChjaGFpbk5hbWVzcGFjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbiA9PT0gY2hhaW5OYW1lc3BhY2UgfHwgIWNoYWluTmFtZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDYWlwQWRkcmVzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuY2hhaW5zLmdldChjaGFpbk5hbWVzcGFjZSk/LmFjY291bnRTdGF0ZT8uY2FpcEFkZHJlc3M7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0Q2xpZW50SWQgPSBjbGllbnRJZCA9PiB7XG4gICAgICAgICAgICBCbG9ja2NoYWluQXBpQ29udHJvbGxlci5zZXRDbGllbnRJZChjbGllbnRJZCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0UHJvdmlkZXIgPSAobmFtZXNwYWNlKSA9PiBQcm92aWRlckNvbnRyb2xsZXIuZ2V0UHJvdmlkZXIobmFtZXNwYWNlKTtcbiAgICAgICAgdGhpcy5nZXRQcm92aWRlclR5cGUgPSAobmFtZXNwYWNlKSA9PiBQcm92aWRlckNvbnRyb2xsZXIuZ2V0UHJvdmlkZXJJZChuYW1lc3BhY2UpO1xuICAgICAgICB0aGlzLmdldFByZWZlcnJlZEFjY291bnRUeXBlID0gKG5hbWVzcGFjZSkgPT4gZ2V0UHJlZmVycmVkQWNjb3VudFR5cGUobmFtZXNwYWNlKTtcbiAgICAgICAgdGhpcy5zZXRDYWlwQWRkcmVzcyA9IChjYWlwQWRkcmVzcywgY2hhaW4sIHNob3VsZFJlZnJlc2ggPSBmYWxzZSkgPT4ge1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldEFjY291bnRQcm9wKCdjYWlwQWRkcmVzcycsIGNhaXBBZGRyZXNzLCBjaGFpbiwgc2hvdWxkUmVmcmVzaCk7XG4gICAgICAgICAgICBDaGFpbkNvbnRyb2xsZXIuc2V0QWNjb3VudFByb3AoJ2FkZHJlc3MnLCBDb3JlSGVscGVyVXRpbC5nZXRQbGFpbkFkZHJlc3MoY2FpcEFkZHJlc3MpLCBjaGFpbiwgc2hvdWxkUmVmcmVzaCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0QmFsYW5jZSA9IChiYWxhbmNlLCBiYWxhbmNlU3ltYm9sLCBjaGFpbikgPT4ge1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldEFjY291bnRQcm9wKCdiYWxhbmNlJywgYmFsYW5jZSwgY2hhaW4pO1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldEFjY291bnRQcm9wKCdiYWxhbmNlU3ltYm9sJywgYmFsYW5jZVN5bWJvbCwgY2hhaW4pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFByb2ZpbGVOYW1lID0gKHByb2ZpbGVOYW1lLCBjaGFpbikgPT4ge1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldEFjY291bnRQcm9wKCdwcm9maWxlTmFtZScsIHByb2ZpbGVOYW1lLCBjaGFpbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0UHJvZmlsZUltYWdlID0gKHByb2ZpbGVJbWFnZSwgY2hhaW4pID0+IHtcbiAgICAgICAgICAgIENoYWluQ29udHJvbGxlci5zZXRBY2NvdW50UHJvcCgncHJvZmlsZUltYWdlJywgcHJvZmlsZUltYWdlLCBjaGFpbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0VXNlciA9ICh1c2VyLCBjaGFpbikgPT4ge1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldEFjY291bnRQcm9wKCd1c2VyJywgdXNlciwgY2hhaW4pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlc2V0QWNjb3VudCA9IChjaGFpbikgPT4ge1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnJlc2V0QWNjb3VudChjaGFpbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0Q2FpcE5ldHdvcmsgPSBjYWlwTmV0d29yayA9PiB7XG4gICAgICAgICAgICBDaGFpbkNvbnRyb2xsZXIuc2V0QWN0aXZlQ2FpcE5ldHdvcmsoY2FpcE5ldHdvcmspO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldENhaXBOZXR3b3JrT2ZOYW1lc3BhY2UgPSAoY2FpcE5ldHdvcmssIGNoYWluTmFtZXNwYWNlKSA9PiB7XG4gICAgICAgICAgICBDaGFpbkNvbnRyb2xsZXIuc2V0Q2hhaW5OZXR3b3JrRGF0YShjaGFpbk5hbWVzcGFjZSwgeyBjYWlwTmV0d29yayB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMgPSAoc3RhdHVzLCBjaGFpbikgPT4ge1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldEFjY291bnRQcm9wKCdzdGF0dXMnLCBzdGF0dXMsIGNoYWluKTtcbiAgICAgICAgICAgIC8vIElmIGF0IGxlYXN0IG9uZSBuYW1lc3BhY2UgaXMgY29ubmVjdGVkLCBzZXQgdGhlIGNvbm5lY3Rpb24gc3RhdHVzXG4gICAgICAgICAgICBpZiAoQ29ubmVjdG9yQ29udHJvbGxlci5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICAgICAgICAgICAgU3RvcmFnZVV0aWwuc2V0Q29ubmVjdGlvblN0YXR1cygnY29ubmVjdGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBTdG9yYWdlVXRpbC5zZXRDb25uZWN0aW9uU3RhdHVzKCdkaXNjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRBZGRyZXNzQnlDaGFpbk5hbWVzcGFjZSA9IChjaGFpbk5hbWVzcGFjZSkgPT4gQ2hhaW5Db250cm9sbGVyLmdldEFjY291bnREYXRhKGNoYWluTmFtZXNwYWNlKT8uYWRkcmVzcztcbiAgICAgICAgdGhpcy5zZXRDb25uZWN0b3JzID0gY29ubmVjdG9ycyA9PiB7XG4gICAgICAgICAgICBjb25zdCBhbGxDb25uZWN0b3JzID0gWy4uLkNvbm5lY3RvckNvbnRyb2xsZXIuc3RhdGUuYWxsQ29ubmVjdG9ycywgLi4uY29ubmVjdG9yc107XG4gICAgICAgICAgICBDb25uZWN0b3JDb250cm9sbGVyLnNldENvbm5lY3RvcnMoYWxsQ29ubmVjdG9ycyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0Q29ubmVjdGlvbnMgPSAoY29ubmVjdGlvbnMsIGNoYWluTmFtZXNwYWNlKSA9PiB7XG4gICAgICAgICAgICBTdG9yYWdlVXRpbC5zZXRDb25uZWN0aW9ucyhjb25uZWN0aW9ucywgY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICAgICAgQ29ubmVjdGlvbkNvbnRyb2xsZXIuc2V0Q29ubmVjdGlvbnMoY29ubmVjdGlvbnMsIGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mZXRjaElkZW50aXR5ID0gcmVxdWVzdCA9PiBCbG9ja2NoYWluQXBpQ29udHJvbGxlci5mZXRjaElkZW50aXR5KHJlcXVlc3QpO1xuICAgICAgICB0aGlzLmdldFJlb3duTmFtZSA9IGFkZHJlc3MgPT4gRW5zQ29udHJvbGxlci5nZXROYW1lc0ZvckFkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgIHRoaXMuZ2V0Q29ubmVjdG9ycyA9ICgpID0+IENvbm5lY3RvckNvbnRyb2xsZXIuZ2V0Q29ubmVjdG9ycygpO1xuICAgICAgICB0aGlzLmdldENvbm5lY3RvckltYWdlID0gY29ubmVjdG9yID0+IEFzc2V0VXRpbC5nZXRDb25uZWN0b3JJbWFnZShjb25uZWN0b3IpO1xuICAgICAgICB0aGlzLmdldENvbm5lY3Rpb25zID0gKG5hbWVzcGFjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbW90ZUZlYXR1cmVzLm11bHRpV2FsbGV0KSB7XG4gICAgICAgICAgICAgICAgQWxlcnRDb250cm9sbGVyLm9wZW4oQ29uc3RhbnRzVXRpbC5SRU1PVEVfRkVBVFVSRVNfQUxFUlRTLk1VTFRJX1dBTExFVF9OT1RfRU5BQkxFRC5ERUZBVUxULCAnaW5mbycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBDb25uZWN0aW9uQ29udHJvbGxlclV0aWwuZ2V0Q29ubmVjdGlvbnNEYXRhKG5hbWVzcGFjZSkuY29ubmVjdGlvbnM7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0UmVjZW50Q29ubmVjdGlvbnMgPSAobmFtZXNwYWNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVtb3RlRmVhdHVyZXMubXVsdGlXYWxsZXQpIHtcbiAgICAgICAgICAgICAgICBBbGVydENvbnRyb2xsZXIub3BlbihDb25zdGFudHNVdGlsLlJFTU9URV9GRUFUVVJFU19BTEVSVFMuTVVMVElfV0FMTEVUX05PVF9FTkFCTEVELkRFRkFVTFQsICdpbmZvJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIENvbm5lY3Rpb25Db250cm9sbGVyVXRpbC5nZXRDb25uZWN0aW9uc0RhdGEobmFtZXNwYWNlKS5yZWNlbnRDb25uZWN0aW9ucztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zd2l0Y2hDb25uZWN0aW9uID0gYXN5bmMgKHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbW90ZUZlYXR1cmVzLm11bHRpV2FsbGV0KSB7XG4gICAgICAgICAgICAgICAgQWxlcnRDb250cm9sbGVyLm9wZW4oQ29uc3RhbnRzVXRpbC5SRU1PVEVfRkVBVFVSRVNfQUxFUlRTLk1VTFRJX1dBTExFVF9OT1RfRU5BQkxFRC5ERUZBVUxULCAnaW5mbycpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IENvbm5lY3Rpb25Db250cm9sbGVyLnN3aXRjaENvbm5lY3Rpb24ocGFyYW1zKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVDb25uZWN0aW9uID0gcGFyYW1zID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5yZW1vdGVGZWF0dXJlcy5tdWx0aVdhbGxldCkge1xuICAgICAgICAgICAgICAgIEFsZXJ0Q29udHJvbGxlci5vcGVuKENvbnN0YW50c1V0aWwuUkVNT1RFX0ZFQVRVUkVTX0FMRVJUUy5NVUxUSV9XQUxMRVRfTk9UX0VOQUJMRUQuREVGQVVMVCwgJ2luZm8nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTdG9yYWdlVXRpbC5kZWxldGVBZGRyZXNzRnJvbUNvbm5lY3Rpb24ocGFyYW1zKTtcbiAgICAgICAgICAgIENvbm5lY3Rpb25Db250cm9sbGVyLnN5bmNTdG9yYWdlQ29ubmVjdGlvbnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRDb25uZWN0ZWRXYWxsZXRJbmZvID0gKGNvbm5lY3RlZFdhbGxldEluZm8sIGNoYWluKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gUHJvdmlkZXJDb250cm9sbGVyLmdldFByb3ZpZGVySWQoY2hhaW4pO1xuICAgICAgICAgICAgY29uc3Qgd2FsbGV0SW5mbyA9IGNvbm5lY3RlZFdhbGxldEluZm8gPyB7IC4uLmNvbm5lY3RlZFdhbGxldEluZm8sIHR5cGUgfSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIENoYWluQ29udHJvbGxlci5zZXRBY2NvdW50UHJvcCgnY29ubmVjdGVkV2FsbGV0SW5mbycsIHdhbGxldEluZm8sIGNoYWluKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRJc0Nvbm5lY3RlZFN0YXRlID0gKCkgPT4gQm9vbGVhbihDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2FpcEFkZHJlc3MpO1xuICAgICAgICB0aGlzLmFkZEFkZHJlc3NMYWJlbCA9IChhZGRyZXNzLCBsYWJlbCwgY2hhaW4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NMYWJlbHMgPSBDaGFpbkNvbnRyb2xsZXIuZ2V0QWNjb3VudERhdGEoY2hhaW4pPy5hZGRyZXNzTGFiZWxzIHx8IHt9O1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldEFjY291bnRQcm9wKCdhZGRyZXNzTGFiZWxzJywgeyAuLi5hZGRyZXNzTGFiZWxzLCBbYWRkcmVzc106IGxhYmVsIH0sIGNoYWluKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZW1vdmVBZGRyZXNzTGFiZWwgPSAoYWRkcmVzcywgY2hhaW4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NMYWJlbHMgPSBDaGFpbkNvbnRyb2xsZXIuZ2V0QWNjb3VudERhdGEoY2hhaW4pPy5hZGRyZXNzTGFiZWxzIHx8IHt9O1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldEFjY291bnRQcm9wKCdhZGRyZXNzTGFiZWxzJywgeyAuLi5hZGRyZXNzTGFiZWxzLCBbYWRkcmVzc106IHVuZGVmaW5lZCB9LCBjaGFpbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0QWRkcmVzcyA9IChjaGFpbk5hbWVzcGFjZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZXNwYWNlID0gY2hhaW5OYW1lc3BhY2UgfHwgQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluO1xuICAgICAgICAgICAgcmV0dXJuIENoYWluQ29udHJvbGxlci5nZXRBY2NvdW50RGF0YShuYW1lc3BhY2UpPy5hZGRyZXNzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlc2V0TmV0d29yayA9IChuYW1lc3BhY2UpID0+IHtcbiAgICAgICAgICAgIENoYWluQ29udHJvbGxlci5yZXNldE5ldHdvcmsobmFtZXNwYWNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRDb25uZWN0b3IgPSBjb25uZWN0b3IgPT4ge1xuICAgICAgICAgICAgQ29ubmVjdG9yQ29udHJvbGxlci5hZGRDb25uZWN0b3IoY29ubmVjdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZXNldFdjQ29ubmVjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIENvbm5lY3Rpb25Db250cm9sbGVyLnJlc2V0V2NDb25uZWN0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0QWRkcmVzc0V4cGxvcmVyVXJsID0gKGFkZHJlc3NFeHBsb3JlclVybCwgY2hhaW4pID0+IHtcbiAgICAgICAgICAgIENoYWluQ29udHJvbGxlci5zZXRBY2NvdW50UHJvcCgnYWRkcmVzc0V4cGxvcmVyVXJsJywgYWRkcmVzc0V4cGxvcmVyVXJsLCBjaGFpbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0U21hcnRBY2NvdW50RGVwbG95ZWQgPSAoaXNEZXBsb3llZCwgY2hhaW4pID0+IHtcbiAgICAgICAgICAgIENoYWluQ29udHJvbGxlci5zZXRBY2NvdW50UHJvcCgnc21hcnRBY2NvdW50RGVwbG95ZWQnLCBpc0RlcGxveWVkLCBjaGFpbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0UHJlZmVycmVkQWNjb3VudFR5cGUgPSAocHJlZmVycmVkQWNjb3VudFR5cGUsIGNoYWluKSA9PiB7XG4gICAgICAgICAgICBDaGFpbkNvbnRyb2xsZXIuc2V0QWNjb3VudFByb3AoJ3ByZWZlcnJlZEFjY291bnRUeXBlJywgcHJlZmVycmVkQWNjb3VudFR5cGUsIGNoYWluKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRFSVA2OTYzRW5hYmxlZCA9IGVuYWJsZWQgPT4ge1xuICAgICAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0RUlQNjk2M0VuYWJsZWQoZW5hYmxlZCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlVW5zYWZlUlBDUmVxdWVzdCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgYXJlIG9uIHRoZSBtb2RhbCBidXQgdGhlcmUgaXMgbm8gdHJhbnNhY3Rpb24gc3RhY2ssIGNsb3NlIHRoZSBtb2RhbFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJhbnNhY3Rpb25TdGFja0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIHJlcGxhY2Ugb3IgcmVkaXJlY3RcbiAgICAgICAgICAgICAgICB0aGlzLnJlZGlyZWN0KCdBcHByb3ZlVHJhbnNhY3Rpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIGNhbGxlZCBmcm9tIG91dHNpZGUgdGhlIG1vZGFsLCBvcGVuIEFwcHJvdmVUcmFuc2FjdGlvblxuICAgICAgICAgICAgICAgIHRoaXMub3Blbih7IHZpZXc6ICdBcHByb3ZlVHJhbnNhY3Rpb24nIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBvcHRpb25zLnNka1ZlcnNpb247XG4gICAgICAgIHRoaXMuY2FpcE5ldHdvcmtzID0gdGhpcy5leHRlbmRDYWlwTmV0d29ya3Mob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuY2hhaW5OYW1lc3BhY2VzID0gdGhpcy5nZXRDaGFpbk5hbWVzcGFjZXNTZXQob3B0aW9ucy5hZGFwdGVycywgdGhpcy5jYWlwTmV0d29ya3MpO1xuICAgICAgICB0aGlzLmRlZmF1bHRDYWlwTmV0d29yayA9IHRoaXMuZXh0ZW5kRGVmYXVsdENhaXBOZXR3b3JrKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmNoYWluQWRhcHRlcnMgPSB0aGlzLmNyZWF0ZUFkYXB0ZXJzKG9wdGlvbnMuYWRhcHRlcnMpO1xuICAgICAgICB0aGlzLnJlYWR5UHJvbWlzZSA9IHRoaXMuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG4gICAgZ2V0Q2hhaW5OYW1lc3BhY2VzU2V0KGFkYXB0ZXJzLCBjYWlwTmV0d29ya3MpIHtcbiAgICAgICAgY29uc3QgYWRhcHRlck5hbWVzcGFjZXMgPSBhZGFwdGVyc1xuICAgICAgICAgICAgPy5tYXAoYWRhcHRlciA9PiBhZGFwdGVyLm5hbWVzcGFjZSlcbiAgICAgICAgICAgIC5maWx0ZXIoKG5hbWVzcGFjZSkgPT4gQm9vbGVhbihuYW1lc3BhY2UpKTtcbiAgICAgICAgaWYgKGFkYXB0ZXJOYW1lc3BhY2VzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4ubmV3IFNldChhZGFwdGVyTmFtZXNwYWNlcyldO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ldHdvcmtOYW1lc3BhY2VzID0gY2FpcE5ldHdvcmtzPy5tYXAobmV0d29yayA9PiBuZXR3b3JrLmNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KG5ldHdvcmtOYW1lc3BhY2VzKV07XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUob3B0aW9ucykge1xuICAgICAgICB0aGlzLmluaXRpYWxpemVQcm9qZWN0U2V0dGluZ3Mob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuaW5pdENvbnRyb2xsZXJzKG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRDaGFpbkFkYXB0ZXJzKCk7XG4gICAgICAgIHRoaXMuc2VuZEluaXRpYWxpemVFdmVudChvcHRpb25zKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZmVhdHVyZXM/LmhlYWRsZXNzICYmICFDb25uZWN0b3JVdGlsLmhhc0luamVjdGVkQ29ubmVjdG9ycygpKSB7XG4gICAgICAgICAgICBBcGlDb250cm9sbGVyLnByZWZldGNoKHtcbiAgICAgICAgICAgICAgICBmZXRjaE5ldHdvcmtJbWFnZXM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGZldGNoQ29ubmVjdG9ySW1hZ2VzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBmZXRjaFdhbGxldFJhbmtzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBmZXRjaFJlY29tbWVuZGVkV2FsbGV0czogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLmVuYWJsZVJlY29ubmVjdCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zeW5jRXhpc3RpbmdDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN5bmNBZGFwdGVyQ29ubmVjdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5TeW5jRXhpc3RpbmdDb25uZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25zLmJhc2ljICYmICFvcHRpb25zLm1hbnVhbFdDQ29udHJvbCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdGVGZWF0dXJlcyA9IGF3YWl0IENvbmZpZ1V0aWwuZmV0Y2hSZW1vdGVGZWF0dXJlcyhvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBBcGlDb250cm9sbGVyLmZldGNoVXNhZ2UoKTtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0UmVtb3RlRmVhdHVyZXModGhpcy5yZW1vdGVGZWF0dXJlcyk7XG4gICAgICAgIGlmICh0aGlzLnJlbW90ZUZlYXR1cmVzLm9ucmFtcCkge1xuICAgICAgICAgICAgT25SYW1wQ29udHJvbGxlci5zZXRPbnJhbXBQcm92aWRlcnModGhpcy5yZW1vdGVGZWF0dXJlcy5vbnJhbXApO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGFsbG93ZWQgb3JpZ2lucyBvbmx5IGlmIGVtYWlsIG9yIHNvY2lhbCBmZWF0dXJlcyBhcmUgZW5hYmxlZFxuICAgICAgICBpZiAoT3B0aW9uc0NvbnRyb2xsZXIuc3RhdGUucmVtb3RlRmVhdHVyZXM/LmVtYWlsIHx8XG4gICAgICAgICAgICAoQXJyYXkuaXNBcnJheShPcHRpb25zQ29udHJvbGxlci5zdGF0ZS5yZW1vdGVGZWF0dXJlcz8uc29jaWFscykgJiZcbiAgICAgICAgICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zdGF0ZS5yZW1vdGVGZWF0dXJlcz8uc29jaWFscy5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGVja0FsbG93ZWRPcmlnaW5zKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLmZlYXR1cmVzPy5yZW93bkF1dGhlbnRpY2F0aW9uIHx8XG4gICAgICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zdGF0ZS5yZW1vdGVGZWF0dXJlcz8ucmVvd25BdXRoZW50aWNhdGlvbikge1xuICAgICAgICAgICAgY29uc3QgeyBSZW93bkF1dGhlbnRpY2F0aW9uIH0gPSBhd2FpdCBpbXBvcnQoJ0ByZW93bi9hcHBraXQtY29udHJvbGxlcnMvZmVhdHVyZXMnKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTSVdYID0gT3B0aW9uc0NvbnRyb2xsZXIuc3RhdGUuc2l3eDtcbiAgICAgICAgICAgIGlmICghKGN1cnJlbnRTSVdYIGluc3RhbmNlb2YgUmVvd25BdXRoZW50aWNhdGlvbikpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNJV1gpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdSZW93bkF1dGhlbnRpY2F0aW9uIG9wdGlvbiBpcyBlbmFibGVkLCBTSVdYIGNvbmZpZ3VyYXRpb24gd2lsbCBiZSBvdmVycmlkZGVuLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRTSVdYKG5ldyBSZW93bkF1dGhlbnRpY2F0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgc2l3eCBpcyBhbHJlYWR5IGNvbmZpZ3VyZWQgZm9yIFJlb3duQXV0aGVudGljYXRpb24gd2Uga2VlcCB0aGUgY3VycmVudCBpbnN0YW5jZVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9wZW5TZW5kKGFyZ3MpIHtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlVG9Vc2UgPSBhcmdzLm5hbWVzcGFjZSB8fCBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW47XG4gICAgICAgIGNvbnN0IGNhaXBBZGRyZXNzID0gdGhpcy5nZXRDYWlwQWRkcmVzcyhuYW1lc3BhY2VUb1VzZSk7XG4gICAgICAgIGNvbnN0IGNoYWluSWQgPSB0aGlzLmdldENhaXBOZXR3b3JrKG5hbWVzcGFjZVRvVXNlKT8uaWQ7XG4gICAgICAgIGlmICghY2FpcEFkZHJlc3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignb3BlblNlbmQ6IGNhaXBBZGRyZXNzIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFpbklkPy50b1N0cmluZygpICE9PSBhcmdzLmNoYWluSWQudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgY29uc3QgY2FpcE5ldHdvcmsgPSBDaGFpbkNvbnRyb2xsZXIuZ2V0Q2FpcE5ldHdvcmtCeUlkKGFyZ3MuY2hhaW5JZCwgbmFtZXNwYWNlVG9Vc2UpO1xuICAgICAgICAgICAgaWYgKCFjYWlwTmV0d29yaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb3BlblNlbmQ6IGNhaXBOZXR3b3JrIHdpdGggY2hhaW5JZCAke2FyZ3MuY2hhaW5JZH0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN3aXRjaE5ldHdvcmsoY2FpcE5ldHdvcmssIHsgdGhyb3dPbkZhaWx1cmU6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN5bWJvbCA9IFRva2VuVXRpbC5nZXRUb2tlblN5bWJvbEJ5QWRkcmVzcyhhcmdzLmFzc2V0QWRkcmVzcyk7XG4gICAgICAgICAgICBpZiAoc3ltYm9sKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgQXBpQ29udHJvbGxlci5mZXRjaFRva2VuSW1hZ2VzKFtzeW1ib2xdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAvKiBJZ25vcmUgKi9cbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBNb2RhbENvbnRyb2xsZXIub3Blbih7XG4gICAgICAgICAgICB2aWV3OiAnV2FsbGV0U2VuZCcsXG4gICAgICAgICAgICBkYXRhOiB7IHNlbmQ6IGFyZ3MgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gU2VuZENvbnRyb2xsZXIuc3Vic2NyaWJlS2V5KCdoYXNoJywgaGFzaCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgaGFzaCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlTW9kYWwgPSBNb2RhbENvbnRyb2xsZXIuc3Vic2NyaWJlKG1vZGFsID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIW1vZGFsLm9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdNb2RhbCBjbG9zZWQnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjbGVhbnVwID0gdGhpcy5jcmVhdGVDbGVhbnVwSGFuZGxlcihbdW5zdWJzY3JpYmUsIHVuc3Vic2NyaWJlTW9kYWxdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvTW9kYWxPcHRpb25zKCkge1xuICAgICAgICBmdW5jdGlvbiBpc1N3YXAob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM/LnZpZXcgPT09ICdTd2FwJztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBpc1NlbmQob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM/LnZpZXcgPT09ICdXYWxsZXRTZW5kJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNTd2FwLFxuICAgICAgICAgICAgaXNTZW5kXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGNoZWNrQWxsb3dlZE9yaWdpbnMoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhbGxvd2VkT3JpZ2lucyA9IGF3YWl0IEFwaUNvbnRyb2xsZXIuZmV0Y2hBbGxvd2VkT3JpZ2lucygpO1xuICAgICAgICAgICAgaWYgKCFDb3JlSGVscGVyVXRpbC5pc0NsaWVudCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY3VycmVudE9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgICAgICAgICBjb25zdCBpc09yaWdpbkFsbG93ZWQgPSBXY0hlbHBlcnNVdGlsLmlzT3JpZ2luQWxsb3dlZChjdXJyZW50T3JpZ2luLCBhbGxvd2VkT3JpZ2lucywgQ29uc3RhbnRzVXRpbC5ERUZBVUxUX0FMTE9XRURfQU5DRVNUT1JTKTtcbiAgICAgICAgICAgIGlmICghaXNPcmlnaW5BbGxvd2VkKSB7XG4gICAgICAgICAgICAgICAgQWxlcnRDb250cm9sbGVyLm9wZW4oRXJyb3JVdGlsLkFMRVJUX0VSUk9SUy5PUklHSU5fTk9UX0FMTE9XRUQsICdlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdSQVRFX0xJTUlURUQnOlxuICAgICAgICAgICAgICAgICAgICBBbGVydENvbnRyb2xsZXIub3BlbihFcnJvclV0aWwuQUxFUlRfRVJST1JTLlJBVEVfTElNSVRFRF9BUFBfQ09ORklHVVJBVElPTiwgJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1NFUlZFUl9FUlJPUic6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxFcnJvciA9IGVycm9yLmNhdXNlIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5jYXVzZSA6IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBBbGVydENvbnRyb2xsZXIub3Blbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TWVzc2FnZTogRXJyb3JVdGlsLkFMRVJUX0VSUk9SUy5TRVJWRVJfRVJST1JfQVBQX0NPTkZJR1VSQVRJT04uZGlzcGxheU1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z01lc3NhZ2U6IEVycm9yVXRpbC5BTEVSVF9FUlJPUlMuU0VSVkVSX0VSUk9SX0FQUF9DT05GSUdVUkFUSU9OLmRlYnVnTWVzc2FnZShvcmlnaW5hbEVycm9yLm1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgIH0sICdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlQ2xlYW51cEhhbmRsZXIodW5zdWJzY3JpYmVGdW5jdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlRnVuY3Rpb25zLmZvckVhY2godW5zdWJzY3JpYmUgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGNsZWFudXAgZXJyb3JzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHNlbmRJbml0aWFsaXplRXZlbnQob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IC4uLm9wdGlvbnNDb3B5IH0gPSBvcHRpb25zO1xuICAgICAgICBkZWxldGUgb3B0aW9uc0NvcHkuYWRhcHRlcnM7XG4gICAgICAgIGRlbGV0ZSBvcHRpb25zQ29weS51bml2ZXJzYWxQcm92aWRlcjtcbiAgICAgICAgRXZlbnRzQ29udHJvbGxlci5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3RyYWNrJyxcbiAgICAgICAgICAgIGV2ZW50OiAnSU5JVElBTElaRScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9uc0NvcHksXG4gICAgICAgICAgICAgICAgbmV0d29ya3M6IG9wdGlvbnMubmV0d29ya3MubWFwKG4gPT4gbi5pZCksXG4gICAgICAgICAgICAgICAgc2l3ZUNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLnNpd2VDb25maWc/Lm9wdGlvbnMgfHwge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyAtLSBDb250cm9sbGVycyBpbml0aWFsaXphdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBpbml0Q29udHJvbGxlcnMob3B0aW9ucykge1xuICAgICAgICB0aGlzLmluaXRpYWxpemVPcHRpb25zQ29udHJvbGxlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplQ2hhaW5Db250cm9sbGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVUaGVtZUNvbnRyb2xsZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbm5lY3Rpb25Db250cm9sbGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVDb25uZWN0b3JDb250cm9sbGVyKCk7XG4gICAgfVxuICAgIGluaXRBZGFwdGVyQ29udHJvbGxlcigpIHtcbiAgICAgICAgQWRhcHRlckNvbnRyb2xsZXIuaW5pdGlhbGl6ZSh0aGlzLmNoYWluQWRhcHRlcnMpO1xuICAgIH1cbiAgICBpbml0aWFsaXplVGhlbWVDb250cm9sbGVyKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMudGhlbWVNb2RlKSB7XG4gICAgICAgICAgICBUaGVtZUNvbnRyb2xsZXIuc2V0VGhlbWVNb2RlKG9wdGlvbnMudGhlbWVNb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50aGVtZVZhcmlhYmxlcykge1xuICAgICAgICAgICAgVGhlbWVDb250cm9sbGVyLnNldFRoZW1lVmFyaWFibGVzKG9wdGlvbnMudGhlbWVWYXJpYWJsZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaXRpYWxpemVDaGFpbkNvbnRyb2xsZXIob3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuY29ubmVjdGlvbkNvbnRyb2xsZXJDbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29ubmVjdGlvbkNvbnRyb2xsZXJDbGllbnQgbXVzdCBiZSBzZXQnKTtcbiAgICAgICAgfVxuICAgICAgICBDaGFpbkNvbnRyb2xsZXIuaW5pdGlhbGl6ZShvcHRpb25zLmFkYXB0ZXJzID8/IFtdLCB0aGlzLmNhaXBOZXR3b3Jrcywge1xuICAgICAgICAgICAgY29ubmVjdGlvbkNvbnRyb2xsZXJDbGllbnQ6IHRoaXMuY29ubmVjdGlvbkNvbnRyb2xsZXJDbGllbnRcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG5ldHdvcmsgPSB0aGlzLmdldERlZmF1bHROZXR3b3JrKCk7XG4gICAgICAgIGlmIChuZXR3b3JrKSB7XG4gICAgICAgICAgICBDaGFpbkNvbnRyb2xsZXIuc2V0QWN0aXZlQ2FpcE5ldHdvcmsobmV0d29yayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdGlhbGl6ZUNvbm5lY3Rpb25Db250cm9sbGVyKG9wdGlvbnMpIHtcbiAgICAgICAgQ29ubmVjdGlvbkNvbnRyb2xsZXIuaW5pdGlhbGl6ZShvcHRpb25zLmFkYXB0ZXJzID8/IFtdKTtcbiAgICAgICAgQ29ubmVjdGlvbkNvbnRyb2xsZXIuc2V0V2NCYXNpYyhvcHRpb25zLmJhc2ljID8/IGZhbHNlKTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZUNvbm5lY3RvckNvbnRyb2xsZXIoKSB7XG4gICAgICAgIENvbm5lY3RvckNvbnRyb2xsZXIuaW5pdGlhbGl6ZSh0aGlzLmNoYWluTmFtZXNwYWNlcyk7XG4gICAgfVxuICAgIGluaXRpYWxpemVQcm9qZWN0U2V0dGluZ3Mob3B0aW9ucykge1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRQcm9qZWN0SWQob3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRTZGtWZXJzaW9uKG9wdGlvbnMuc2RrVmVyc2lvbik7XG4gICAgfVxuICAgIGluaXRpYWxpemVPcHRpb25zQ29udHJvbGxlcihvcHRpb25zKSB7XG4gICAgICAgIE9wdGlvbnNDb250cm9sbGVyLnNldERlYnVnKG9wdGlvbnMuZGVidWcgIT09IGZhbHNlKTtcbiAgICAgICAgLy8gT24gYnkgZGVmYXVsdFxuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRFbmFibGVXYWxsZXRHdWlkZShvcHRpb25zLmVuYWJsZVdhbGxldEd1aWRlICE9PSBmYWxzZSk7XG4gICAgICAgIE9wdGlvbnNDb250cm9sbGVyLnNldEVuYWJsZVdhbGxldHMob3B0aW9ucy5lbmFibGVXYWxsZXRzICE9PSBmYWxzZSk7XG4gICAgICAgIE9wdGlvbnNDb250cm9sbGVyLnNldEVJUDY5NjNFbmFibGVkKG9wdGlvbnMuZW5hYmxlRUlQNjk2MyAhPT0gZmFsc2UpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRFbmFibGVOZXR3b3JrU3dpdGNoKG9wdGlvbnMuZW5hYmxlTmV0d29ya1N3aXRjaCAhPT0gZmFsc2UpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRFbmFibGVSZWNvbm5lY3Qob3B0aW9ucy5lbmFibGVSZWNvbm5lY3QgIT09IGZhbHNlKTtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0RW5hYmxlTW9iaWxlRnVsbFNjcmVlbihvcHRpb25zLmVuYWJsZU1vYmlsZUZ1bGxTY3JlZW4gPT09IHRydWUpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRDb2luYmFzZVByZWZlcmVuY2Uob3B0aW9ucy5jb2luYmFzZVByZWZlcmVuY2UpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRFbmFibGVBdXRoTG9nZ2VyKG9wdGlvbnMuZW5hYmxlQXV0aExvZ2dlciAhPT0gZmFsc2UpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRDdXN0b21ScGNVcmxzKG9wdGlvbnMuY3VzdG9tUnBjVXJscyk7XG4gICAgICAgIE9wdGlvbnNDb250cm9sbGVyLnNldEVuYWJsZUVtYmVkZGVkKG9wdGlvbnMuZW5hYmxlRW1iZWRkZWQpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRBbGxXYWxsZXRzKG9wdGlvbnMuYWxsV2FsbGV0cyk7XG4gICAgICAgIE9wdGlvbnNDb250cm9sbGVyLnNldEluY2x1ZGVXYWxsZXRJZHMob3B0aW9ucy5pbmNsdWRlV2FsbGV0SWRzKTtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0RXhjbHVkZVdhbGxldElkcyhvcHRpb25zLmV4Y2x1ZGVXYWxsZXRJZHMpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRGZWF0dXJlZFdhbGxldElkcyhvcHRpb25zLmZlYXR1cmVkV2FsbGV0SWRzKTtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0VG9rZW5zKG9wdGlvbnMudG9rZW5zKTtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0VGVybXNDb25kaXRpb25zVXJsKG9wdGlvbnMudGVybXNDb25kaXRpb25zVXJsKTtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0UHJpdmFjeVBvbGljeVVybChvcHRpb25zLnByaXZhY3lQb2xpY3lVcmwpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRDdXN0b21XYWxsZXRzKG9wdGlvbnMuY3VzdG9tV2FsbGV0cyk7XG4gICAgICAgIE9wdGlvbnNDb250cm9sbGVyLnNldEZlYXR1cmVzKG9wdGlvbnMuZmVhdHVyZXMpO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRBbGxvd1Vuc3VwcG9ydGVkQ2hhaW4ob3B0aW9ucy5hbGxvd1Vuc3VwcG9ydGVkQ2hhaW4pO1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRVbml2ZXJzYWxQcm92aWRlckNvbmZpZ092ZXJyaWRlKG9wdGlvbnMudW5pdmVyc2FsUHJvdmlkZXJDb25maWdPdmVycmlkZSk7XG4gICAgICAgIE9wdGlvbnNDb250cm9sbGVyLnNldFByZWZlclVuaXZlcnNhbExpbmtzKG9wdGlvbnMuZXhwZXJpbWVudGFsX3ByZWZlclVuaXZlcnNhbExpbmtzKTtcbiAgICAgICAgLy8gU2F2ZSBvcHRpb24gaW4gY29udHJvbGxlclxuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXREZWZhdWx0QWNjb3VudFR5cGVzKG9wdGlvbnMuZGVmYXVsdEFjY291bnRUeXBlcyk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRNZXRhRGF0YSA9IHRoaXMuZ2V0RGVmYXVsdE1ldGFEYXRhKCk7XG4gICAgICAgIGlmICghb3B0aW9ucy5tZXRhZGF0YSAmJiBkZWZhdWx0TWV0YURhdGEpIHtcbiAgICAgICAgICAgIG9wdGlvbnMubWV0YWRhdGEgPSBkZWZhdWx0TWV0YURhdGE7XG4gICAgICAgIH1cbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0TWV0YWRhdGEob3B0aW9ucy5tZXRhZGF0YSk7XG4gICAgICAgIE9wdGlvbnNDb250cm9sbGVyLnNldERpc2FibGVBcHBlbmQob3B0aW9ucy5kaXNhYmxlQXBwZW5kKTtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0RW5hYmxlRW1iZWRkZWQob3B0aW9ucy5lbmFibGVFbWJlZGRlZCk7XG4gICAgICAgIE9wdGlvbnNDb250cm9sbGVyLnNldFNJV1gob3B0aW9ucy5zaXd4KTtcbiAgICAgICAgdGhpcy5mZWF0dXJlcyA9IE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLmZlYXR1cmVzID8/IHt9O1xuICAgICAgICBpZiAoIW9wdGlvbnMucHJvamVjdElkKSB7XG4gICAgICAgICAgICBBbGVydENvbnRyb2xsZXIub3BlbihFcnJvclV0aWwuQUxFUlRfRVJST1JTLlBST0pFQ1RfSURfTk9UX0NPTkZJR1VSRUQsICdlcnJvcicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2bUFkYXB0ZXIgPSBvcHRpb25zLmFkYXB0ZXJzPy5maW5kKGFkYXB0ZXIgPT4gYWRhcHRlci5uYW1lc3BhY2UgPT09IENvbnN0YW50c1V0aWwuQ0hBSU4uRVZNKTtcbiAgICAgICAgLy8gU2V0IHRoZSBTSVdFIGNsaWVudCBmb3IgRVZNIGNoYWluc1xuICAgICAgICBpZiAoZXZtQWRhcHRlcikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2l3ZUNvbmZpZykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNpd3gpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc2V0IGJvdGggYHNpd2VDb25maWdgIGFuZCBgc2l3eGAgb3B0aW9ucycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRTSVdYKG9wdGlvbnMuc2l3ZUNvbmZpZy5tYXBUb1NJV1goKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0RGVmYXVsdE1ldGFEYXRhKCkge1xuICAgICAgICBpZiAoQ29yZUhlbHBlclV0aWwuaXNDbGllbnQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGl0bGUnKT8uWzBdPy50ZXh0Q29udGVudCB8fCAnJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtwcm9wZXJ0eT1cIm9nOmRlc2NyaXB0aW9uXCJdJyk/LmNvbnRlbnQgfHwgJycsXG4gICAgICAgICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgICAgIGljb25zOiBbZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbGlua1tyZWx+PVwiaWNvblwiXScpPy5ocmVmIHx8ICcnXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gLS0gTmV0d29yayBJbml0aWFsaXphdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBzZXRVbnN1cHBvcnRlZE5ldHdvcmsoY2hhaW5JZCkge1xuICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSB0aGlzLmdldEFjdGl2ZUNoYWluTmFtZXNwYWNlKCk7XG4gICAgICAgIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHVuc3VwcG9ydGVkTmV0d29yayA9IENhaXBOZXR3b3Jrc1V0aWwuZ2V0VW5zdXBwb3J0ZWROZXR3b3JrKGAke25hbWVzcGFjZX06JHtjaGFpbklkfWApO1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnNldEFjdGl2ZUNhaXBOZXR3b3JrKHVuc3VwcG9ydGVkTmV0d29yayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0RGVmYXVsdE5ldHdvcmsoKSB7XG4gICAgICAgIHJldHVybiBDYWlwTmV0d29ya3NVdGlsLmdldENhaXBOZXR3b3JrRnJvbVN0b3JhZ2UodGhpcy5kZWZhdWx0Q2FpcE5ldHdvcmspO1xuICAgIH1cbiAgICBleHRlbmRDYWlwTmV0d29yayhuZXR3b3JrLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGV4dGVuZGVkTmV0d29yayA9IENhaXBOZXR3b3Jrc1V0aWwuZXh0ZW5kQ2FpcE5ldHdvcmsobmV0d29yaywge1xuICAgICAgICAgICAgY3VzdG9tTmV0d29ya0ltYWdlVXJsczogb3B0aW9ucy5jaGFpbkltYWdlcyxcbiAgICAgICAgICAgIHByb2plY3RJZDogb3B0aW9ucy5wcm9qZWN0SWRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBleHRlbmRlZE5ldHdvcms7XG4gICAgfVxuICAgIGV4dGVuZENhaXBOZXR3b3JrcyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGV4dGVuZGVkTmV0d29ya3MgPSBDYWlwTmV0d29ya3NVdGlsLmV4dGVuZENhaXBOZXR3b3JrcyhvcHRpb25zLm5ldHdvcmtzLCB7XG4gICAgICAgICAgICBjdXN0b21OZXR3b3JrSW1hZ2VVcmxzOiBvcHRpb25zLmNoYWluSW1hZ2VzLFxuICAgICAgICAgICAgY3VzdG9tUnBjVXJsczogb3B0aW9ucy5jdXN0b21ScGNVcmxzLFxuICAgICAgICAgICAgcHJvamVjdElkOiBvcHRpb25zLnByb2plY3RJZFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZGVkTmV0d29ya3M7XG4gICAgfVxuICAgIGV4dGVuZERlZmF1bHRDYWlwTmV0d29yayhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHROZXR3b3JrID0gb3B0aW9ucy5uZXR3b3Jrcy5maW5kKG4gPT4gbi5pZCA9PT0gb3B0aW9ucy5kZWZhdWx0TmV0d29yaz8uaWQpO1xuICAgICAgICBjb25zdCBleHRlbmRlZE5ldHdvcmsgPSBkZWZhdWx0TmV0d29ya1xuICAgICAgICAgICAgPyBDYWlwTmV0d29ya3NVdGlsLmV4dGVuZENhaXBOZXR3b3JrKGRlZmF1bHROZXR3b3JrLCB7XG4gICAgICAgICAgICAgICAgY3VzdG9tTmV0d29ya0ltYWdlVXJsczogb3B0aW9ucy5jaGFpbkltYWdlcyxcbiAgICAgICAgICAgICAgICBjdXN0b21ScGNVcmxzOiBvcHRpb25zLmN1c3RvbVJwY1VybHMsXG4gICAgICAgICAgICAgICAgcHJvamVjdElkOiBvcHRpb25zLnByb2plY3RJZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gZXh0ZW5kZWROZXR3b3JrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNjb25uZWN0cyBhIGNvbm5lY3RvciB3aXRoIHRoZSBnaXZlbiBuYW1lc3BhY2UgYW5kIGlkLiBJZiB0aGUgY29ubmVjdG9yIGlkIGlzIG5vdCBwcm92aWRlZCwgZGlzY29ubmVjdHMgdGhlIGFkYXB0ZXIgKG5hbWVzcGFjZSkuXG4gICAgICogQHBhcmFtIG5hbWVzcGFjZSBDaGFpbk5hbWVzcGFjZVxuICAgICAqIEBwYXJhbSBpZCBzdHJpbmdcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIGRpc2Nvbm5lY3RDb25uZWN0b3IobmFtZXNwYWNlLCBpZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zZXRMb2FkaW5nKHRydWUsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgICBsZXQgZGlzY29ubmVjdFJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uczogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICBjb25zdCBjYWlwQWRkcmVzcyA9IENoYWluQ29udHJvbGxlci5zdGF0ZS5jaGFpbnMuZ2V0KG5hbWVzcGFjZSk/LmFjY291bnRTdGF0ZT8uY2FpcEFkZHJlc3M7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFdoZW4gdGhlIHBhZ2UgbG9hZGVkLCB0aGUgY29udHJvbGxlciBkb2Vzbid0IGhhdmUgYWRkcmVzcyB5ZXQuXG4gICAgICAgICAgICAgKiBUbyBkaXNjb25uZWN0LCB3ZSBhcmUgY2hlY2tpbmcgZW5hYmxlUmVjb25uZWN0IGZsYWcgdG8gZGlzY29ubmVjdCB0aGUgbmFtZXNwYWNlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoKGNhaXBBZGRyZXNzIHx8ICFPcHRpb25zQ29udHJvbGxlci5zdGF0ZS5lbmFibGVSZWNvbm5lY3QpICYmIGFkYXB0ZXI/LmRpc2Nvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICBkaXNjb25uZWN0UmVzdWx0ID0gYXdhaXQgYWRhcHRlci5kaXNjb25uZWN0KHsgaWQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldExvYWRpbmcoZmFsc2UsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgICByZXR1cm4gZGlzY29ubmVjdFJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZyhmYWxzZSwgbmFtZXNwYWNlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRpc2Nvbm5lY3QgY2hhaW5zOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gLS0gQ2xpZW50IEluaXRpYWxpemF0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGNyZWF0ZUNsaWVudHMoKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkNvbnRyb2xsZXJDbGllbnQgPSB7XG4gICAgICAgICAgICBjb25uZWN0V2FsbGV0Q29ubmVjdDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUNoYWluID0gQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmdldEFkYXB0ZXIoYWN0aXZlQ2hhaW4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYWluSWQgPSB0aGlzLmdldENhaXBOZXR3b3JrKGFjdGl2ZUNoYWluKT8uaWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSBDb25uZWN0aW9uQ29udHJvbGxlci5nZXRDb25uZWN0aW9ucyhhY3RpdmVDaGFpbik7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNNdWx0aVdhbGxldCA9IHRoaXMucmVtb3RlRmVhdHVyZXMubXVsdGlXYWxsZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzQ29ubmVjdGlvbnMgPSBjb25uZWN0aW9ucy5sZW5ndGggPiAwO1xuICAgICAgICAgICAgICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FkYXB0ZXIgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkYXB0ZXIuY29ubmVjdFdhbGxldENvbm5lY3QoY2hhaW5JZCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkQ2xvc2UgPSAhaGFzQ29ubmVjdGlvbnMgfHwgIWlzTXVsdGlXYWxsZXQ7XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZENsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDbGllbnRJZChyZXN1bHQ/LmNsaWVudElkIHx8IG51bGwpO1xuICAgICAgICAgICAgICAgIFN0b3JhZ2VVdGlsLnNldENvbm5lY3RlZE5hbWVzcGFjZXMoWy4uLkNoYWluQ29udHJvbGxlci5zdGF0ZS5jaGFpbnMua2V5cygpXSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zeW5jV2FsbGV0Q29ubmVjdEFjY291bnQoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBTSVdYVXRpbC5pbml0aWFsaXplSWZFbmFibGVkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29ubmVjdEV4dGVybmFsOiBhc3luYyAocGFyYW1zKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdFJlc3VsdCA9IGF3YWl0IHRoaXMub25Db25uZWN0RXh0ZXJuYWwocGFyYW1zKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3RJbmFjdGl2ZU5hbWVzcGFjZXMocGFyYW1zLCBjb25uZWN0UmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdFJlc3VsdCA/IHsgYWRkcmVzczogY29ubmVjdFJlc3VsdC5hZGRyZXNzIH0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVjb25uZWN0RXh0ZXJuYWw6IGFzeW5jICh7IGlkLCBpbmZvLCB0eXBlLCBwcm92aWRlciB9KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZXNwYWNlID0gQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmdldEFkYXB0ZXIobmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlY29ubmVjdEV4dGVybmFsOiBuYW1lc3BhY2Ugbm90IGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlY29ubmVjdEV4dGVybmFsOiBhZGFwdGVyIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYWRhcHRlcj8ucmVjb25uZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFkYXB0ZXI/LnJlY29ubmVjdCh7IGlkLCBpbmZvLCB0eXBlLCBwcm92aWRlciwgY2hhaW5JZDogdGhpcy5nZXRDYWlwTmV0d29yaygpPy5pZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmFnZVV0aWwuYWRkQ29ubmVjdGVkTmFtZXNwYWNlKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0Nvbm5lY3RlZFdhbGxldEluZm8obmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlzY29ubmVjdENvbm5lY3RvcjogYXN5bmMgKHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGlzY29ubmVjdENvbm5lY3RvcihwYXJhbXMubmFtZXNwYWNlLCBwYXJhbXMuaWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpc2Nvbm5lY3Q6IGFzeW5jIChwYXJhbXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGlkOiBjb25uZWN0b3JJZFBhcmFtLCBjaGFpbk5hbWVzcGFjZSwgaW5pdGlhbERpc2Nvbm5lY3QgfSA9IHBhcmFtcyB8fCB7fTtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSBjaGFpbk5hbWVzcGFjZSB8fCBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW47XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZXNwYWNlQ29ubmVjdG9ySWQgPSBDb25uZWN0b3JDb250cm9sbGVyLmdldENvbm5lY3RvcklkKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBdXRoID0gY29ubmVjdG9ySWRQYXJhbSA9PT0gQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfSUQuQVVUSCB8fFxuICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VDb25uZWN0b3JJZCA9PT0gQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfSUQuQVVUSDtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1dhbGxldENvbm5lY3QgPSBjb25uZWN0b3JJZFBhcmFtID09PSBDb25zdGFudHNVdGlsLkNPTk5FQ1RPUl9JRC5XQUxMRVRfQ09OTkVDVCB8fFxuICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VDb25uZWN0b3JJZCA9PT0gQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfSUQuV0FMTEVUX0NPTk5FQ1Q7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZXNwYWNlcyA9IEFycmF5LmZyb20oQ2hhaW5Db250cm9sbGVyLnN0YXRlLmNoYWlucy5rZXlzKCkpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZXNwYWNlc1RvRGlzY29ubmVjdCA9IGNoYWluTmFtZXNwYWNlID8gW2NoYWluTmFtZXNwYWNlXSA6IG5hbWVzcGFjZXM7XG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAqIElmIHRoZSBjb25uZWN0b3IgaXMgV2FsbGV0Q29ubmVjdCBvciBBdXRoLCBkaXNjb25uZWN0IGFsbCBuYW1lc3BhY2VzXG4gICAgICAgICAgICAgICAgICAgICAqIHNpbmNlIHRoZXkgc2hhcmUgYSBzaW5nbGUgY29ubmVjdG9yIGluc3RhbmNlIGFjcm9zcyBhbGwgYWRhcHRlcnNcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1dhbGxldENvbm5lY3QgfHwgaXNBdXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VzVG9EaXNjb25uZWN0ID0gbmFtZXNwYWNlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNjb25uZWN0UHJvbWlzZXMgPSBuYW1lc3BhY2VzVG9EaXNjb25uZWN0Lm1hcChhc3luYyAobnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb25uZWN0b3JJZCA9IENvbm5lY3RvckNvbnRyb2xsZXIuZ2V0Q29ubmVjdG9ySWQobnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdG9ySWRUb0Rpc2Nvbm5lY3QgPSBjb25uZWN0b3JJZFBhcmFtIHx8IGN1cnJlbnRDb25uZWN0b3JJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc2Nvbm5lY3REYXRhID0gYXdhaXQgdGhpcy5kaXNjb25uZWN0Q29ubmVjdG9yKG5zLCBjb25uZWN0b3JJZFRvRGlzY29ubmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzY29ubmVjdERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBdXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JhZ2VVdGlsLmRlbGV0ZUNvbm5lY3RlZFNvY2lhbFByb3ZpZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3REYXRhLmNvbm5lY3Rpb25zLmZvckVhY2goY29ubmVjdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JhZ2VVdGlsLmFkZERpc2Nvbm5lY3RlZENvbm5lY3RvcklkKGNvbm5lY3Rpb24uY29ubmVjdG9ySWQsIG5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsRGlzY29ubmVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0TmFtZXNwYWNlKHsgY2hhaW5OYW1lc3BhY2U6IG5zLCBjbG9zZU1vZGFsOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc2Nvbm5lY3RSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGRpc2Nvbm5lY3RQcm9taXNlcyk7XG4gICAgICAgICAgICAgICAgICAgIFNlbmRDb250cm9sbGVyLnJlc2V0U2VuZCgpO1xuICAgICAgICAgICAgICAgICAgICBDb25uZWN0aW9uQ29udHJvbGxlci5yZXNldFdjQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoU0lXWFV0aWwuZ2V0U0lXWCgpPy5zaWduT3V0T25EaXNjb25uZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBTSVdYVXRpbC5jbGVhclNlc3Npb25zKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgQ29ubmVjdG9yQ29udHJvbGxlci5zZXRGaWx0ZXJCeU5hbWVzcGFjZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICBDb25uZWN0aW9uQ29udHJvbGxlci5zeW5jU3RvcmFnZUNvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhaWx1cmVzID0gZGlzY29ubmVjdFJlc3VsdHMuZmlsdGVyKChyZXN1bHQpID0+IHJlc3VsdC5zdGF0dXMgPT09ICdyZWplY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZhaWx1cmVzLm1hcChmID0+IGYucmVhc29uLm1lc3NhZ2UpLmpvaW4oJywgJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0cmFjaycsXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ0RJU0NPTk5FQ1RfU1VDQ0VTUycsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBjaGFpbk5hbWVzcGFjZSB8fCAnYWxsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRpc2Nvbm5lY3QgY2hhaW5zOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoZWNrSW5zdGFsbGVkOiAoaWRzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4od2luZG93LmV0aGVyZXVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkcy5zb21lKGlkID0+IEJvb2xlYW4od2luZG93LmV0aGVyZXVtPy5bU3RyaW5nKGlkKV0pKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzaWduTWVzc2FnZTogYXN5bmMgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW47XG4gICAgICAgICAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0QWRhcHRlcihDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW4pO1xuICAgICAgICAgICAgICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc2lnbk1lc3NhZ2U6IG5hbWVzcGFjZSBub3QgZm91bmQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFhZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc2lnbk1lc3NhZ2U6IGFkYXB0ZXIgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLmdldEFkZHJlc3MobmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaWduTWVzc2FnZTogYWRkcmVzcyBub3QgZm91bmQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRhcHRlcj8uc2lnbk1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlcjogUHJvdmlkZXJDb250cm9sbGVyLmdldFByb3ZpZGVyKG5hbWVzcGFjZSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Py5zaWduYXR1cmUgfHwgJyc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VuZFRyYW5zYWN0aW9uOiBhc3luYyAoYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IGFyZ3MuY2hhaW5OYW1lc3BhY2U7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW1lc3BhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZW5kVHJhbnNhY3Rpb246IG5hbWVzcGFjZSBub3QgZm91bmQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKENvcmVDb25zdGFudHNVdGlsLlNFTkRfU1VQUE9SVEVEX05BTUVTUEFDRVMuaW5jbHVkZXMobmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZW5kVHJhbnNhY3Rpb246IGFkYXB0ZXIgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBQcm92aWRlckNvbnRyb2xsZXIuZ2V0UHJvdmlkZXIobmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRhcHRlcj8uc2VuZFRyYW5zYWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWlwTmV0d29yazogdGhpcy5nZXRDYWlwTmV0d29yaygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ/Lmhhc2ggfHwgJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlc3RpbWF0ZUdhczogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSBhcmdzLmNoYWluTmFtZXNwYWNlO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lc3BhY2UgPT09IENvbnN0YW50c1V0aWwuQ0hBSU4uRVZNKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmdldEFkYXB0ZXIobmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VzdGltYXRlR2FzOiBhZGFwdGVyIGlzIHJlcXVpcmVkIGJ1dCBnb3QgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBQcm92aWRlckNvbnRyb2xsZXIuZ2V0UHJvdmlkZXIobmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FpcE5ldHdvcmsgPSB0aGlzLmdldENhaXBOZXR3b3JrKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FpcE5ldHdvcmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXN0aW1hdGVHYXM6IGNhaXBOZXR3b3JrIGlzIHJlcXVpcmVkIGJ1dCBnb3QgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRhcHRlcj8uZXN0aW1hdGVHYXMoeyAuLi5hcmdzLCBwcm92aWRlciwgY2FpcE5ldHdvcmsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ/LmdhcyB8fCAwbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDBuO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEVuc0F2YXRhcjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbjtcbiAgICAgICAgICAgICAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldEVuc0F2YXRhcjogbmFtZXNwYWNlIGlzIHJlcXVpcmVkIGJ1dCBnb3QgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLmdldEFkZHJlc3MobmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdnZXRFbnNBdmF0YXI6IGFkZHJlc3Mgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3luY0lkZW50aXR5KHtcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogTnVtYmVyKHRoaXMuZ2V0Q2FpcE5ldHdvcmsoKT8uaWQpLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbk5hbWVzcGFjZTogbmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudERhdGEgPSBDaGFpbkNvbnRyb2xsZXIuZ2V0QWNjb3VudERhdGEoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjb3VudERhdGE/LnByb2ZpbGVJbWFnZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRFbnNBZGRyZXNzOiBhc3luYyAobmFtZSkgPT4gYXdhaXQgV2NIZWxwZXJzVXRpbC5yZXNvbHZlUmVvd25OYW1lKG5hbWUpLFxuICAgICAgICAgICAgd3JpdGVDb250cmFjdDogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW47XG4gICAgICAgICAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0QWRhcHRlcihuYW1lc3BhY2UpO1xuICAgICAgICAgICAgICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignd3JpdGVDb250cmFjdDogbmFtZXNwYWNlIGlzIHJlcXVpcmVkIGJ1dCBnb3QgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyaXRlQ29udHJhY3Q6IGFkYXB0ZXIgaXMgcmVxdWlyZWQgYnV0IGdvdCB1bmRlZmluZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY2FpcE5ldHdvcmsgPSB0aGlzLmdldENhaXBOZXR3b3JrKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FpcEFkZHJlc3MgPSB0aGlzLmdldENhaXBBZGRyZXNzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBQcm92aWRlckNvbnRyb2xsZXIuZ2V0UHJvdmlkZXIobmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNhaXBOZXR3b3JrIHx8ICFjYWlwQWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyaXRlQ29udHJhY3Q6IGNhaXBOZXR3b3JrIG9yIGNhaXBBZGRyZXNzIGlzIHJlcXVpcmVkIGJ1dCBnb3QgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkYXB0ZXI/LndyaXRlQ29udHJhY3QoeyAuLi5hcmdzLCBjYWlwTmV0d29yaywgcHJvdmlkZXIsIGNhaXBBZGRyZXNzIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ/Lmhhc2g7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd3JpdGVTb2xhbmFUcmFuc2FjdGlvbjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW47XG4gICAgICAgICAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0QWRhcHRlcihuYW1lc3BhY2UpO1xuICAgICAgICAgICAgICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignd3JpdGVDb250cmFjdDogbmFtZXNwYWNlIGlzIHJlcXVpcmVkIGJ1dCBnb3QgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyaXRlQ29udHJhY3Q6IGFkYXB0ZXIgaXMgcmVxdWlyZWQgYnV0IGdvdCB1bmRlZmluZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY2FpcE5ldHdvcmsgPSB0aGlzLmdldENhaXBOZXR3b3JrKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FpcEFkZHJlc3MgPSB0aGlzLmdldENhaXBBZGRyZXNzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBQcm92aWRlckNvbnRyb2xsZXIuZ2V0UHJvdmlkZXIobmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNhaXBOZXR3b3JrIHx8ICFjYWlwQWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyaXRlQ29udHJhY3Q6IGNhaXBOZXR3b3JrIG9yIGNhaXBBZGRyZXNzIGlzIHJlcXVpcmVkIGJ1dCBnb3QgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkYXB0ZXI/LndyaXRlU29sYW5hVHJhbnNhY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICAuLi5hcmdzLFxuICAgICAgICAgICAgICAgICAgICBjYWlwTmV0d29yayxcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgIGNhaXBBZGRyZXNzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdD8uaGFzaDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXJzZVVuaXRzOiAodmFsdWUsIGRlY2ltYWxzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0QWRhcHRlcihDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW4pO1xuICAgICAgICAgICAgICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BhcnNlVW5pdHM6IGFkYXB0ZXIgaXMgcmVxdWlyZWQgYnV0IGdvdCB1bmRlZmluZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkYXB0ZXI/LnBhcnNlVW5pdHMoeyB2YWx1ZSwgZGVjaW1hbHMgfSkgPz8gMG47XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0VW5pdHM6ICh2YWx1ZSwgZGVjaW1hbHMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbik7XG4gICAgICAgICAgICAgICAgaWYgKCFhZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZm9ybWF0VW5pdHM6IGFkYXB0ZXIgaXMgcmVxdWlyZWQgYnV0IGdvdCB1bmRlZmluZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkYXB0ZXI/LmZvcm1hdFVuaXRzKHsgdmFsdWUsIGRlY2ltYWxzIH0pID8/ICcwJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRDYXBhYmlsaXRpZXM6IGFzeW5jIChwYXJhbXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbik7XG4gICAgICAgICAgICAgICAgaWYgKCFhZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZ2V0Q2FwYWJpbGl0aWVzOiBhZGFwdGVyIGlzIHJlcXVpcmVkIGJ1dCBnb3QgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBhZGFwdGVyPy5nZXRDYXBhYmlsaXRpZXMocGFyYW1zKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBncmFudFBlcm1pc3Npb25zOiBhc3luYyAocGFyYW1zKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0QWRhcHRlcihDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW4pO1xuICAgICAgICAgICAgICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dyYW50UGVybWlzc2lvbnM6IGFkYXB0ZXIgaXMgcmVxdWlyZWQgYnV0IGdvdCB1bmRlZmluZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFkYXB0ZXI/LmdyYW50UGVybWlzc2lvbnMocGFyYW1zKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXZva2VQZXJtaXNzaW9uczogYXN5bmMgKHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmdldEFkYXB0ZXIoQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluKTtcbiAgICAgICAgICAgICAgICBpZiAoIWFkYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZXZva2VQZXJtaXNzaW9uczogYWRhcHRlciBpcyByZXF1aXJlZCBidXQgZ290IHVuZGVmaW5lZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYWRhcHRlcj8ucmV2b2tlUGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFkYXB0ZXIucmV2b2tlUGVybWlzc2lvbnMocGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICcweCc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd2FsbGV0R2V0QXNzZXRzOiBhc3luYyAocGFyYW1zKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0QWRhcHRlcihDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW4pO1xuICAgICAgICAgICAgICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dhbGxldEdldEFzc2V0czogYWRhcHRlciBpcyByZXF1aXJlZCBidXQgZ290IHVuZGVmaW5lZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gKGF3YWl0IGFkYXB0ZXI/LndhbGxldEdldEFzc2V0cyhwYXJhbXMpKSA/PyB7fTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGVCYWxhbmNlOiAobmFtZXNwYWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMuZ2V0QWRkcmVzcyhuYW1lc3BhY2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhaXBOZXR3b3JrID0gdGhpcy5nZXRDYWlwTmV0d29yayhuYW1lc3BhY2UpO1xuICAgICAgICAgICAgICAgIGlmICghY2FpcE5ldHdvcmsgfHwgIWFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU5hdGl2ZUJhbGFuY2UoYWRkcmVzcywgY2FpcE5ldHdvcms/LmlkLCBuYW1lc3BhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb25uZWN0aW9uQ29udHJvbGxlci5zZXRDbGllbnQodGhpcy5jb25uZWN0aW9uQ29udHJvbGxlckNsaWVudCk7XG4gICAgfVxuICAgIGFzeW5jIG9uQ29ubmVjdEV4dGVybmFsKHBhcmFtcykge1xuICAgICAgICBjb25zdCBhY3RpdmVDaGFpbiA9IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbjtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlID0gcGFyYW1zLmNoYWluIHx8IGFjdGl2ZUNoYWluO1xuICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKG5hbWVzcGFjZSk7XG4gICAgICAgIGxldCBzaG91bGRVcGRhdGVOZXR3b3JrID0gdHJ1ZTtcbiAgICAgICAgaWYgKHBhcmFtcy50eXBlID09PSBVdGlsQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfVFlQRV9BVVRIKSB7XG4gICAgICAgICAgICBjb25zdCBhdXRoTmFtZXNwYWNlcyA9IENvbnN0YW50c1V0aWwuQVVUSF9DT05ORUNUT1JfU1VQUE9SVEVEX0NIQUlOUztcbiAgICAgICAgICAgIGNvbnN0IGhhc0Nvbm5lY3RlZEF1dGhOYW1lc3BhY2UgPSBhdXRoTmFtZXNwYWNlcy5zb21lKG5hbWVzcGFjZSA9PiBDb25uZWN0b3JDb250cm9sbGVyLmdldENvbm5lY3RvcklkKG5hbWVzcGFjZSkgPT09IENvbnN0YW50c1V0aWwuQ09OTkVDVE9SX0lELkFVVEgpO1xuICAgICAgICAgICAgaWYgKGhhc0Nvbm5lY3RlZEF1dGhOYW1lc3BhY2UgJiYgcGFyYW1zLmNoYWluICE9PSBhY3RpdmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHNob3VsZFVwZGF0ZU5ldHdvcmsgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLmNoYWluICYmIHBhcmFtcy5jaGFpbiAhPT0gYWN0aXZlQ2hhaW4gJiYgIXBhcmFtcy5jYWlwTmV0d29yaykge1xuICAgICAgICAgICAgY29uc3QgdG9Db25uZWN0TmV0d29yayA9IHRoaXMuZ2V0Q2FpcE5ldHdvcmtzKCkuZmluZChuZXR3b3JrID0+IG5ldHdvcmsuY2hhaW5OYW1lc3BhY2UgPT09IHBhcmFtcy5jaGFpbik7XG4gICAgICAgICAgICBpZiAodG9Db25uZWN0TmV0d29yayAmJiBzaG91bGRVcGRhdGVOZXR3b3JrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDYWlwTmV0d29yayh0b0Nvbm5lY3ROZXR3b3JrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5hbWVzcGFjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb25uZWN0RXh0ZXJuYWw6IG5hbWVzcGFjZSBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFkYXB0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY29ubmVjdEV4dGVybmFsOiBhZGFwdGVyIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrQ2FpcE5ldHdvcmsgPSB0aGlzLmdldENhaXBOZXR3b3JrKG5hbWVzcGFjZSk7XG4gICAgICAgIGNvbnN0IGNhaXBOZXR3b3JrVG9Vc2UgPSBwYXJhbXMuY2FpcE5ldHdvcmsgfHwgZmFsbGJhY2tDYWlwTmV0d29yaztcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYWRhcHRlci5jb25uZWN0KHtcbiAgICAgICAgICAgIGlkOiBwYXJhbXMuaWQsXG4gICAgICAgICAgICBhZGRyZXNzOiBwYXJhbXMuYWRkcmVzcyxcbiAgICAgICAgICAgIGluZm86IHBhcmFtcy5pbmZvLFxuICAgICAgICAgICAgdHlwZTogcGFyYW1zLnR5cGUsXG4gICAgICAgICAgICBwcm92aWRlcjogcGFyYW1zLnByb3ZpZGVyLFxuICAgICAgICAgICAgc29jaWFsVXJpOiBwYXJhbXMuc29jaWFsVXJpLFxuICAgICAgICAgICAgY2hhaW5JZDogcGFyYW1zLmNhaXBOZXR3b3JrPy5pZCB8fCBmYWxsYmFja0NhaXBOZXR3b3JrPy5pZCxcbiAgICAgICAgICAgIHJwY1VybDogcGFyYW1zLmNhaXBOZXR3b3JrPy5ycGNVcmxzPy5kZWZhdWx0Py5odHRwPy5bMF0gfHxcbiAgICAgICAgICAgICAgICBmYWxsYmFja0NhaXBOZXR3b3JrPy5ycGNVcmxzPy5kZWZhdWx0Py5odHRwPy5bMF1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIFN0b3JhZ2VVdGlsLmFkZENvbm5lY3RlZE5hbWVzcGFjZShuYW1lc3BhY2UpO1xuICAgICAgICB0aGlzLnN5bmNQcm92aWRlcih7IC4uLnJlcywgY2hhaW5OYW1lc3BhY2U6IG5hbWVzcGFjZSB9KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMoJ2Nvbm5lY3RlZCcsIG5hbWVzcGFjZSk7XG4gICAgICAgIHRoaXMuc3luY0Nvbm5lY3RlZFdhbGxldEluZm8obmFtZXNwYWNlKTtcbiAgICAgICAgU3RvcmFnZVV0aWwucmVtb3ZlRGlzY29ubmVjdGVkQ29ubmVjdG9ySWQocGFyYW1zLmlkLCBuYW1lc3BhY2UpO1xuICAgICAgICByZXR1cm4geyBhZGRyZXNzOiByZXMuYWRkcmVzcywgY29ubmVjdGVkQ2FpcE5ldHdvcms6IGNhaXBOZXR3b3JrVG9Vc2UgfTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdEluYWN0aXZlTmFtZXNwYWNlcyhwYXJhbXMsIGNvbm5lY3RSZXN1bHQpIHtcbiAgICAgICAgY29uc3QgaXNDb25uZWN0aW5nVG9BdXRoID0gcGFyYW1zLnR5cGUgPT09IFV0aWxDb25zdGFudHNVdGlsLkNPTk5FQ1RPUl9UWVBFX0FVVEg7XG4gICAgICAgIGNvbnN0IG90aGVyQXV0aE5hbWVzcGFjZXMgPSBIZWxwZXJzVXRpbC5nZXRPdGhlckF1dGhOYW1lc3BhY2VzKGNvbm5lY3RSZXN1bHQ/LmNvbm5lY3RlZENhaXBOZXR3b3JrPy5jaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUNhaXBOZXR3b3JrID0gQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNhaXBOZXR3b3JrO1xuICAgICAgICBjb25zdCBhY3RpdmVBZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKGFjdGl2ZUNhaXBOZXR3b3JrPy5jaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIGlmIChpc0Nvbm5lY3RpbmdUb0F1dGgpIHtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKG90aGVyQXV0aE5hbWVzcGFjZXMubWFwKGFzeW5jIChucykgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gUHJvdmlkZXJDb250cm9sbGVyLmdldFByb3ZpZGVyKG5zKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FpcE5ldHdvcmtUb1VzZSA9IHRoaXMuZ2V0Q2FpcE5ldHdvcmsobnMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKG5zKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYWRhcHRlcj8uY29ubmVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY2lhbFVyaTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogY2FpcE5ldHdvcmtUb1VzZT8uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBycGNVcmw6IGNhaXBOZXR3b3JrVG9Vc2U/LnJwY1VybHM/LmRlZmF1bHQ/Lmh0dHA/LlswXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3RvcmFnZVV0aWwuYWRkQ29ubmVjdGVkTmFtZXNwYWNlKG5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JhZ2VVdGlsLnJlbW92ZURpc2Nvbm5lY3RlZENvbm5lY3RvcklkKHBhcmFtcy5pZCwgbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoJ2Nvbm5lY3RlZCcsIG5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0Nvbm5lY3RlZFdhbGxldEluZm8obnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBBbGVydENvbnRyb2xsZXIud2FybihFcnJvclV0aWwuQUxFUlRfV0FSTklOR1MuSU5BQ1RJVkVfTkFNRVNQQUNFX05PVF9DT05ORUNURUQuZGlzcGxheU1lc3NhZ2UsIEVycm9yVXRpbC5BTEVSVF9XQVJOSU5HUy5JTkFDVElWRV9OQU1FU1BBQ0VfTk9UX0NPTk5FQ1RFRC5kZWJ1Z01lc3NhZ2UobnMsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogdW5kZWZpbmVkKSwgRXJyb3JVdGlsLkFMRVJUX1dBUk5JTkdTLklOQUNUSVZFX05BTUVTUEFDRV9OT1RfQ09OTkVDVEVELmNvZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIC8vIE1ha2UgdGhlIHNlY3VyZSBzaXRlIGJhY2sgdG8gY3VycmVudCBuZXR3b3JrIGFmdGVyIHJlY29ubmVjdGluZyB0aGUgb3RoZXIgbmFtZXNwYWNlc1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUNhaXBOZXR3b3JrKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYWN0aXZlQWRhcHRlcj8uc3dpdGNoTmV0d29yayh7XG4gICAgICAgICAgICAgICAgICAgIGNhaXBOZXR3b3JrOiBhY3RpdmVDYWlwTmV0d29ya1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldEFwcHJvdmVkQ2FpcE5ldHdvcmtzRGF0YSgpIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXJUeXBlID0gUHJvdmlkZXJDb250cm9sbGVyLmdldFByb3ZpZGVySWQoQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluKTtcbiAgICAgICAgaWYgKHByb3ZpZGVyVHlwZSA9PT0gVXRpbENvbnN0YW50c1V0aWwuQ09OTkVDVE9SX1RZUEVfV0FMTEVUX0NPTk5FQ1QpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzcGFjZXMgPSB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyPy5zZXNzaW9uPy5uYW1lc3BhY2VzO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAqIE1ldGFNYXNrIFdhbGxldCBvbmx5IHJldHVybnMgMSBuYW1lc3BhY2UgaW4gdGhlIHNlc3Npb24gb2JqZWN0LiBUaGlzIG1ha2VzIGl0IGltcG9zaWJsZVxuICAgICAgICAgICAgICAgICAqIHRvIHN3aXRjaCB0byBvdGhlciBuZXR3b3Jrcy4gU2V0dGluZyBzdXBwb3J0c0FsbE5ldHdvcmtzIHRvIHRydWUgZm9yIE1ldGFNYXNrIFdhbGxldFxuICAgICAgICAgICAgICAgICAqIHdpbGwgbWFrZSBpdCBwb3NzaWJsZSB0byBzd2l0Y2ggdG8gb3RoZXIgbmV0d29ya3MuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgc3VwcG9ydHNBbGxOZXR3b3JrczogdGhpcy51bml2ZXJzYWxQcm92aWRlcj8uc2Vzc2lvbj8ucGVlcj8ubWV0YWRhdGEubmFtZSA9PT0gJ01ldGFNYXNrIFdhbGxldCcsXG4gICAgICAgICAgICAgICAgYXBwcm92ZWRDYWlwTmV0d29ya0lkczogdGhpcy5nZXRDaGFpbnNGcm9tTmFtZXNwYWNlcyhuYW1lc3BhY2VzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdXBwb3J0c0FsbE5ldHdvcmtzOiB0cnVlLCBhcHByb3ZlZENhaXBOZXR3b3JrSWRzOiBbXSB9O1xuICAgIH1cbiAgICBhc3luYyBzd2l0Y2hDYWlwTmV0d29yayhjYWlwTmV0d29yaykge1xuICAgICAgICBjb25zdCBuZXR3b3JrTmFtZXNwYWNlID0gY2FpcE5ldHdvcmsuY2hhaW5OYW1lc3BhY2U7XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZUFkZHJlc3MgPSB0aGlzLmdldEFkZHJlc3NCeUNoYWluTmFtZXNwYWNlKGNhaXBOZXR3b3JrLmNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgaWYgKG5hbWVzcGFjZUFkZHJlc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyVHlwZSA9IFByb3ZpZGVyQ29udHJvbGxlci5nZXRQcm92aWRlcklkKG5ldHdvcmtOYW1lc3BhY2UpO1xuICAgICAgICAgICAgaWYgKGNhaXBOZXR3b3JrLmNoYWluTmFtZXNwYWNlID09PSBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKG5ldHdvcmtOYW1lc3BhY2UpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGFkYXB0ZXI/LnN3aXRjaE5ldHdvcmsoeyBjYWlwTmV0d29yayB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2FpcE5ldHdvcmsoY2FpcE5ldHdvcmspO1xuICAgICAgICAgICAgICAgIGlmIChwcm92aWRlclR5cGUgPT09IFV0aWxDb25zdGFudHNVdGlsLkNPTk5FQ1RPUl9UWVBFX1dBTExFVF9DT05ORUNUKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY1dhbGxldENvbm5lY3RBY2NvdW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5nZXRBZGRyZXNzQnlDaGFpbk5hbWVzcGFjZShuZXR3b3JrTmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0FjY291bnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogY2FpcE5ldHdvcmsuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5OYW1lc3BhY2U6IG5ldHdvcmtOYW1lc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRDYWlwTmV0d29yayhjYWlwTmV0d29yayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q2hhaW5zRnJvbU5hbWVzcGFjZXMobmFtZXNwYWNlcyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKG5hbWVzcGFjZXMpLmZsYXRNYXAoKG5hbWVzcGFjZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hhaW5zID0gKG5hbWVzcGFjZS5jaGFpbnMgfHwgW10pO1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudHNDaGFpbnMgPSBuYW1lc3BhY2UuYWNjb3VudHMubWFwKGFjY291bnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY2hhaW5JZCwgY2hhaW5OYW1lc3BhY2UgfSA9IFBhcnNlVXRpbC5wYXJzZUNhaXBBZGRyZXNzKGFjY291bnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtjaGFpbk5hbWVzcGFjZX06JHtjaGFpbklkfWA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQoWy4uLmNoYWlucywgLi4uYWNjb3VudHNDaGFpbnNdKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyAtLSBBZGFwdGVyIEluaXRpYWxpemF0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGNyZWF0ZUFkYXB0ZXJzKGJsdWVwcmludHMpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVDbGllbnRzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYWluTmFtZXNwYWNlcy5yZWR1Y2UoKGFkYXB0ZXJzLCBuYW1lc3BhY2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJsdWVwcmludCA9IGJsdWVwcmludHM/LmZpbmQoYiA9PiBiLm5hbWVzcGFjZSA9PT0gbmFtZXNwYWNlKTtcbiAgICAgICAgICAgIGlmIChibHVlcHJpbnQpIHtcbiAgICAgICAgICAgICAgICBibHVlcHJpbnQuY29uc3RydWN0KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SWQ6IHRoaXMub3B0aW9ucz8ucHJvamVjdElkLFxuICAgICAgICAgICAgICAgICAgICBuZXR3b3JrczogdGhpcy5jYWlwTmV0d29ya3M/LmZpbHRlcigoeyBjaGFpbk5hbWVzcGFjZSB9KSA9PiBjaGFpbk5hbWVzcGFjZSA9PT0gbmFtZXNwYWNlKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFkYXB0ZXJzW25hbWVzcGFjZV0gPSBibHVlcHJpbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGFwdGVyc1tuYW1lc3BhY2VdID0gbmV3IFVuaXZlcnNhbEFkYXB0ZXIoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcmtzOiB0aGlzLmdldENhaXBOZXR3b3JrcygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWRhcHRlcnM7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1yZWR1Y2UtdHlwZS1wYXJhbWV0ZXJcbiAgICAgICAgfSwge30pO1xuICAgIH1cbiAgICBhc3luYyBpbml0Q2hhaW5BZGFwdGVyKG5hbWVzcGFjZSkge1xuICAgICAgICB0aGlzLm9uQ29ubmVjdG9ycyhuYW1lc3BhY2UpO1xuICAgICAgICB0aGlzLmxpc3RlbkFkYXB0ZXIobmFtZXNwYWNlKTtcbiAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0QWRhcHRlcihuYW1lc3BhY2UpO1xuICAgICAgICBpZiAoIWFkYXB0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYWRhcHRlciBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBhZGFwdGVyLnN5bmNDb25uZWN0b3JzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlVW5pdmVyc2FsUHJvdmlkZXJGb3JBZGFwdGVyKG5hbWVzcGFjZSk7XG4gICAgfVxuICAgIGFzeW5jIGluaXRDaGFpbkFkYXB0ZXJzKCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmNoYWluTmFtZXNwYWNlcy5tYXAoYXN5bmMgKG5hbWVzcGFjZSkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0Q2hhaW5BZGFwdGVyKG5hbWVzcGFjZSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5pbml0QWRhcHRlckNvbnRyb2xsZXIoKTtcbiAgICB9XG4gICAgb25Db25uZWN0b3JzKGNoYWluTmFtZXNwYWNlKSB7XG4gICAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmdldEFkYXB0ZXIoY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICBhZGFwdGVyPy5vbignY29ubmVjdG9ycycsIHRoaXMuc2V0Q29ubmVjdG9ycy5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgbGlzdGVuQWRhcHRlcihjaGFpbk5hbWVzcGFjZSkge1xuICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgaWYgKCFhZGFwdGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29ubmVjdGlvblN0YXR1cyA9IFN0b3JhZ2VVdGlsLmdldENvbm5lY3Rpb25TdGF0dXMoKTtcbiAgICAgICAgaWYgKE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLmVuYWJsZVJlY29ubmVjdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKCdkaXNjb25uZWN0ZWQnLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29ubmVjdGlvblN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKCdjb25uZWN0aW5nJywgY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbm5lY3Rpb25TdGF0dXMgPT09ICdkaXNjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogQWRkcmVzcyBjYWNoZSBpcyBrZXB0IGFmdGVyIGRpc2Nvbm5lY3RpbmcgZnJvbSB0aGUgd2FsbGV0XG4gICAgICAgICAgICAgKiBidXQgc2hvdWxkIGJlIGNsZWFyZWQgaWYgYXBwa2l0IGlzIGxhdW5jaGVkIGluIGRpc2Nvbm5lY3RlZCBzdGF0ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9yYWdlVXRpbC5jbGVhckFkZHJlc3NDYWNoZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoY29ubmVjdGlvblN0YXR1cywgY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoY29ubmVjdGlvblN0YXR1cywgY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICB9XG4gICAgICAgIGFkYXB0ZXIub24oJ3N3aXRjaE5ldHdvcmsnLCAoeyBhZGRyZXNzLCBjaGFpbklkIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhaXBOZXR3b3JrID0gdGhpcy5nZXRDYWlwTmV0d29ya3MoKS5maW5kKG4gPT4gbi5pZC50b1N0cmluZygpID09PSBjaGFpbklkLnRvU3RyaW5nKCkgfHxcbiAgICAgICAgICAgICAgICBuLmNhaXBOZXR3b3JrSWQudG9TdHJpbmcoKSA9PT0gY2hhaW5JZC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGNvbnN0IGlzU2FtZU5hbWVzcGFjZSA9IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbiA9PT0gY2hhaW5OYW1lc3BhY2U7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50QWRkcmVzcyA9IENoYWluQ29udHJvbGxlci5zdGF0ZS5jaGFpbnMuZ2V0KGNoYWluTmFtZXNwYWNlKT8uYWNjb3VudFN0YXRlPy5hZGRyZXNzO1xuICAgICAgICAgICAgaWYgKGNhaXBOZXR3b3JrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IGlzU2FtZU5hbWVzcGFjZSAmJiBhZGRyZXNzID8gYWRkcmVzcyA6IGFjY291bnRBZGRyZXNzO1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0FjY291bnQoeyBhZGRyZXNzOiBhY2NvdW50LCBjaGFpbklkOiBjYWlwTmV0d29yay5pZCwgY2hhaW5OYW1lc3BhY2UgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRVbnN1cHBvcnRlZE5ldHdvcmsoY2hhaW5JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhZGFwdGVyLm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNNdWx0aVdhbGxldCA9IHRoaXMucmVtb3RlRmVhdHVyZXMubXVsdGlXYWxsZXQ7XG4gICAgICAgICAgICBjb25zdCBhbGxDb25uZWN0aW9ucyA9IEFycmF5LmZyb20oQ29ubmVjdGlvbkNvbnRyb2xsZXIuc3RhdGUuY29ubmVjdGlvbnMudmFsdWVzKCkpLmZsYXQoKTtcbiAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0TmFtZXNwYWNlKHtcbiAgICAgICAgICAgICAgICBjaGFpbk5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICBjbG9zZU1vZGFsOiAhaXNNdWx0aVdhbGxldCB8fCBhbGxDb25uZWN0aW9ucy5sZW5ndGggPT09IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgYWRhcHRlci5vbignY29ubmVjdGlvbnMnLCBjb25uZWN0aW9ucyA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldENvbm5lY3Rpb25zKGNvbm5lY3Rpb25zLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhZGFwdGVyLm9uKCdwZW5kaW5nVHJhbnNhY3Rpb25zJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMuZ2V0QWRkcmVzcyhjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVDYWlwTmV0d29yayA9IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDYWlwTmV0d29yaztcbiAgICAgICAgICAgIGlmICghYWRkcmVzcyB8fCAhYWN0aXZlQ2FpcE5ldHdvcms/LmlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVOYXRpdmVCYWxhbmNlKGFkZHJlc3MsIGFjdGl2ZUNhaXBOZXR3b3JrLmlkLCBhY3RpdmVDYWlwTmV0d29yay5jaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhZGFwdGVyLm9uKCdhY2NvdW50Q2hhbmdlZCcsICh7IGFkZHJlc3MsIGNoYWluSWQsIGNvbm5lY3RvciB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVByZXZpb3VzQ29ubmVjdG9yQ29ubmVjdGlvbihjb25uZWN0b3IpO1xuICAgICAgICAgICAgY29uc3QgaXNBY3RpdmVDaGFpbiA9IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbiA9PT0gY2hhaW5OYW1lc3BhY2U7XG4gICAgICAgICAgICBpZiAoY29ubmVjdG9yPy5wcm92aWRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3luY1Byb3ZpZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbm5lY3Rvci5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogY29ubmVjdG9yLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBjb25uZWN0b3I/LnByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbk5hbWVzcGFjZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc3luY0Nvbm5lY3RlZFdhbGxldEluZm8oY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmFtZXNwYWNlTmV0d29ya0lkID0gQ2hhaW5Db250cm9sbGVyLmdldE5ldHdvcmtEYXRhKGNoYWluTmFtZXNwYWNlKT8uY2FpcE5ldHdvcms/LmlkO1xuICAgICAgICAgICAgY29uc3Qgc3luY0FjY291bnRDaGFpbklkID0gY2hhaW5JZCB8fCBuYW1lc3BhY2VOZXR3b3JrSWQ7XG4gICAgICAgICAgICBpZiAoaXNBY3RpdmVDaGFpbiAmJiBzeW5jQWNjb3VudENoYWluSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNBY2NvdW50KHtcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogc3luY0FjY291bnRDaGFpbklkLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbk5hbWVzcGFjZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzQWN0aXZlQ2hhaW4gJiYgc3luY0FjY291bnRDaGFpbklkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jQWNjb3VudEluZm8oYWRkcmVzcywgc3luY0FjY291bnRDaGFpbklkLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jQmFsYW5jZSh7IGFkZHJlc3MsIGNoYWluSWQ6IHN5bmNBY2NvdW50Q2hhaW5JZCwgY2hhaW5OYW1lc3BhY2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNBY2NvdW50SW5mbyhhZGRyZXNzLCBjaGFpbklkLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTdG9yYWdlVXRpbC5hZGRDb25uZWN0ZWROYW1lc3BhY2UoY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoZSBpbmNvbWluZyBjb25uZWN0b3IgYW5kIGhhbmRsZXMgdGhlIHByZXZpb3VzIGNvbm5lY3Rpb24gaW4gdGhlIGNvbm5lY3RvcidzIG5hbWVzcGFjZSwgYW5kIGlmIG5lY2Vzc2FyeSAoaS5lIG11bHRpLXdhbGxldCBpcyBkaXNhYmxlZCkgZGlzY29ubmVjdHMgdGhlIHByZXZpb3VzIGNvbm5lY3RvclxuICAgICAqIEBwYXJhbSBjb25uZWN0b3JcbiAgICAgKi9cbiAgICBhc3luYyBoYW5kbGVQcmV2aW91c0Nvbm5lY3RvckNvbm5lY3Rpb24oY29ubmVjdG9yKSB7XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IGNvbm5lY3Rvcj8uY2hhaW47XG4gICAgICAgIGNvbnN0IG5ld0Nvbm5lY3RvcklkID0gY29ubmVjdG9yPy5pZDtcbiAgICAgICAgY29uc3QgY3VycmVudENvbm5lY3RvcklkID0gQ29ubmVjdG9yQ29udHJvbGxlci5nZXRDb25uZWN0b3JJZChuYW1lc3BhY2UpO1xuICAgICAgICBjb25zdCBpc011bHRpV2FsbGV0RW5hYmxlZCA9IE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLnJlbW90ZUZlYXR1cmVzPy5tdWx0aVdhbGxldDtcbiAgICAgICAgY29uc3QgaGFzTmV3Q29ubmVjdG9yQ29ubmVjdGVkID0gY3VycmVudENvbm5lY3RvcklkICE9PSBuZXdDb25uZWN0b3JJZDtcbiAgICAgICAgY29uc3Qgc2hvdWxkRGlzY29ubmVjdFByZXZpb3VzQ29ubmVjdG9yID0gbmFtZXNwYWNlICYmXG4gICAgICAgICAgICBuZXdDb25uZWN0b3JJZCAmJlxuICAgICAgICAgICAgY3VycmVudENvbm5lY3RvcklkICYmXG4gICAgICAgICAgICBoYXNOZXdDb25uZWN0b3JDb25uZWN0ZWQgJiZcbiAgICAgICAgICAgICFpc011bHRpV2FsbGV0RW5hYmxlZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChzaG91bGREaXNjb25uZWN0UHJldmlvdXNDb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBDb25uZWN0aW9uQ29udHJvbGxlci5kaXNjb25uZWN0KHsgaWQ6IGN1cnJlbnRDb25uZWN0b3JJZCwgbmFtZXNwYWNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBkaXNjb25uZWN0aW5nIHByZXZpb3VzIGNvbm5lY3RvcicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjcmVhdGVVbml2ZXJzYWxQcm92aWRlckZvckFkYXB0ZXIoY2hhaW5OYW1lc3BhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRVbml2ZXJzYWxQcm92aWRlcigpO1xuICAgICAgICBpZiAodGhpcy51bml2ZXJzYWxQcm92aWRlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGFpbkFkYXB0ZXJzPy5bY2hhaW5OYW1lc3BhY2VdPy5zZXRVbml2ZXJzYWxQcm92aWRlcj8uKHRoaXMudW5pdmVyc2FsUHJvdmlkZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIC0tIENvbm5lY3Rpb24gU3luYyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBhc3luYyBzeW5jRXhpc3RpbmdDb25uZWN0aW9uKCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQodGhpcy5jaGFpbk5hbWVzcGFjZXMubWFwKG5hbWVzcGFjZSA9PiB0aGlzLnN5bmNOYW1lc3BhY2VDb25uZWN0aW9uKG5hbWVzcGFjZSkpKTtcbiAgICB9XG4gICAgYXN5bmMgdW5TeW5jRXhpc3RpbmdDb25uZWN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHRoaXMuY2hhaW5OYW1lc3BhY2VzLm1hcChuYW1lc3BhY2UgPT4gQ29ubmVjdGlvbkNvbnRyb2xsZXIuZGlzY29ubmVjdCh7IG5hbWVzcGFjZSwgaW5pdGlhbERpc2Nvbm5lY3Q6IHRydWUgfSkpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkaXNjb25uZWN0aW5nIGV4aXN0aW5nIGNvbm5lY3Rpb25zOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyByZWNvbm5lY3RXYWxsZXRDb25uZWN0KCkge1xuICAgICAgICBhd2FpdCB0aGlzLnN5bmNXYWxsZXRDb25uZWN0QWNjb3VudCgpO1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5nZXRBZGRyZXNzKCk7XG4gICAgICAgIGlmICghdGhpcy5nZXRDYWlwQWRkcmVzcygpKSB7XG4gICAgICAgICAgICBTdG9yYWdlVXRpbC5kZWxldGVSZWNlbnRXYWxsZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWNlbnRXYWxsZXQgPSBTdG9yYWdlVXRpbC5nZXRSZWNlbnRXYWxsZXQoKTtcbiAgICAgICAgRXZlbnRzQ29udHJvbGxlci5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3RyYWNrJyxcbiAgICAgICAgICAgIGV2ZW50OiAnQ09OTkVDVF9TVUNDRVNTJyxcbiAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBDb3JlSGVscGVyVXRpbC5pc01vYmlsZSgpID8gJ21vYmlsZScgOiAncXJjb2RlJyxcbiAgICAgICAgICAgICAgICBuYW1lOiByZWNlbnRXYWxsZXQ/Lm5hbWUgfHwgJ1Vua25vd24nLFxuICAgICAgICAgICAgICAgIHJlY29ubmVjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2aWV3OiBSb3V0ZXJDb250cm9sbGVyLnN0YXRlLnZpZXcsXG4gICAgICAgICAgICAgICAgd2FsbGV0UmFuazogcmVjZW50V2FsbGV0Py5vcmRlclxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc3luY05hbWVzcGFjZUNvbm5lY3Rpb24obmFtZXNwYWNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAobmFtZXNwYWNlID09PSBDb25zdGFudHNVdGlsLkNIQUlOLkVWTSAmJiBDb3JlSGVscGVyVXRpbC5pc1NhZmVBcHAoKSkge1xuICAgICAgICAgICAgICAgIENvbm5lY3RvckNvbnRyb2xsZXIuc2V0Q29ubmVjdG9ySWQoQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfSUQuU0FGRSwgbmFtZXNwYWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RvcklkID0gQ29ubmVjdG9yQ29udHJvbGxlci5nZXRDb25uZWN0b3JJZChuYW1lc3BhY2UpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoJ2Nvbm5lY3RpbmcnLCBuYW1lc3BhY2UpO1xuICAgICAgICAgICAgc3dpdGNoIChjb25uZWN0b3JJZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfSUQuV0FMTEVUX0NPTk5FQ1Q6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVjb25uZWN0V2FsbGV0Q29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENvbnN0YW50c1V0aWwuQ09OTkVDVE9SX0lELkFVVEg6XG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZWQgZHVyaW5nIGluaXRpYWxpemF0aW9uIG9mIGFkYXB0ZXJzJyBhdXRoIHByb3ZpZGVyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3luY0FkYXB0ZXJDb25uZWN0aW9uKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQXBwS2l0IGNvdWxkbid0IHN5bmMgZXhpc3RpbmcgY29ubmVjdGlvblwiLCBlcnIpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsIG5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EaXNjb25uZWN0TmFtZXNwYWNlKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBjaGFpbk5hbWVzcGFjZSwgY2xvc2VNb2RhbCB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgQ2hhaW5Db250cm9sbGVyLnJlc2V0QWNjb3VudChjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIENoYWluQ29udHJvbGxlci5yZXNldE5ldHdvcmsoY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICBTdG9yYWdlVXRpbC5yZW1vdmVDb25uZWN0ZWROYW1lc3BhY2UoY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICBjb25zdCBuYW1lc3BhY2VzID0gQXJyYXkuZnJvbShDaGFpbkNvbnRyb2xsZXIuc3RhdGUuY2hhaW5zLmtleXMoKSk7XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZXNUb0Rpc2Nvbm5lY3QgPSBjaGFpbk5hbWVzcGFjZSA/IFtjaGFpbk5hbWVzcGFjZV0gOiBuYW1lc3BhY2VzO1xuICAgICAgICBuYW1lc3BhY2VzVG9EaXNjb25uZWN0LmZvckVhY2gobnMgPT4gU3RvcmFnZVV0aWwuYWRkRGlzY29ubmVjdGVkQ29ubmVjdG9ySWQoQ29ubmVjdG9yQ29udHJvbGxlci5nZXRDb25uZWN0b3JJZChucykgfHwgJycsIG5zKSk7XG4gICAgICAgIENvbm5lY3RvckNvbnRyb2xsZXIucmVtb3ZlQ29ubmVjdG9ySWQoY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICBQcm92aWRlckNvbnRyb2xsZXIucmVzZXRDaGFpbihjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIHRoaXMuc2V0VXNlcihudWxsLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdHVzKCdkaXNjb25uZWN0ZWQnLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIHRoaXMuc2V0Q29ubmVjdGVkV2FsbGV0SW5mbyhudWxsLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIGlmIChjbG9zZU1vZGFsICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgTW9kYWxDb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3luY0FkYXB0ZXJDb25uZWN0aW9ucygpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHRoaXMuY2hhaW5OYW1lc3BhY2VzLm1hcChuYW1lc3BhY2UgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0QWRhcHRlcihuYW1lc3BhY2UpO1xuICAgICAgICAgICAgY29uc3QgY2FpcEFkZHJlc3MgPSB0aGlzLmdldENhaXBBZGRyZXNzKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICBjb25zdCBjYWlwTmV0d29yayA9IHRoaXMuZ2V0Q2FpcE5ldHdvcmsobmFtZXNwYWNlKTtcbiAgICAgICAgICAgIHJldHVybiBhZGFwdGVyPy5zeW5jQ29ubmVjdGlvbnMoe1xuICAgICAgICAgICAgICAgIGNvbm5lY3RUb0ZpcnN0Q29ubmVjdG9yOiAhY2FpcEFkZHJlc3MsXG4gICAgICAgICAgICAgICAgY2FpcE5ldHdvcmtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIHN5bmNBZGFwdGVyQ29ubmVjdGlvbihuYW1lc3BhY2UpIHtcbiAgICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0QWRhcHRlcihuYW1lc3BhY2UpO1xuICAgICAgICBjb25zdCBjYWlwTmV0d29yayA9IHRoaXMuZ2V0Q2FpcE5ldHdvcmsobmFtZXNwYWNlKTtcbiAgICAgICAgY29uc3QgY29ubmVjdG9ySWQgPSBDb25uZWN0b3JDb250cm9sbGVyLmdldENvbm5lY3RvcklkKG5hbWVzcGFjZSk7XG4gICAgICAgIGNvbnN0IGNvbm5lY3RvcnMgPSBDb25uZWN0b3JDb250cm9sbGVyLmdldENvbm5lY3RvcnMobmFtZXNwYWNlKTtcbiAgICAgICAgY29uc3QgY29ubmVjdG9yID0gY29ubmVjdG9ycy5maW5kKGMgPT4gYy5pZCA9PT0gY29ubmVjdG9ySWQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFhZGFwdGVyIHx8ICFjb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFkYXB0ZXIgb3IgY29ubmVjdG9yIG5vdCBmb3VuZCBmb3IgbmFtZXNwYWNlICR7bmFtZXNwYWNlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjYWlwTmV0d29yaz8uaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhaXBOZXR3b3JrIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IGFkYXB0ZXI/LnN5bmNDb25uZWN0aW9uKHtcbiAgICAgICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICAgICAgaWQ6IGNvbm5lY3Rvci5pZCxcbiAgICAgICAgICAgICAgICBjaGFpbklkOiBjYWlwTmV0d29yay5pZCxcbiAgICAgICAgICAgICAgICBycGNVcmw6IGNhaXBOZXR3b3JrPy5ycGNVcmxzPy5kZWZhdWx0Py5odHRwPy5bMF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNQcm92aWRlcih7IC4uLmNvbm5lY3Rpb24sIGNoYWluTmFtZXNwYWNlOiBuYW1lc3BhY2UgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zeW5jQWNjb3VudCh7IC4uLmNvbm5lY3Rpb24sIGNoYWluTmFtZXNwYWNlOiBuYW1lc3BhY2UgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoJ2Nvbm5lY3RlZCcsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgRXZlbnRzQ29udHJvbGxlci5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndHJhY2snLFxuICAgICAgICAgICAgICAgICAgICBldmVudDogJ0NPTk5FQ1RfU1VDQ0VTUycsXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGNvbm5lY3Rpb24uYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnYnJvd3NlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjb25uZWN0b3IuaW5mbz8ubmFtZSB8fCBjb25uZWN0b3IubmFtZSB8fCAnVW5rbm93bicsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvbm5lY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3OiBSb3V0ZXJDb250cm9sbGVyLnN0YXRlLnZpZXcsXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXRSYW5rOiBjb25uZWN0b3I/LmV4cGxvcmVyV2FsbGV0Py5vcmRlclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXR1cygnZGlzY29ubmVjdGVkJywgbmFtZXNwYWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3ROYW1lc3BhY2UoeyBjaGFpbk5hbWVzcGFjZTogbmFtZXNwYWNlLCBjbG9zZU1vZGFsOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzeW5jV2FsbGV0Q29ubmVjdEFjY291bnQoKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25OYW1lc3BhY2VzID0gT2JqZWN0LmtleXModGhpcy51bml2ZXJzYWxQcm92aWRlcj8uc2Vzc2lvbj8ubmFtZXNwYWNlcyB8fCB7fSk7XG4gICAgICAgIGNvbnN0IHN5bmNUYXNrcyA9IHRoaXMuY2hhaW5OYW1lc3BhY2VzLm1hcChhc3luYyAoY2hhaW5OYW1lc3BhY2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmdldEFkYXB0ZXIoY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICAgICAgaWYgKCFhZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmFtZXNwYWNlQWNjb3VudHMgPSB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyPy5zZXNzaW9uPy5uYW1lc3BhY2VzPy5bY2hhaW5OYW1lc3BhY2VdPy5hY2NvdW50cyB8fCBbXTtcbiAgICAgICAgICAgIC8vIFdlIHRyeSBhbmQgZmluZCB0aGUgYWRkcmVzcyBmb3IgdGhpcyBuZXR3b3JrIGluIHRoZSBzZXNzaW9uIG9iamVjdC5cbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUNoYWluSWQgPSBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2FpcE5ldHdvcms/LmlkO1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkFkZHJlc3MgPSBuYW1lc3BhY2VBY2NvdW50cy5maW5kKGFjY291bnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY2hhaW5JZCB9ID0gUGFyc2VVdGlsLnBhcnNlQ2FpcEFkZHJlc3MoYWNjb3VudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYWluSWQgPT09IGFjdGl2ZUNoYWluSWQ/LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9KSB8fCBuYW1lc3BhY2VBY2NvdW50c1swXTtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uQWRkcmVzcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhaXBBZGRyZXNzID0gUGFyc2VVdGlsLnZhbGlkYXRlQ2FpcEFkZHJlc3Moc2Vzc2lvbkFkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY2hhaW5JZCwgYWRkcmVzcyB9ID0gUGFyc2VVdGlsLnBhcnNlQ2FpcEFkZHJlc3MoY2FpcEFkZHJlc3MpO1xuICAgICAgICAgICAgICAgIFByb3ZpZGVyQ29udHJvbGxlci5zZXRQcm92aWRlcklkKGNoYWluTmFtZXNwYWNlLCBVdGlsQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfVFlQRV9XQUxMRVRfQ09OTkVDVCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FpcE5ldHdvcmtzICYmXG4gICAgICAgICAgICAgICAgICAgIENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDYWlwTmV0d29yayAmJlxuICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLm5hbWVzcGFjZSAhPT0gQ29uc3RhbnRzVXRpbC5DSEFJTi5FVk0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBhZGFwdGVyLmdldFdhbGxldENvbm5lY3RQcm92aWRlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWlwTmV0d29ya3M6IHRoaXMuZ2V0Q2FpcE5ldHdvcmtzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcjogdGhpcy51bml2ZXJzYWxQcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNhaXBOZXR3b3JrOiBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2FpcE5ldHdvcmtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyQ29udHJvbGxlci5zZXRQcm92aWRlcihjaGFpbk5hbWVzcGFjZSwgcHJvdmlkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJDb250cm9sbGVyLnNldFByb3ZpZGVyKGNoYWluTmFtZXNwYWNlLCB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgQ29ubmVjdG9yQ29udHJvbGxlci5zZXRDb25uZWN0b3JJZChDb25zdGFudHNVdGlsLkNPTk5FQ1RPUl9JRC5XQUxMRVRfQ09OTkVDVCwgY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICAgICAgICAgIFN0b3JhZ2VVdGlsLmFkZENvbm5lY3RlZE5hbWVzcGFjZShjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zeW5jQWNjb3VudCh7XG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQsXG4gICAgICAgICAgICAgICAgICAgIGNoYWluTmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZXNzaW9uTmFtZXNwYWNlcy5pbmNsdWRlcyhjaGFpbk5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXR1cygnZGlzY29ubmVjdGVkJywgY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0QXBwcm92ZWRDYWlwTmV0d29ya3NEYXRhKCk7XG4gICAgICAgICAgICB0aGlzLnN5bmNDb25uZWN0ZWRXYWxsZXRJbmZvKGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgICAgIENoYWluQ29udHJvbGxlci5zZXRBcHByb3ZlZENhaXBOZXR3b3Jrc0RhdGEoY2hhaW5OYW1lc3BhY2UsIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZENhaXBOZXR3b3JrSWRzOiBkYXRhLmFwcHJvdmVkQ2FpcE5ldHdvcmtJZHMsXG4gICAgICAgICAgICAgICAgc3VwcG9ydHNBbGxOZXR3b3JrczogZGF0YS5zdXBwb3J0c0FsbE5ldHdvcmtzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHN5bmNUYXNrcyk7XG4gICAgfVxuICAgIHN5bmNQcm92aWRlcih7IHR5cGUsIHByb3ZpZGVyLCBpZCwgY2hhaW5OYW1lc3BhY2UgfSkge1xuICAgICAgICBQcm92aWRlckNvbnRyb2xsZXIuc2V0UHJvdmlkZXJJZChjaGFpbk5hbWVzcGFjZSwgdHlwZSk7XG4gICAgICAgIFByb3ZpZGVyQ29udHJvbGxlci5zZXRQcm92aWRlcihjaGFpbk5hbWVzcGFjZSwgcHJvdmlkZXIpO1xuICAgICAgICBDb25uZWN0b3JDb250cm9sbGVyLnNldENvbm5lY3RvcklkKGlkLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgfVxuICAgIGFzeW5jIHN5bmNBY2NvdW50KHBhcmFtcykge1xuICAgICAgICBjb25zdCBpc0FjdGl2ZU5hbWVzcGFjZSA9IHBhcmFtcy5jaGFpbk5hbWVzcGFjZSA9PT0gQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluO1xuICAgICAgICBjb25zdCBuZXR3b3JrT2ZDaGFpbiA9IENoYWluQ29udHJvbGxlci5nZXRDYWlwTmV0d29ya0J5TmFtZXNwYWNlKHBhcmFtcy5jaGFpbk5hbWVzcGFjZSwgcGFyYW1zLmNoYWluSWQpO1xuICAgICAgICBjb25zdCB7IGFkZHJlc3MsIGNoYWluSWQsIGNoYWluTmFtZXNwYWNlIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgY2hhaW5JZDogYWN0aXZlQ2hhaW5JZCB9ID0gU3RvcmFnZVV0aWwuZ2V0QWN0aXZlTmV0d29ya1Byb3BzKCk7XG4gICAgICAgIGNvbnN0IGNoYWluSWRUb1VzZSA9IG5ldHdvcmtPZkNoYWluPy5pZCB8fCBhY3RpdmVDaGFpbklkO1xuICAgICAgICBjb25zdCBpc1Vuc3VwcG9ydGVkTmV0d29yayA9IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDYWlwTmV0d29yaz8ubmFtZSA9PT0gQ29uc3RhbnRzVXRpbC5VTlNVUFBPUlRFRF9ORVRXT1JLX05BTUU7XG4gICAgICAgIGNvbnN0IHNob3VsZFN1cHBvcnRBbGxOZXR3b3JrcyA9IENoYWluQ29udHJvbGxlci5nZXROZXR3b3JrUHJvcCgnc3VwcG9ydHNBbGxOZXR3b3JrcycsIGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMoJ2Nvbm5lY3RlZCcsIGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgaWYgKGlzVW5zdXBwb3J0ZWROZXR3b3JrICYmICFzaG91bGRTdXBwb3J0QWxsTmV0d29ya3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhaW5JZFRvVXNlKSB7XG4gICAgICAgICAgICBsZXQgY2FpcE5ldHdvcmsgPSB0aGlzLmdldENhaXBOZXR3b3JrcygpLmZpbmQobiA9PiBuLmlkLnRvU3RyaW5nKCkgPT09IGNoYWluSWRUb1VzZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGxldCBmYWxsYmFja0NhaXBOZXR3b3JrID0gdGhpcy5nZXRDYWlwTmV0d29ya3MoKS5maW5kKG4gPT4gbi5jaGFpbk5hbWVzcGFjZSA9PT0gY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICAgICAgLy8gSWYgZG9lc24ndCBzdXBwb3J0IGFsbCBuZXR3b3Jrcywgd2UgbmVlZCB0byB1c2UgYXBwcm92ZWQgbmV0d29ya3NcbiAgICAgICAgICAgIGlmICghc2hvdWxkU3VwcG9ydEFsbE5ldHdvcmtzICYmICFjYWlwTmV0d29yayAmJiAhZmFsbGJhY2tDYWlwTmV0d29yaykge1xuICAgICAgICAgICAgICAgIC8vIENvbm5lY3Rpb24gY2FuIGJlIHJlcXVlc3RlZCBmb3IgYSBjaGFpbiB0aGF0IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIHdhbGxldCBzbyB3ZSBuZWVkIHRvIHVzZSBhcHByb3ZlZCBuZXR3b3JrcyBoZXJlXG4gICAgICAgICAgICAgICAgY29uc3QgY2FpcE5ldHdvcmtJZHMgPSB0aGlzLmdldEFwcHJvdmVkQ2FpcE5ldHdvcmtJZHMoKSB8fCBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWlwTmV0d29ya0lkID0gY2FpcE5ldHdvcmtJZHMuZmluZChpZCA9PiBQYXJzZVV0aWwucGFyc2VDYWlwTmV0d29ya0lkKGlkKT8uY2hhaW5JZCA9PT0gY2hhaW5JZFRvVXNlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZhbGxCYWNrQ2FpcE5ldHdvcmtJZCA9IGNhaXBOZXR3b3JrSWRzLmZpbmQoaWQgPT4gUGFyc2VVdGlsLnBhcnNlQ2FpcE5ldHdvcmtJZChpZCk/LmNoYWluTmFtZXNwYWNlID09PSBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgY2FpcE5ldHdvcmsgPSB0aGlzLmdldENhaXBOZXR3b3JrcygpLmZpbmQobiA9PiBuLmNhaXBOZXR3b3JrSWQgPT09IGNhaXBOZXR3b3JrSWQpO1xuICAgICAgICAgICAgICAgIGZhbGxiYWNrQ2FpcE5ldHdvcmsgPSB0aGlzLmdldENhaXBOZXR3b3JrcygpLmZpbmQobiA9PiBuLmNhaXBOZXR3b3JrSWQgPT09IGZhbGxCYWNrQ2FpcE5ldHdvcmtJZCB8fFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgd29ya2Fyb3VuZCB1c2VkIGluIFNvbGFuYSBuZXR3b3JrIHRvIHN1cHBvcnQgZGVwcmVjYXRlZCBjYWlwTmV0d29ya0lkXG4gICAgICAgICAgICAgICAgICAgICgnZGVwcmVjYXRlZENhaXBOZXR3b3JrSWQnIGluIG4gJiYgbi5kZXByZWNhdGVkQ2FpcE5ldHdvcmtJZCA9PT0gZmFsbEJhY2tDYWlwTmV0d29ya0lkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXR3b3JrID0gY2FpcE5ldHdvcmsgfHwgZmFsbGJhY2tDYWlwTmV0d29yaztcbiAgICAgICAgICAgIGlmIChuZXR3b3JrPy5jaGFpbk5hbWVzcGFjZSA9PT0gQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5ldHdvcmsgaXMgdW5zdXBwb3J0ZWQgYW5kIHRoZSB1c2VyIGRvZXNuJ3QgYWxsb3cgdW5zdXBwb3J0ZWQgY2hhaW5zLCB3ZSBzaG93IHRoZSB1bnN1cHBvcnRlZCBjaGFpbiBVSVxuICAgICAgICAgICAgICAgIGlmIChPcHRpb25zQ29udHJvbGxlci5zdGF0ZS5lbmFibGVOZXR3b3JrU3dpdGNoICYmXG4gICAgICAgICAgICAgICAgICAgICFPcHRpb25zQ29udHJvbGxlci5zdGF0ZS5hbGxvd1Vuc3VwcG9ydGVkQ2hhaW4gJiZcbiAgICAgICAgICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNhaXBOZXR3b3JrPy5uYW1lID09PSBDb25zdGFudHNVdGlsLlVOU1VQUE9SVEVEX05FVFdPUktfTkFNRSkge1xuICAgICAgICAgICAgICAgICAgICBDaGFpbkNvbnRyb2xsZXIuc2hvd1Vuc3VwcG9ydGVkQ2hhaW5VSSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDYWlwTmV0d29yayhuZXR3b3JrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaXNBY3RpdmVOYW1lc3BhY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV0d29ya09mQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDYWlwTmV0d29ya09mTmFtZXNwYWNlKG5ldHdvcmtPZkNoYWluLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zeW5jQ29ubmVjdGVkV2FsbGV0SW5mbyhjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50QWRkcmVzcyA9IHRoaXMuZ2V0QWRkcmVzcyhjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICBpZiAoIUhlbHBlcnNVdGlsLmlzTG93ZXJDYXNlTWF0Y2goYWRkcmVzcywgY3VycmVudEFkZHJlc3MpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jQWNjb3VudEluZm8oYWRkcmVzcywgbmV0d29yaz8uaWQsIGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0FjdGl2ZU5hbWVzcGFjZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3luY0JhbGFuY2UoeyBhZGRyZXNzLCBjaGFpbklkOiBuZXR3b3JrPy5pZCwgY2hhaW5OYW1lc3BhY2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnN5bmNCYWxhbmNlKHsgYWRkcmVzcywgY2hhaW5JZDogbmV0d29ya09mQ2hhaW4/LmlkLCBjaGFpbk5hbWVzcGFjZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3luY0lkZW50aXR5KHtcbiAgICAgICAgICAgICAgICBhZGRyZXNzLFxuICAgICAgICAgICAgICAgIGNoYWluSWQsXG4gICAgICAgICAgICAgICAgY2hhaW5OYW1lc3BhY2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHN5bmNBY2NvdW50SW5mbyhhZGRyZXNzLCBjaGFpbklkLCBjaGFpbk5hbWVzcGFjZSkge1xuICAgICAgICBjb25zdCBjYWlwQWRkcmVzcyA9IHRoaXMuZ2V0Q2FpcEFkZHJlc3MoY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICBjb25zdCBuZXdDaGFpbklkID0gY2hhaW5JZCB8fCBjYWlwQWRkcmVzcz8uc3BsaXQoJzonKVsxXTtcbiAgICAgICAgaWYgKCFuZXdDaGFpbklkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3Q2FpcEFkZHJlc3MgPSBgJHtjaGFpbk5hbWVzcGFjZX06JHtuZXdDaGFpbklkfToke2FkZHJlc3N9YDtcbiAgICAgICAgdGhpcy5zZXRDYWlwQWRkcmVzcyhuZXdDYWlwQWRkcmVzcywgY2hhaW5OYW1lc3BhY2UsIHRydWUpO1xuICAgICAgICBhd2FpdCB0aGlzLnN5bmNJZGVudGl0eSh7XG4gICAgICAgICAgICBhZGRyZXNzLFxuICAgICAgICAgICAgY2hhaW5JZDogbmV3Q2hhaW5JZCxcbiAgICAgICAgICAgIGNoYWluTmFtZXNwYWNlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzeW5jUmVvd25OYW1lKGFkZHJlc3MsIGNoYWluTmFtZXNwYWNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZWdpc3RlcmVkV2NOYW1lcyA9IGF3YWl0IHRoaXMuZ2V0UmVvd25OYW1lKGFkZHJlc3MpO1xuICAgICAgICAgICAgaWYgKHJlZ2lzdGVyZWRXY05hbWVzWzBdKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2NOYW1lID0gcmVnaXN0ZXJlZFdjTmFtZXNbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9maWxlTmFtZSh3Y05hbWUubmFtZSwgY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9maWxlTmFtZShudWxsLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9maWxlTmFtZShudWxsLCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3luY0Nvbm5lY3RlZFdhbGxldEluZm8oY2hhaW5OYW1lc3BhY2UpIHtcbiAgICAgICAgY29uc3QgY29ubmVjdG9ySWQgPSBDb25uZWN0b3JDb250cm9sbGVyLmdldENvbm5lY3RvcklkKGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgY29uc3QgcHJvdmlkZXJUeXBlID0gUHJvdmlkZXJDb250cm9sbGVyLmdldFByb3ZpZGVySWQoY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICBpZiAocHJvdmlkZXJUeXBlID09PSBVdGlsQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfVFlQRV9BTk5PVU5DRUQgfHxcbiAgICAgICAgICAgIHByb3ZpZGVyVHlwZSA9PT0gVXRpbENvbnN0YW50c1V0aWwuQ09OTkVDVE9SX1RZUEVfSU5KRUNURUQpIHtcbiAgICAgICAgICAgIGlmIChjb25uZWN0b3JJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RvcnMgPSB0aGlzLmdldENvbm5lY3RvcnMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0b3IgPSBjb25uZWN0b3JzLmZpbmQoYyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQ29ubmVjdG9ySWQgPSBjLmlkID09PSBjb25uZWN0b3JJZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSZG5zID0gYy5pbmZvPy5yZG5zID09PSBjb25uZWN0b3JJZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzTXVsdGlDaGFpbkNvbm5lY3RvciA9IGMuY29ubmVjdG9ycz8uc29tZShfYyA9PiBfYy5pZCA9PT0gY29ubmVjdG9ySWQgfHwgX2MuaW5mbz8ucmRucyA9PT0gY29ubmVjdG9ySWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNDb25uZWN0b3JJZCB8fCBpc1JkbnMgfHwgQm9vbGVhbihoYXNNdWx0aUNoYWluQ29ubmVjdG9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgaW5mbywgbmFtZSwgaW1hZ2VVcmwgfSA9IGNvbm5lY3RvcjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9IGltYWdlVXJsIHx8IHRoaXMuZ2V0Q29ubmVjdG9ySW1hZ2UoY29ubmVjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb25uZWN0ZWRXYWxsZXRJbmZvKHsgbmFtZSwgaWNvbiwgLi4uaW5mbyB9LCBjaGFpbk5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByb3ZpZGVyVHlwZSA9PT0gVXRpbENvbnN0YW50c1V0aWwuQ09OTkVDVE9SX1RZUEVfV0FMTEVUX0NPTk5FQ1QpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gUHJvdmlkZXJDb250cm9sbGVyLmdldFByb3ZpZGVyKGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgICAgIGlmIChwcm92aWRlcj8uc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29ubmVjdGVkV2FsbGV0SW5mbyh7XG4gICAgICAgICAgICAgICAgICAgIC4uLnByb3ZpZGVyLnNlc3Npb24ucGVlci5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcHJvdmlkZXIuc2Vzc2lvbi5wZWVyLm1ldGFkYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGljb246IHByb3ZpZGVyLnNlc3Npb24ucGVlci5tZXRhZGF0YS5pY29ucz8uWzBdXG4gICAgICAgICAgICAgICAgfSwgY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbm5lY3RvcklkKSB7XG4gICAgICAgICAgICBpZiAoY29ubmVjdG9ySWQgPT09IENvbnN0YW50c1V0aWwuQ09OTkVDVE9SX0lELkNPSU5CQVNFX1NESyB8fFxuICAgICAgICAgICAgICAgIGNvbm5lY3RvcklkID09PSBDb25zdGFudHNVdGlsLkNPTk5FQ1RPUl9JRC5DT0lOQkFTRSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RvciA9IHRoaXMuZ2V0Q29ubmVjdG9ycygpLmZpbmQoYyA9PiBjLmlkID09PSBjb25uZWN0b3JJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGNvbm5lY3Rvcj8ubmFtZSB8fCAnQ29pbmJhc2UgV2FsbGV0JztcbiAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gY29ubmVjdG9yPy5pbWFnZVVybCB8fCB0aGlzLmdldENvbm5lY3RvckltYWdlKGNvbm5lY3Rvcik7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IGNvbm5lY3Rvcj8uaW5mbztcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbm5lY3RlZFdhbGxldEluZm8oe1xuICAgICAgICAgICAgICAgICAgICAuLi5pbmZvLFxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgfSwgY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHN5bmNCYWxhbmNlKHBhcmFtcykge1xuICAgICAgICBjb25zdCBjYWlwTmV0d29yayA9IE5ldHdvcmtVdGlsLmdldE5ldHdvcmtzQnlOYW1lc3BhY2UodGhpcy5nZXRDYWlwTmV0d29ya3MoKSwgcGFyYW1zLmNoYWluTmFtZXNwYWNlKS5maW5kKG4gPT4gbi5pZC50b1N0cmluZygpID09PSBwYXJhbXMuY2hhaW5JZD8udG9TdHJpbmcoKSk7XG4gICAgICAgIGlmICghY2FpcE5ldHdvcmsgfHwgIXBhcmFtcy5jaGFpbklkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVOYXRpdmVCYWxhbmNlKHBhcmFtcy5hZGRyZXNzLCBwYXJhbXMuY2hhaW5JZCwgcGFyYW1zLmNoYWluTmFtZXNwYWNlKTtcbiAgICB9XG4gICAgYXN5bmMgcmVhZHkoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVhZHlQcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVOYXRpdmVCYWxhbmNlKGFkZHJlc3MsIGNoYWluSWQsIG5hbWVzcGFjZSkge1xuICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRBZGFwdGVyKG5hbWVzcGFjZSk7XG4gICAgICAgIGNvbnN0IGNhaXBOZXR3b3JrID0gQ2hhaW5Db250cm9sbGVyLmdldENhaXBOZXR3b3JrQnlOYW1lc3BhY2UobmFtZXNwYWNlLCBjaGFpbklkKTtcbiAgICAgICAgaWYgKGFkYXB0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCBhZGFwdGVyLmdldEJhbGFuY2Uoe1xuICAgICAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICAgICAgY2hhaW5JZCxcbiAgICAgICAgICAgICAgICBjYWlwTmV0d29yayxcbiAgICAgICAgICAgICAgICB0b2tlbnM6IHRoaXMub3B0aW9ucy50b2tlbnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRCYWxhbmNlKGJhbGFuY2UuYmFsYW5jZSwgYmFsYW5jZS5zeW1ib2wsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgICByZXR1cm4gYmFsYW5jZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyAtLSBVbml2ZXJzYWwgUHJvdmlkZXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVVuaXZlcnNhbEFkYXB0ZXIoKSB7XG4gICAgICAgIGNvbnN0IGxvZ2dlciA9IExvZ2dlclV0aWwuY3JlYXRlTG9nZ2VyKChlcnJvciwgLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVBbGVydEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKC4uLmFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdW5pdmVyc2FsUHJvdmlkZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgcHJvamVjdElkOiB0aGlzLm9wdGlvbnM/LnByb2plY3RJZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5vcHRpb25zPy5tZXRhZGF0YSA/IHRoaXMub3B0aW9ucz8ubWV0YWRhdGEubmFtZSA6ICcnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLm9wdGlvbnM/Lm1ldGFkYXRhID8gdGhpcy5vcHRpb25zPy5tZXRhZGF0YS5kZXNjcmlwdGlvbiA6ICcnLFxuICAgICAgICAgICAgICAgIHVybDogdGhpcy5vcHRpb25zPy5tZXRhZGF0YSA/IHRoaXMub3B0aW9ucz8ubWV0YWRhdGEudXJsIDogJycsXG4gICAgICAgICAgICAgICAgaWNvbnM6IHRoaXMub3B0aW9ucz8ubWV0YWRhdGEgPyB0aGlzLm9wdGlvbnM/Lm1ldGFkYXRhLmljb25zIDogWycnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxvZ2dlclxuICAgICAgICB9O1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRNYW51YWxXQ0NvbnRyb2woQm9vbGVhbih0aGlzLm9wdGlvbnM/Lm1hbnVhbFdDQ29udHJvbCkpO1xuICAgICAgICB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyID1cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy51bml2ZXJzYWxQcm92aWRlciA/PyAoYXdhaXQgVW5pdmVyc2FsUHJvdmlkZXIuaW5pdCh1bml2ZXJzYWxQcm92aWRlck9wdGlvbnMpKTtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxEaXNjb25uZWN0ID0gdGhpcy51bml2ZXJzYWxQcm92aWRlci5kaXNjb25uZWN0LmJpbmQodGhpcy51bml2ZXJzYWxQcm92aWRlcik7XG4gICAgICAgIHRoaXMudW5pdmVyc2FsUHJvdmlkZXIuZGlzY29ubmVjdCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG9yaWdpbmFsRGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBbHJlYWR5RGlzY29ubmVjdGVkID0gZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnTWlzc2luZyBvciBpbnZhbGlkLiBSZWNvcmQgd2FzIHJlY2VudGx5IGRlbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWxyZWFkeURpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLmVuYWJsZVJlY29ubmVjdCA9PT0gZmFsc2UgJiYgdGhpcy51bml2ZXJzYWxQcm92aWRlci5zZXNzaW9uKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbldhbGxldENvbm5lY3QoKTtcbiAgICB9XG4gICAgbGlzdGVuV2FsbGV0Q29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMudW5pdmVyc2FsUHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhaW5OYW1lc3BhY2VzLmZvckVhY2gobmFtZXNwYWNlID0+IHtcbiAgICAgICAgICAgICAgICBXY0hlbHBlcnNVdGlsLmxpc3RlbldjUHJvdmlkZXIoe1xuICAgICAgICAgICAgICAgICAgICB1bml2ZXJzYWxQcm92aWRlcjogdGhpcy51bml2ZXJzYWxQcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICBvbkRpc3BsYXlVcmk6IHVyaSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDb25uZWN0aW9uQ29udHJvbGxlci5zZXRVcmkodXJpKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25Db25uZWN0OiBhY2NvdW50cyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGFkZHJlc3MgfSA9IENvcmVIZWxwZXJVdGlsLmdldEFjY291bnQoYWNjb3VudHNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuYW1lc3BhY2Ugb2YgdGhpcy5jaGFpbk5hbWVzcGFjZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdG9yYWdlVXRpbC5yZW1vdmVEaXNjb25uZWN0ZWRDb25uZWN0b3JJZChDb25zdGFudHNVdGlsLkNPTk5FQ1RPUl9JRC5XQUxMRVRfQ09OTkVDVCwgbmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIENvbm5lY3Rpb25Db250cm9sbGVyLmZpbmFsaXplV2NDb25uZWN0aW9uKGFkZHJlc3MpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkRpc2Nvbm5lY3Q6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDaGFpbkNvbnRyb2xsZXIuc3RhdGUubm9BZGFwdGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRBY2NvdW50KG5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBDb25uZWN0aW9uQ29udHJvbGxlci5yZXNldFdjQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkNoYWluQ2hhbmdlZDogY2hhaW5JZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVOYW1lc3BhY2UgPSBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW47XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0N1cnJlbnRDb25uZWN0b3JXYWxsZXRDb25uZWN0ID0gYWN0aXZlTmFtZXNwYWNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29ubmVjdG9yQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDb25uZWN0b3JJZHNbYWN0aXZlTmFtZXNwYWNlXSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfSUQuV0FMTEVUX0NPTk5FQ1Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlTmFtZXNwYWNlID09PSBuYW1lc3BhY2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQ2hhaW5Db250cm9sbGVyLnN0YXRlLm5vQWRhcHRlcnMgfHwgaXNDdXJyZW50Q29ubmVjdG9yV2FsbGV0Q29ubmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWlwTmV0d29yayA9IHRoaXMuZ2V0Q2FpcE5ldHdvcmtzKCkuZmluZChuID0+IG4uaWQudG9TdHJpbmcoKSA9PT0gY2hhaW5JZC50b1N0cmluZygpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uY2FpcE5ldHdvcmtJZC50b1N0cmluZygpID09PSBjaGFpbklkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDYWlwTmV0d29yayA9IHRoaXMuZ2V0Q2FpcE5ldHdvcmsoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhaXBOZXR3b3JrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VW5zdXBwb3J0ZWROZXR3b3JrKGNoYWluSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2FpcE5ldHdvcms/LmlkLnRvU3RyaW5nKCkgIT09IGNhaXBOZXR3b3JrPy5pZC50b1N0cmluZygpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDYWlwTmV0d29yaz8uY2hhaW5OYW1lc3BhY2UgPT09IGNhaXBOZXR3b3JrPy5jaGFpbk5hbWVzcGFjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENhaXBOZXR3b3JrKGNhaXBOZXR3b3JrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uQWNjb3VudHNDaGFuZ2VkOiBhY2NvdW50cyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVOYW1lc3BhY2UgPSBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW47XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0N1cnJlbnRDb25uZWN0b3JXYWxsZXRDb25uZWN0ID0gYWN0aXZlTmFtZXNwYWNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29ubmVjdG9yQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDb25uZWN0b3JJZHNbYWN0aXZlTmFtZXNwYWNlXSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfSUQuV0FMTEVUX0NPTk5FQ1Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlTmFtZXNwYWNlID09PSBuYW1lc3BhY2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQ2hhaW5Db250cm9sbGVyLnN0YXRlLm5vQWRhcHRlcnMgfHwgaXNDdXJyZW50Q29ubmVjdG9yV2FsbGV0Q29ubmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gYWNjb3VudHM/LlswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNBY2NvdW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGFjY291bnQuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IGFjY291bnQuY2hhaW5JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluTmFtZXNwYWNlOiBhY2NvdW50LmNoYWluTmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlVW5pdmVyc2FsUHJvdmlkZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy51bml2ZXJzYWxQcm92aWRlckluaXRQcm9taXNlICYmXG4gICAgICAgICAgICBDb3JlSGVscGVyVXRpbC5pc0NsaWVudCgpICYmXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnM/LnByb2plY3RJZCkge1xuICAgICAgICAgICAgdGhpcy51bml2ZXJzYWxQcm92aWRlckluaXRQcm9taXNlID0gdGhpcy5pbml0aWFsaXplVW5pdmVyc2FsQWRhcHRlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnVuaXZlcnNhbFByb3ZpZGVySW5pdFByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIGdldFVuaXZlcnNhbFByb3ZpZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMudW5pdmVyc2FsUHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVVbml2ZXJzYWxQcm92aWRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdJTlRFUk5BTF9TREtfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclR5cGU6ICdVbml2ZXJzYWxQcm92aWRlckluaXRFcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnVW5rbm93bicsXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmNhdWdodDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQXBwS2l0OmdldFVuaXZlcnNhbFByb3ZpZGVyIC0gQ2Fubm90IGNyZWF0ZSBwcm92aWRlcicsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudW5pdmVyc2FsUHJvdmlkZXI7XG4gICAgfVxuICAgIGdldERpc2FibGVkQ2FpcE5ldHdvcmtzKCkge1xuICAgICAgICBjb25zdCBhcHByb3ZlZENhaXBOZXR3b3JrSWRzID0gQ2hhaW5Db250cm9sbGVyLmdldEFsbEFwcHJvdmVkQ2FpcE5ldHdvcmtJZHMoKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdGVkQ2FpcE5ldHdvcmtzID0gQ2hhaW5Db250cm9sbGVyLmdldEFsbFJlcXVlc3RlZENhaXBOZXR3b3JrcygpO1xuICAgICAgICBjb25zdCBzb3J0ZWROZXR3b3JrcyA9IENvcmVIZWxwZXJVdGlsLnNvcnRSZXF1ZXN0ZWROZXR3b3JrcyhhcHByb3ZlZENhaXBOZXR3b3JrSWRzLCByZXF1ZXN0ZWRDYWlwTmV0d29ya3MpO1xuICAgICAgICByZXR1cm4gc29ydGVkTmV0d29ya3MuZmlsdGVyKG5ldHdvcmsgPT4gQ2hhaW5Db250cm9sbGVyLmlzQ2FpcE5ldHdvcmtEaXNhYmxlZChuZXR3b3JrKSk7XG4gICAgfVxuICAgIC8vIC0gVXRpbHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGhhbmRsZUFsZXJ0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlZFVuaXZlcnNhbFByb3ZpZGVyRXJyb3IgPSBPYmplY3QuZW50cmllcyhFcnJvclV0aWwuVW5pdmVyc2FsUHJvdmlkZXJFcnJvcnMpLmZpbmQoKFssIHsgbWVzc2FnZSB9XSkgPT4gZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhtZXNzYWdlKSk7XG4gICAgICAgIGNvbnN0IFtlcnJvcktleSwgZXJyb3JWYWx1ZV0gPSBtYXRjaGVkVW5pdmVyc2FsUHJvdmlkZXJFcnJvciA/PyBbXTtcbiAgICAgICAgY29uc3QgeyBtZXNzYWdlLCBhbGVydEVycm9yS2V5IH0gPSBlcnJvclZhbHVlID8/IHt9O1xuICAgICAgICBpZiAoZXJyb3JLZXkgJiYgbWVzc2FnZSAmJiAhdGhpcy5yZXBvcnRlZEFsZXJ0RXJyb3JzW2Vycm9yS2V5XSkge1xuICAgICAgICAgICAgY29uc3QgYWxlcnRFcnJvciA9IEVycm9yVXRpbC5BTEVSVF9FUlJPUlNbYWxlcnRFcnJvcktleV07XG4gICAgICAgICAgICBpZiAoYWxlcnRFcnJvcikge1xuICAgICAgICAgICAgICAgIEFsZXJ0Q29udHJvbGxlci5vcGVuKGFsZXJ0RXJyb3IsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVwb3J0ZWRBbGVydEVycm9yc1tlcnJvcktleV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldEFkYXB0ZXIobmFtZXNwYWNlKSB7XG4gICAgICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNoYWluQWRhcHRlcnM/LltuYW1lc3BhY2VdO1xuICAgIH1cbiAgICBjcmVhdGVBZGFwdGVyKGJsdWVwcmludCkge1xuICAgICAgICBpZiAoIWJsdWVwcmludCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IGJsdWVwcmludC5uYW1lc3BhY2U7XG4gICAgICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jcmVhdGVDbGllbnRzKCk7XG4gICAgICAgIGNvbnN0IGFkYXB0ZXJCbHVlcHJpbnQgPSBibHVlcHJpbnQ7XG4gICAgICAgIGFkYXB0ZXJCbHVlcHJpbnQubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuICAgICAgICBhZGFwdGVyQmx1ZXByaW50LmNvbnN0cnVjdCh7XG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IHRoaXMub3B0aW9ucz8ucHJvamVjdElkLFxuICAgICAgICAgICAgbmV0d29ya3M6IHRoaXMuY2FpcE5ldHdvcmtzPy5maWx0ZXIoKHsgY2hhaW5OYW1lc3BhY2UgfSkgPT4gY2hhaW5OYW1lc3BhY2UgPT09IG5hbWVzcGFjZSlcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghdGhpcy5jaGFpbk5hbWVzcGFjZXMuaW5jbHVkZXMobmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgdGhpcy5jaGFpbk5hbWVzcGFjZXMucHVzaChuYW1lc3BhY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNoYWluQWRhcHRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhaW5BZGFwdGVyc1tuYW1lc3BhY2VdID0gYWRhcHRlckJsdWVwcmludDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyAtLSBQdWJsaWMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGFzeW5jIG9wZW4ob3B0aW9ucykge1xuICAgICAgICBhd2FpdCB0aGlzLmluamVjdE1vZGFsVWkoKTtcbiAgICAgICAgaWYgKG9wdGlvbnM/LnVyaSkge1xuICAgICAgICAgICAgQ29ubmVjdGlvbkNvbnRyb2xsZXIuc2V0VXJpKG9wdGlvbnMudXJpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGlzU3dhcCwgaXNTZW5kIH0gPSB0aGlzLnRvTW9kYWxPcHRpb25zKCk7XG4gICAgICAgIGlmIChpc1N3YXAob3B0aW9ucykpIHtcbiAgICAgICAgICAgIHJldHVybiBNb2RhbENvbnRyb2xsZXIub3Blbih7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7IHN3YXA6IG9wdGlvbnMuYXJndW1lbnRzIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzU2VuZChvcHRpb25zKSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJndW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3BlblNlbmQob3B0aW9ucy5hcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNb2RhbENvbnRyb2xsZXIub3BlbihvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgY2xvc2UoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5qZWN0TW9kYWxVaSgpO1xuICAgICAgICBNb2RhbENvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICB9XG4gICAgc2V0TG9hZGluZyhsb2FkaW5nLCBuYW1lc3BhY2UpIHtcbiAgICAgICAgTW9kYWxDb250cm9sbGVyLnNldExvYWRpbmcobG9hZGluZywgbmFtZXNwYWNlKTtcbiAgICB9XG4gICAgYXN5bmMgZGlzY29ubmVjdChjaGFpbk5hbWVzcGFjZSkge1xuICAgICAgICBhd2FpdCBDb25uZWN0aW9uQ29udHJvbGxlci5kaXNjb25uZWN0KHsgbmFtZXNwYWNlOiBjaGFpbk5hbWVzcGFjZSB9KTtcbiAgICB9XG4gICAgZ2V0U0lXWCgpIHtcbiAgICAgICAgcmV0dXJuIE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLnNpd3g7XG4gICAgfVxuICAgIC8vIC0tIHJldmlldyB0aGVzZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgZ2V0RXJyb3IoKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgZ2V0Q2hhaW5JZCgpIHtcbiAgICAgICAgcmV0dXJuIENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDYWlwTmV0d29yaz8uaWQ7XG4gICAgfVxuICAgIGFzeW5jIHN3aXRjaE5ldHdvcmsoYXBwS2l0TmV0d29yaywgeyB0aHJvd09uRmFpbHVyZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCBuZXR3b3JrID0gdGhpcy5nZXRDYWlwTmV0d29ya3MoKS5maW5kKG4gPT4gbi5pZCA9PT0gYXBwS2l0TmV0d29yay5pZCk7XG4gICAgICAgIGlmICghbmV0d29yaykge1xuICAgICAgICAgICAgQWxlcnRDb250cm9sbGVyLm9wZW4oRXJyb3JVdGlsLkFMRVJUX0VSUk9SUy5TV0lUQ0hfTkVUV09SS19OT1RfRk9VTkQsICdlcnJvcicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IENoYWluQ29udHJvbGxlci5zd2l0Y2hBY3RpdmVOZXR3b3JrKG5ldHdvcmssIHsgdGhyb3dPbkZhaWx1cmUgfSk7XG4gICAgfVxuICAgIGdldFdhbGxldFByb3ZpZGVyKCkge1xuICAgICAgICByZXR1cm4gQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluXG4gICAgICAgICAgICA/IFByb3ZpZGVyQ29udHJvbGxlci5zdGF0ZS5wcm92aWRlcnNbQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluXVxuICAgICAgICAgICAgOiBudWxsO1xuICAgIH1cbiAgICBnZXRXYWxsZXRQcm92aWRlclR5cGUoKSB7XG4gICAgICAgIHJldHVybiBQcm92aWRlckNvbnRyb2xsZXIuZ2V0UHJvdmlkZXJJZChDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW4pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVQcm92aWRlcnMoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIFByb3ZpZGVyQ29udHJvbGxlci5zdWJzY3JpYmVQcm92aWRlcnMoY2FsbGJhY2spO1xuICAgIH1cbiAgICBnZXRUaGVtZU1vZGUoKSB7XG4gICAgICAgIHJldHVybiBUaGVtZUNvbnRyb2xsZXIuc3RhdGUudGhlbWVNb2RlO1xuICAgIH1cbiAgICBnZXRUaGVtZVZhcmlhYmxlcygpIHtcbiAgICAgICAgcmV0dXJuIFRoZW1lQ29udHJvbGxlci5zdGF0ZS50aGVtZVZhcmlhYmxlcztcbiAgICB9XG4gICAgc2V0VGhlbWVNb2RlKHRoZW1lTW9kZSkge1xuICAgICAgICBUaGVtZUNvbnRyb2xsZXIuc2V0VGhlbWVNb2RlKHRoZW1lTW9kZSk7XG4gICAgICAgIHNldENvbG9yVGhlbWUoVGhlbWVDb250cm9sbGVyLnN0YXRlLnRoZW1lTW9kZSk7XG4gICAgfVxuICAgIHNldFRlcm1zQ29uZGl0aW9uc1VybCh0ZXJtc0NvbmRpdGlvbnNVcmwpIHtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0VGVybXNDb25kaXRpb25zVXJsKHRlcm1zQ29uZGl0aW9uc1VybCk7XG4gICAgfVxuICAgIHNldFByaXZhY3lQb2xpY3lVcmwocHJpdmFjeVBvbGljeVVybCkge1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRQcml2YWN5UG9saWN5VXJsKHByaXZhY3lQb2xpY3lVcmwpO1xuICAgIH1cbiAgICBzZXRUaGVtZVZhcmlhYmxlcyh0aGVtZVZhcmlhYmxlcykge1xuICAgICAgICBUaGVtZUNvbnRyb2xsZXIuc2V0VGhlbWVWYXJpYWJsZXModGhlbWVWYXJpYWJsZXMpO1xuICAgICAgICBzZXRUaGVtZVZhcmlhYmxlcyhUaGVtZUNvbnRyb2xsZXIuc3RhdGUudGhlbWVWYXJpYWJsZXMpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVUaGVtZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gVGhlbWVDb250cm9sbGVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHN1YnNjcmliZUNvbm5lY3Rpb25zKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghdGhpcy5yZW1vdGVGZWF0dXJlcy5tdWx0aVdhbGxldCkge1xuICAgICAgICAgICAgQWxlcnRDb250cm9sbGVyLm9wZW4oQ29uc3RhbnRzVXRpbC5SRU1PVEVfRkVBVFVSRVNfQUxFUlRTLk1VTFRJX1dBTExFVF9OT1RfRU5BQkxFRC5ERUZBVUxULCAnaW5mbycpO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ29ubmVjdGlvbkNvbnRyb2xsZXIuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZ2V0V2FsbGV0SW5mbyhuYW1lc3BhY2UpIHtcbiAgICAgICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgICAgICAgcmV0dXJuIENoYWluQ29udHJvbGxlci5zdGF0ZS5jaGFpbnMuZ2V0KG5hbWVzcGFjZSk/LmFjY291bnRTdGF0ZT8uY29ubmVjdGVkV2FsbGV0SW5mbztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhY2NvdW50RGF0YSA9IENoYWluQ29udHJvbGxlci5nZXRBY2NvdW50RGF0YSgpO1xuICAgICAgICByZXR1cm4gYWNjb3VudERhdGE/LmNvbm5lY3RlZFdhbGxldEluZm87XG4gICAgfVxuICAgIGdldEFjY291bnQoX25hbWVzcGFjZSkge1xuICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSBfbmFtZXNwYWNlIHx8IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbjtcbiAgICAgICAgY29uc3QgYXV0aENvbm5lY3RvciA9IENvbm5lY3RvckNvbnRyb2xsZXIuZ2V0QXV0aENvbm5lY3RvcihuYW1lc3BhY2UpO1xuICAgICAgICBjb25zdCBhY2NvdW50U3RhdGUgPSBDaGFpbkNvbnRyb2xsZXIuZ2V0QWNjb3VudERhdGEobmFtZXNwYWNlKTtcbiAgICAgICAgY29uc3QgYWN0aXZlQ29ubmVjdG9ySWQgPSBTdG9yYWdlVXRpbC5nZXRDb25uZWN0ZWRDb25uZWN0b3JJZChDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2hhaW4pO1xuICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IENvbm5lY3Rpb25Db250cm9sbGVyLmdldENvbm5lY3Rpb25zKG5hbWVzcGFjZSk7XG4gICAgICAgIGlmICghbmFtZXNwYWNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FwcEtpdDpnZXRBY2NvdW50IC0gbmFtZXNwYWNlIGlzIHJlcXVpcmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWxsQWNjb3VudHMgPSBjb25uZWN0aW9ucy5mbGF0TWFwKGNvbm5lY3Rpb24gPT4gY29ubmVjdGlvbi5hY2NvdW50cy5tYXAoKHsgYWRkcmVzcywgdHlwZSwgcHVibGljS2V5IH0pID0+IENvcmVIZWxwZXJVdGlsLmNyZWF0ZUFjY291bnQobmFtZXNwYWNlLCBhZGRyZXNzLCAodHlwZSB8fCAnZW9hJyksIHB1YmxpY0tleSkpKTtcbiAgICAgICAgaWYgKCFhY2NvdW50U3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFsbEFjY291bnRzLFxuICAgICAgICAgICAgY2FpcEFkZHJlc3M6IGFjY291bnRTdGF0ZS5jYWlwQWRkcmVzcyxcbiAgICAgICAgICAgIGFkZHJlc3M6IENvcmVIZWxwZXJVdGlsLmdldFBsYWluQWRkcmVzcyhhY2NvdW50U3RhdGUuY2FpcEFkZHJlc3MpLFxuICAgICAgICAgICAgaXNDb25uZWN0ZWQ6IEJvb2xlYW4oYWNjb3VudFN0YXRlLmNhaXBBZGRyZXNzKSxcbiAgICAgICAgICAgIHN0YXR1czogYWNjb3VudFN0YXRlLnN0YXR1cyxcbiAgICAgICAgICAgIGVtYmVkZGVkV2FsbGV0SW5mbzogYXV0aENvbm5lY3RvciAmJiBhY3RpdmVDb25uZWN0b3JJZCA9PT0gQ29uc3RhbnRzVXRpbC5DT05ORUNUT1JfSUQuQVVUSFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICB1c2VyOiBhY2NvdW50U3RhdGUudXNlclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYWNjb3VudFN0YXRlLnVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBHZXR0aW5nIHRoZSB1c2VybmFtZSBmcm9tIHRoZSBjaGFpbiBjb250cm9sbGVyIHdvcmtzIHdlbGwgZm9yIHNvY2lhbCBsb2dpbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYnV0IEZhcmNhc3RlciB1c2VzIGEgZGlmZmVyZW50IGNvbm5lY3Rpb24gZmxvdyBhbmQgZG9lc24ndCBlbWl0IHRoZSB1c2VybmFtZSB2aWEgZXZlbnRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFNpbmNlIHRoZSB1c2VybmFtZSBpcyBzdG9yZWQgaW4gbG9jYWwgc3RvcmFnZSBiZWZvcmUgdGhlIGNoYWluIGNvbnRyb2xsZXIgdXBkYXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBpdCdzIHNhZmUgdG8gdXNlIHRoZSBsb2NhbCBzdG9yYWdlIHZhbHVlIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IFN0b3JhZ2VVdGlsLmdldENvbm5lY3RlZFNvY2lhbFVzZXJuYW1lKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBhdXRoUHJvdmlkZXI6IGFjY291bnRTdGF0ZS5zb2NpYWxQcm92aWRlciB8fCAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50VHlwZTogZ2V0UHJlZmVycmVkQWNjb3VudFR5cGUobmFtZXNwYWNlKSxcbiAgICAgICAgICAgICAgICAgICAgaXNTbWFydEFjY291bnREZXBsb3llZDogQm9vbGVhbihhY2NvdW50U3RhdGUuc21hcnRBY2NvdW50RGVwbG95ZWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN1YnNjcmliZUFjY291bnQoY2FsbGJhY2ssIG5hbWVzcGFjZSkge1xuICAgICAgICBjb25zdCB1bnN1YkFyciA9IFtdO1xuICAgICAgICBjb25zdCB1cGRhdGVWYWwgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5nZXRBY2NvdW50KG5hbWVzcGFjZSk7XG4gICAgICAgICAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayhhY2NvdW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgICAgICAgY29uc3QgdW5zdWIgPSBDaGFpbkNvbnRyb2xsZXIuc3Vic2NyaWJlQ2hhaW5Qcm9wKCdhY2NvdW50U3RhdGUnLCB1cGRhdGVWYWwsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgICB1bnN1YkFyci5wdXNoKHVuc3ViKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHVuc3ViID0gQ2hhaW5Db250cm9sbGVyLnN1YnNjcmliZSh1cGRhdGVWYWwpO1xuICAgICAgICAgICAgdW5zdWJBcnIucHVzaCh1bnN1Yik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5zdWIgPSBDb25uZWN0b3JDb250cm9sbGVyLnN1YnNjcmliZSh1cGRhdGVWYWwpO1xuICAgICAgICB1bnN1YkFyci5wdXNoKHVuc3ViKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVuc3ViQXJyLmZvckVhY2goZm4gPT4gZm4oKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN1YnNjcmliZU5ldHdvcmsoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIENoYWluQ29udHJvbGxlci5zdWJzY3JpYmUoKHsgYWN0aXZlQ2FpcE5ldHdvcmsgfSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgIGNhaXBOZXR3b3JrOiBhY3RpdmVDYWlwTmV0d29yayxcbiAgICAgICAgICAgICAgICBjaGFpbklkOiBhY3RpdmVDYWlwTmV0d29yaz8uaWQsXG4gICAgICAgICAgICAgICAgY2FpcE5ldHdvcmtJZDogYWN0aXZlQ2FpcE5ldHdvcms/LmNhaXBOZXR3b3JrSWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3Vic2NyaWJlV2FsbGV0SW5mbyhjYWxsYmFjaywgbmFtZXNwYWNlKSB7XG4gICAgICAgIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBDaGFpbkNvbnRyb2xsZXIuc3Vic2NyaWJlQ2hhaW5Qcm9wKCdhY2NvdW50U3RhdGUnLCBhY2NvdW50U3RhdGUgPT4gY2FsbGJhY2soYWNjb3VudFN0YXRlPy5jb25uZWN0ZWRXYWxsZXRJbmZvKSwgbmFtZXNwYWNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ2hhaW5Db250cm9sbGVyLnN1YnNjcmliZUNoYWluUHJvcCgnYWNjb3VudFN0YXRlJywgYWNjb3VudFN0YXRlID0+IGNhbGxiYWNrKGFjY291bnRTdGF0ZT8uY29ubmVjdGVkV2FsbGV0SW5mbykpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVTaG91bGRVcGRhdGVUb0FkZHJlc3MoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIENoYWluQ29udHJvbGxlci5zdWJzY3JpYmVDaGFpblByb3AoJ2FjY291bnRTdGF0ZScsIGFjY291bnRTdGF0ZSA9PiBjYWxsYmFjayhhY2NvdW50U3RhdGU/LnNob3VsZFVwZGF0ZVRvQWRkcmVzcykpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVDYWlwTmV0d29ya0NoYW5nZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gQ2hhaW5Db250cm9sbGVyLnN1YnNjcmliZUtleSgnYWN0aXZlQ2FpcE5ldHdvcmsnLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGdldFN0YXRlKCkge1xuICAgICAgICByZXR1cm4gUHVibGljU3RhdGVDb250cm9sbGVyLnN0YXRlO1xuICAgIH1cbiAgICBnZXRSZW1vdGVGZWF0dXJlcygpIHtcbiAgICAgICAgcmV0dXJuIE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLnJlbW90ZUZlYXR1cmVzO1xuICAgIH1cbiAgICBzdWJzY3JpYmVTdGF0ZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gUHVibGljU3RhdGVDb250cm9sbGVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHN1YnNjcmliZVJlbW90ZUZlYXR1cmVzKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBPcHRpb25zQ29udHJvbGxlci5zdWJzY3JpYmVLZXkoJ3JlbW90ZUZlYXR1cmVzJywgY2FsbGJhY2spO1xuICAgIH1cbiAgICBzaG93RXJyb3JNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgU25hY2tDb250cm9sbGVyLnNob3dFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgc2hvd1N1Y2Nlc3NNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgU25hY2tDb250cm9sbGVyLnNob3dTdWNjZXNzKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXRFdmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4uRXZlbnRzQ29udHJvbGxlci5zdGF0ZSB9O1xuICAgIH1cbiAgICBzdWJzY3JpYmVFdmVudHMoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50c0NvbnRyb2xsZXIuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgcmVwbGFjZShyb3V0ZSkge1xuICAgICAgICBSb3V0ZXJDb250cm9sbGVyLnJlcGxhY2Uocm91dGUpO1xuICAgIH1cbiAgICByZWRpcmVjdChyb3V0ZSkge1xuICAgICAgICBSb3V0ZXJDb250cm9sbGVyLnB1c2gocm91dGUpO1xuICAgIH1cbiAgICBwb3BUcmFuc2FjdGlvblN0YWNrKHN0YXR1cykge1xuICAgICAgICBSb3V0ZXJDb250cm9sbGVyLnBvcFRyYW5zYWN0aW9uU3RhY2soc3RhdHVzKTtcbiAgICB9XG4gICAgaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gTW9kYWxDb250cm9sbGVyLnN0YXRlLm9wZW47XG4gICAgfVxuICAgIGlzVHJhbnNhY3Rpb25TdGFja0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gUm91dGVyQ29udHJvbGxlci5zdGF0ZS50cmFuc2FjdGlvblN0YWNrLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgc3RhdGljIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgICB9XG4gICAgdXBkYXRlRmVhdHVyZXMobmV3RmVhdHVyZXMpIHtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0RmVhdHVyZXMobmV3RmVhdHVyZXMpO1xuICAgIH1cbiAgICB1cGRhdGVSZW1vdGVGZWF0dXJlcyhuZXdSZW1vdGVGZWF0dXJlcykge1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRSZW1vdGVGZWF0dXJlcyhuZXdSZW1vdGVGZWF0dXJlcyk7XG4gICAgfVxuICAgIHVwZGF0ZU9wdGlvbnMobmV3T3B0aW9ucykge1xuICAgICAgICBjb25zdCBjdXJyZW50T3B0aW9ucyA9IE9wdGlvbnNDb250cm9sbGVyLnN0YXRlIHx8IHt9O1xuICAgICAgICBjb25zdCB1cGRhdGVkT3B0aW9ucyA9IHsgLi4uY3VycmVudE9wdGlvbnMsIC4uLm5ld09wdGlvbnMgfTtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0T3B0aW9ucyh1cGRhdGVkT3B0aW9ucyk7XG4gICAgfVxuICAgIHNldENvbm5lY3RNZXRob2RzT3JkZXIoY29ubmVjdE1ldGhvZHNPcmRlcikge1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRDb25uZWN0TWV0aG9kc09yZGVyKGNvbm5lY3RNZXRob2RzT3JkZXIpO1xuICAgIH1cbiAgICBzZXRXYWxsZXRGZWF0dXJlc09yZGVyKHdhbGxldEZlYXR1cmVzT3JkZXIpIHtcbiAgICAgICAgT3B0aW9uc0NvbnRyb2xsZXIuc2V0V2FsbGV0RmVhdHVyZXNPcmRlcih3YWxsZXRGZWF0dXJlc09yZGVyKTtcbiAgICB9XG4gICAgc2V0Q29sbGFwc2VXYWxsZXRzKGNvbGxhcHNlV2FsbGV0cykge1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRDb2xsYXBzZVdhbGxldHMoY29sbGFwc2VXYWxsZXRzKTtcbiAgICB9XG4gICAgc2V0U29jaWFsc09yZGVyKHNvY2lhbHNPcmRlcikge1xuICAgICAgICBPcHRpb25zQ29udHJvbGxlci5zZXRTb2NpYWxzT3JkZXIoc29jaWFsc09yZGVyKTtcbiAgICB9XG4gICAgZ2V0Q29ubmVjdE1ldGhvZHNPcmRlcigpIHtcbiAgICAgICAgcmV0dXJuIFdhbGxldFV0aWwuZ2V0Q29ubmVjdE9yZGVyTWV0aG9kKE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLmZlYXR1cmVzLCBDb25uZWN0b3JDb250cm9sbGVyLmdldENvbm5lY3RvcnMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXR3b3JrIHRvIGFuIGV4aXN0aW5nIGFkYXB0ZXIgaW4gQXBwS2l0LlxuICAgICAqIEBwYXJhbSBuYW1lc3BhY2UgLSBUaGUgY2hhaW4gbmFtZXNwYWNlIHRvIGFkZCB0aGUgbmV0d29yayB0byAoZS5nLiAnZWlwMTU1JywgJ3NvbGFuYScpXG4gICAgICogQHBhcmFtIG5ldHdvcmsgLSBUaGUgbmV0d29yayBjb25maWd1cmF0aW9uIHRvIGFkZFxuICAgICAqIEB0aHJvd3MgRXJyb3IgaWYgYWRhcHRlciBmb3IgbmFtZXNwYWNlIGRvZXNuJ3QgZXhpc3RcbiAgICAgKi9cbiAgICBhZGROZXR3b3JrKG5hbWVzcGFjZSwgbmV0d29yaykge1xuICAgICAgICBpZiAodGhpcy5jaGFpbkFkYXB0ZXJzICYmICF0aGlzLmNoYWluQWRhcHRlcnNbbmFtZXNwYWNlXSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBZGFwdGVyIGZvciBuYW1lc3BhY2UgJHtuYW1lc3BhY2V9IGRvZXNuJ3QgZXhpc3RgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleHRlbmRlZE5ldHdvcmsgPSB0aGlzLmV4dGVuZENhaXBOZXR3b3JrKG5ldHdvcmssIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIGlmICghdGhpcy5nZXRDYWlwTmV0d29ya3MoKS5maW5kKG4gPT4gbi5pZCA9PT0gZXh0ZW5kZWROZXR3b3JrLmlkKSkge1xuICAgICAgICAgICAgQ2hhaW5Db250cm9sbGVyLmFkZE5ldHdvcmsoZXh0ZW5kZWROZXR3b3JrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgbmV0d29yayBmcm9tIGFuIGV4aXN0aW5nIGFkYXB0ZXIgaW4gQXBwS2l0LlxuICAgICAqIEBwYXJhbSBuYW1lc3BhY2UgLSBUaGUgY2hhaW4gbmFtZXNwYWNlIHRoZSBuZXR3b3JrIGJlbG9uZ3MgdG9cbiAgICAgKiBAcGFyYW0gbmV0d29ya0lkIC0gVGhlIG5ldHdvcmsgSUQgdG8gcmVtb3ZlXG4gICAgICogQHRocm93cyBFcnJvciBpZiBhZGFwdGVyIGZvciBuYW1lc3BhY2UgZG9lc24ndCBleGlzdCBvciBpZiByZW1vdmluZyBsYXN0IG5ldHdvcmtcbiAgICAgKi9cbiAgICByZW1vdmVOZXR3b3JrKG5hbWVzcGFjZSwgbmV0d29ya0lkKSB7XG4gICAgICAgIGlmICh0aGlzLmNoYWluQWRhcHRlcnMgJiYgIXRoaXMuY2hhaW5BZGFwdGVyc1tuYW1lc3BhY2VdKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFkYXB0ZXIgZm9yIG5hbWVzcGFjZSAke25hbWVzcGFjZX0gZG9lc24ndCBleGlzdGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ldHdvcmtUb1JlbW92ZSA9IHRoaXMuZ2V0Q2FpcE5ldHdvcmtzKCkuZmluZChuID0+IG4uaWQgPT09IG5ldHdvcmtJZCk7XG4gICAgICAgIGlmICghbmV0d29ya1RvUmVtb3ZlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgQ2hhaW5Db250cm9sbGVyLnJlbW92ZU5ldHdvcmsobmFtZXNwYWNlLCBuZXR3b3JrSWQpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcGtpdC1iYXNlLWNsaWVudC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/client/appkit-base-client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/client/appkit-core.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/client/appkit-core.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppKit: () => (/* binding */ AppKit)\n/* harmony export */ });\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ConnectorController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ChainController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ConnectionController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/CoreHelperUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/OptionsController.js\");\n/* harmony import */ var _appkit_base_client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./appkit-base-client.js */ \"(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/client/appkit-base-client.js\");\n\n\n\n// -- Helpers -------------------------------------------------------------------\nlet isInitialized = false;\n// -- Client --------------------------------------------------------------------\nclass AppKit extends _appkit_base_client_js__WEBPACK_IMPORTED_MODULE_0__.AppKitBaseClient {\n    // -- Overrides --------------------------------------------------------------\n    async open(options) {\n        // Only open modal when not connected\n        const isConnected = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_1__.ConnectorController.isConnected();\n        if (!isConnected) {\n            await super.open(options);\n        }\n    }\n    async close() {\n        await super.close();\n        if (this.options.manualWCControl) {\n            const address = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_2__.ChainController.getAccountData(this.activeChainNamespace)?.address;\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_3__.ConnectionController.finalizeWcConnection(address);\n        }\n    }\n    async syncIdentity(_request) {\n        return Promise.resolve();\n    }\n    async syncBalance(_params) {\n        return Promise.resolve();\n    }\n    async injectModalUi() {\n        if (!isInitialized && _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.CoreHelperUtil.isClient()) {\n            await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@reown+appkit-ui@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4_9eb8ccdcd5d7dd856b288f5f3341f953\"), __webpack_require__.e(\"vendor-chunks/lit-html@3.3.2\"), __webpack_require__.e(\"vendor-chunks/@lit+reactive-element@2.1.2\"), __webpack_require__.e(\"vendor-chunks/lit@3.3.0\"), __webpack_require__.e(\"vendor-chunks/@reown+appkit-scaffold-ui@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_77e626513b1c93dc29a4e1d893ef472c\"), __webpack_require__.e(\"vendor-chunks/qrcode@1.5.3\"), __webpack_require__.e(\"vendor-chunks/pngjs@5.0.0\"), __webpack_require__.e(\"vendor-chunks/encode-utf8@1.0.3\"), __webpack_require__.e(\"vendor-chunks/dijkstrajs@1.0.3\")]).then(__webpack_require__.bind(__webpack_require__, /*! @reown/appkit-scaffold-ui/basic */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-scaffold-ui@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_77e626513b1c93dc29a4e1d893ef472c/node_modules/@reown/appkit-scaffold-ui/dist/esm/exports/basic.js\"));\n            await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f\"), __webpack_require__.e(\"vendor-chunks/@reown+appkit-ui@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4_9eb8ccdcd5d7dd856b288f5f3341f953\"), __webpack_require__.e(\"vendor-chunks/lit-html@3.3.2\"), __webpack_require__.e(\"vendor-chunks/@lit+reactive-element@2.1.2\"), __webpack_require__.e(\"vendor-chunks/lit@3.3.0\"), __webpack_require__.e(\"vendor-chunks/@reown+appkit-scaffold-ui@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_77e626513b1c93dc29a4e1d893ef472c\"), __webpack_require__.e(\"vendor-chunks/@reown+appkit-pay@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@_2af2bbb0f375cb7aeca2fd706d9c84f0\")]).then(__webpack_require__.bind(__webpack_require__, /*! @reown/appkit-scaffold-ui/w3m-modal */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-scaffold-ui@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_77e626513b1c93dc29a4e1d893ef472c/node_modules/@reown/appkit-scaffold-ui/dist/esm/exports/w3m-modal.js\"));\n            const isElementCreated = document.querySelector('w3m-modal');\n            if (!isElementCreated) {\n                const modal = document.createElement('w3m-modal');\n                if (!_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_5__.OptionsController.state.disableAppend && !_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_5__.OptionsController.state.enableEmbedded) {\n                    document.body.insertAdjacentElement('beforeend', modal);\n                }\n            }\n            isInitialized = true;\n        }\n    }\n}\n//# sourceMappingURL=appkit-core.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL3NyYy9jbGllbnQvYXBwa2l0LWNvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFzQztBQUNvRztBQUMvRTtBQUMzRDtBQUNBO0FBQ0E7QUFDTyxxQkFBcUIsb0VBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwRUFBbUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0VBQWU7QUFDM0MsWUFBWSwyRUFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHFFQUFjO0FBQzVDLGtCQUFrQiwwaENBQXlDO0FBQzNELGtCQUFrQix3b0NBQTZDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix3RUFBaUIseUJBQXlCLHdFQUFpQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvaG9tZS9iZXJndGF0dC9wcm9qZWN0cy9lbXRweWxhYi9saWtlbGkvbm9kZV9tb2R1bGVzLy5wbnBtL0ByZW93bithcHBraXRAMS44LjE3LXdjLWNpcmN1bGFyLWRlcGVuZGVuY2llcy1maXguMF9AdHlwZXMrcmVhY3RAMTkuMi45X2J1ZmZlcnV0aWxANC4xLl8xOGRhMDI4NzJiNTRmMjcxYzkwOWE1MzlmOTQ1ZTE1Yi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC9kaXN0L2VzbS9zcmMvY2xpZW50L2FwcGtpdC1jb3JlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7fSBmcm9tICdAcmVvd24vYXBwa2l0LWNvbW1vbic7XG5pbXBvcnQgeyBDaGFpbkNvbnRyb2xsZXIsIENvbm5lY3Rpb25Db250cm9sbGVyLCBDb25uZWN0b3JDb250cm9sbGVyLCBDb3JlSGVscGVyVXRpbCwgT3B0aW9uc0NvbnRyb2xsZXIgfSBmcm9tICdAcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzJztcbmltcG9ydCB7IEFwcEtpdEJhc2VDbGllbnQgfSBmcm9tICcuL2FwcGtpdC1iYXNlLWNsaWVudC5qcyc7XG4vLyAtLSBIZWxwZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmxldCBpc0luaXRpYWxpemVkID0gZmFsc2U7XG4vLyAtLSBDbGllbnQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjbGFzcyBBcHBLaXQgZXh0ZW5kcyBBcHBLaXRCYXNlQ2xpZW50IHtcbiAgICAvLyAtLSBPdmVycmlkZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBhc3luYyBvcGVuKG9wdGlvbnMpIHtcbiAgICAgICAgLy8gT25seSBvcGVuIG1vZGFsIHdoZW4gbm90IGNvbm5lY3RlZFxuICAgICAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IENvbm5lY3RvckNvbnRyb2xsZXIuaXNDb25uZWN0ZWQoKTtcbiAgICAgICAgaWYgKCFpc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgYXdhaXQgc3VwZXIub3BlbihvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjbG9zZSgpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tYW51YWxXQ0NvbnRyb2wpIHtcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBDaGFpbkNvbnRyb2xsZXIuZ2V0QWNjb3VudERhdGEodGhpcy5hY3RpdmVDaGFpbk5hbWVzcGFjZSk/LmFkZHJlc3M7XG4gICAgICAgICAgICBDb25uZWN0aW9uQ29udHJvbGxlci5maW5hbGl6ZVdjQ29ubmVjdGlvbihhZGRyZXNzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzeW5jSWRlbnRpdHkoX3JlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBhc3luYyBzeW5jQmFsYW5jZShfcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgYXN5bmMgaW5qZWN0TW9kYWxVaSgpIHtcbiAgICAgICAgaWYgKCFpc0luaXRpYWxpemVkICYmIENvcmVIZWxwZXJVdGlsLmlzQ2xpZW50KCkpIHtcbiAgICAgICAgICAgIGF3YWl0IGltcG9ydCgnQHJlb3duL2FwcGtpdC1zY2FmZm9sZC11aS9iYXNpYycpO1xuICAgICAgICAgICAgYXdhaXQgaW1wb3J0KCdAcmVvd24vYXBwa2l0LXNjYWZmb2xkLXVpL3czbS1tb2RhbCcpO1xuICAgICAgICAgICAgY29uc3QgaXNFbGVtZW50Q3JlYXRlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3czbS1tb2RhbCcpO1xuICAgICAgICAgICAgaWYgKCFpc0VsZW1lbnRDcmVhdGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd3M20tbW9kYWwnKTtcbiAgICAgICAgICAgICAgICBpZiAoIU9wdGlvbnNDb250cm9sbGVyLnN0YXRlLmRpc2FibGVBcHBlbmQgJiYgIU9wdGlvbnNDb250cm9sbGVyLnN0YXRlLmVuYWJsZUVtYmVkZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmVlbmQnLCBtb2RhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHBraXQtY29yZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/client/appkit-core.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/universal-adapter/client.js":
/*!*************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/universal-adapter/client.js ***!
  \*************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UniversalAdapter: () => (/* binding */ UniversalAdapter)\n/* harmony export */ });\n/* harmony import */ var bs58__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bs58 */ \"(ssr)/./node_modules/.pnpm/bs58@6.0.0/node_modules/bs58/src/esm/index.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.44.4_bufferutil@4.1.0_typescript@5.9.3_utf-8-validate@5.0.10_zod@3.25.76/node_modules/viem/_esm/utils/encoding/toHex.js\");\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @reown/appkit-common */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-common@1.8.17-wc-circular-dependencies-fix.0_bufferutil@4.1.0_typescript@_8f594b12ae5e4091be36eb1310763710/node_modules/@reown/appkit-common/dist/esm/src/utils/ConstantsUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/CoreHelperUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/ConstantsUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ChainController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/AdapterController/ChainAdapterBlueprint.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/AdapterController/WalletConnectConnector.js\");\n/* harmony import */ var _utils_ConstantsUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/ConstantsUtil.js */ \"(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/utils/ConstantsUtil.js\");\n\n\n\n\n\n\nclass UniversalAdapter extends _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_2__.AdapterBlueprint {\n    async setUniversalProvider(universalProvider) {\n        if (!this.namespace) {\n            throw new Error('UniversalAdapter:setUniversalProvider - namespace is required');\n        }\n        this.addConnector(new _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_3__.WalletConnectConnector({\n            provider: universalProvider,\n            caipNetworks: this.getCaipNetworks(),\n            namespace: this.namespace\n        }));\n        return Promise.resolve();\n    }\n    async connect(params) {\n        return Promise.resolve({\n            id: 'WALLET_CONNECT',\n            type: 'WALLET_CONNECT',\n            chainId: Number(params.chainId),\n            provider: this.provider,\n            address: ''\n        });\n    }\n    async disconnect() {\n        try {\n            const connector = this.getWalletConnectConnector();\n            await connector.disconnect();\n            this.emit('disconnect');\n        }\n        catch (error) {\n            console.warn('UniversalAdapter:disconnect - error', error);\n        }\n        return { connections: [] };\n    }\n    syncConnections() {\n        return Promise.resolve();\n    }\n    async writeSolanaTransaction() {\n        return Promise.resolve({\n            hash: ''\n        });\n    }\n    async getAccounts({ namespace }) {\n        const provider = this.provider;\n        const addresses = (provider?.session?.namespaces?.[namespace]?.accounts\n            ?.map(account => {\n            const [, , address] = account.split(':');\n            return address;\n        })\n            .filter((address, index, self) => self.indexOf(address) === index) || []);\n        return Promise.resolve({\n            accounts: addresses.map(address => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_4__.CoreHelperUtil.createAccount(namespace, address, namespace === 'bip122' ? 'payment' : 'eoa'))\n        });\n    }\n    async syncConnectors() {\n        return Promise.resolve();\n    }\n    async getBalance(params) {\n        const isBalanceSupported = params.caipNetwork &&\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_5__.ConstantsUtil.BALANCE_SUPPORTED_CHAINS.includes(params.caipNetwork?.chainNamespace);\n        if (!isBalanceSupported || params.caipNetwork?.testnet) {\n            return {\n                balance: '0.00',\n                symbol: params.caipNetwork?.nativeCurrency.symbol || ''\n            };\n        }\n        const accountData = _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ChainController.getAccountData();\n        if (accountData?.balanceLoading &&\n            params.chainId === _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ChainController.state.activeCaipNetwork?.id) {\n            return {\n                balance: accountData?.balance || '0.00',\n                symbol: accountData?.balanceSymbol || ''\n            };\n        }\n        const balances = await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ChainController.fetchTokenBalance();\n        const balance = balances.find(b => b.chainId === `${params.caipNetwork?.chainNamespace}:${params.chainId}` &&\n            b.symbol === params.caipNetwork?.nativeCurrency.symbol);\n        return {\n            balance: balance?.quantity.numeric || '0.00',\n            symbol: balance?.symbol || params.caipNetwork?.nativeCurrency.symbol || ''\n        };\n    }\n    async signMessage(params) {\n        const { provider, message, address } = params;\n        if (!provider) {\n            throw new Error('UniversalAdapter:signMessage - provider is undefined');\n        }\n        let signature = '';\n        if (_reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ChainController.state.activeCaipNetwork?.chainNamespace === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_7__.ConstantsUtil.CHAIN.SOLANA) {\n            const response = await provider.request({\n                method: 'solana_signMessage',\n                params: {\n                    message: bs58__WEBPACK_IMPORTED_MODULE_0__[\"default\"].encode(new TextEncoder().encode(message)),\n                    pubkey: address\n                }\n            }, _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ChainController.state.activeCaipNetwork?.caipNetworkId);\n            signature = response.signature;\n        }\n        else {\n            signature = await provider.request({\n                method: 'personal_sign',\n                params: [message, address]\n            }, _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_6__.ChainController.state.activeCaipNetwork?.caipNetworkId);\n        }\n        return { signature };\n    }\n    // -- Transaction methods ---------------------------------------------------\n    /**\n     *\n     * These methods are supported only on `wagmi` and `ethers` since the Solana SDK does not support them in the same way.\n     * These function definition is to have a type parity between the clients. Currently not in use.\n     */\n    async estimateGas() {\n        return Promise.resolve({\n            gas: BigInt(0)\n        });\n    }\n    async sendTransaction() {\n        return Promise.resolve({\n            hash: ''\n        });\n    }\n    walletGetAssets(_params) {\n        return Promise.resolve({});\n    }\n    async writeContract() {\n        return Promise.resolve({\n            hash: ''\n        });\n    }\n    emitFirstAvailableConnection() {\n        return undefined;\n    }\n    parseUnits() {\n        return 0n;\n    }\n    formatUnits() {\n        return '0';\n    }\n    async getCapabilities() {\n        return Promise.resolve({});\n    }\n    async grantPermissions() {\n        return Promise.resolve({});\n    }\n    async revokePermissions() {\n        return Promise.resolve('0x');\n    }\n    async syncConnection() {\n        return Promise.resolve({\n            id: 'WALLET_CONNECT',\n            type: 'WALLET_CONNECT',\n            chainId: 1,\n            provider: this.provider,\n            address: ''\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/require-await\n    async switchNetwork(params) {\n        const { caipNetwork } = params;\n        const connector = this.getWalletConnectConnector();\n        if (caipNetwork.chainNamespace === _reown_appkit_common__WEBPACK_IMPORTED_MODULE_7__.ConstantsUtil.CHAIN.EVM) {\n            try {\n                await connector.provider?.request({\n                    method: 'wallet_switchEthereumChain',\n                    params: [{ chainId: (0,viem__WEBPACK_IMPORTED_MODULE_8__.toHex)(caipNetwork.id) }]\n                });\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            catch (switchError) {\n                if (switchError.code === _utils_ConstantsUtil_js__WEBPACK_IMPORTED_MODULE_1__.WcConstantsUtil.ERROR_CODE_UNRECOGNIZED_CHAIN_ID ||\n                    switchError.code === _utils_ConstantsUtil_js__WEBPACK_IMPORTED_MODULE_1__.WcConstantsUtil.ERROR_INVALID_CHAIN_ID ||\n                    switchError.code === _utils_ConstantsUtil_js__WEBPACK_IMPORTED_MODULE_1__.WcConstantsUtil.ERROR_CODE_DEFAULT ||\n                    switchError?.data?.originalError?.code ===\n                        _utils_ConstantsUtil_js__WEBPACK_IMPORTED_MODULE_1__.WcConstantsUtil.ERROR_CODE_UNRECOGNIZED_CHAIN_ID) {\n                    try {\n                        await connector.provider?.request({\n                            method: 'wallet_addEthereumChain',\n                            params: [\n                                {\n                                    chainId: (0,viem__WEBPACK_IMPORTED_MODULE_8__.toHex)(caipNetwork.id),\n                                    rpcUrls: [caipNetwork?.rpcUrls['chainDefault']?.http],\n                                    chainName: caipNetwork.name,\n                                    nativeCurrency: caipNetwork.nativeCurrency,\n                                    blockExplorerUrls: [caipNetwork.blockExplorers?.default.url]\n                                }\n                            ]\n                        });\n                    }\n                    catch (error) {\n                        throw new Error('Chain is not supported');\n                    }\n                }\n            }\n        }\n        connector.provider.setDefaultChain(caipNetwork.caipNetworkId);\n    }\n    getWalletConnectProvider() {\n        const connector = this.connectors.find(c => c.type === 'WALLET_CONNECT');\n        const provider = connector?.provider;\n        return provider;\n    }\n}\n//# sourceMappingURL=client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL3NyYy91bml2ZXJzYWwtYWRhcHRlci9jbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNLO0FBQ3dCO0FBQzJEO0FBQzNCO0FBQ3pCO0FBQ3JELCtCQUErQix1RUFBZ0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNkVBQXNCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx3QkFBd0IsV0FBVztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwrQ0FBK0MscUVBQWM7QUFDN0QsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0VBQWlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzRUFBZTtBQUMzQztBQUNBLCtCQUErQixzRUFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHNFQUFlO0FBQzlDLDREQUE0RCxtQ0FBbUMsR0FBRyxlQUFlO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDZCQUE2QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0VBQWUsNkNBQTZDLCtEQUFhO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0Q0FBSTtBQUNqQztBQUNBO0FBQ0EsYUFBYSxFQUFFLHNFQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsRUFBRSxzRUFBZTtBQUM5QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0EsMkNBQTJDLCtEQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixTQUFTLDJDQUFLLGtCQUFrQjtBQUMvRCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLG9FQUFlO0FBQ3hELHlDQUF5QyxvRUFBZTtBQUN4RCx5Q0FBeUMsb0VBQWU7QUFDeEQ7QUFDQSx3QkFBd0Isb0VBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QywyQ0FBSztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9ob21lL2Jlcmd0YXR0L3Byb2plY3RzL2VtdHB5bGFiL2xpa2VsaS9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL3NyYy91bml2ZXJzYWwtYWRhcHRlci9jbGllbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJzNTggZnJvbSAnYnM1OCc7XG5pbXBvcnQgeyB0b0hleCB9IGZyb20gJ3ZpZW0nO1xuaW1wb3J0IHsgQ29uc3RhbnRzVXRpbCB9IGZyb20gJ0ByZW93bi9hcHBraXQtY29tbW9uJztcbmltcG9ydCB7IENoYWluQ29udHJvbGxlciwgQ29uc3RhbnRzVXRpbCBhcyBDb3JlQ29uc3RhbnRzVXRpbCwgQ29yZUhlbHBlclV0aWwgfSBmcm9tICdAcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzJztcbmltcG9ydCB7IEFkYXB0ZXJCbHVlcHJpbnQsIFdhbGxldENvbm5lY3RDb25uZWN0b3IgfSBmcm9tICdAcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzJztcbmltcG9ydCB7IFdjQ29uc3RhbnRzVXRpbCB9IGZyb20gJy4uL3V0aWxzL0NvbnN0YW50c1V0aWwuanMnO1xuZXhwb3J0IGNsYXNzIFVuaXZlcnNhbEFkYXB0ZXIgZXh0ZW5kcyBBZGFwdGVyQmx1ZXByaW50IHtcbiAgICBhc3luYyBzZXRVbml2ZXJzYWxQcm92aWRlcih1bml2ZXJzYWxQcm92aWRlcikge1xuICAgICAgICBpZiAoIXRoaXMubmFtZXNwYWNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuaXZlcnNhbEFkYXB0ZXI6c2V0VW5pdmVyc2FsUHJvdmlkZXIgLSBuYW1lc3BhY2UgaXMgcmVxdWlyZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZENvbm5lY3RvcihuZXcgV2FsbGV0Q29ubmVjdENvbm5lY3Rvcih7XG4gICAgICAgICAgICBwcm92aWRlcjogdW5pdmVyc2FsUHJvdmlkZXIsXG4gICAgICAgICAgICBjYWlwTmV0d29ya3M6IHRoaXMuZ2V0Q2FpcE5ldHdvcmtzKCksXG4gICAgICAgICAgICBuYW1lc3BhY2U6IHRoaXMubmFtZXNwYWNlXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KHBhcmFtcykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIGlkOiAnV0FMTEVUX0NPTk5FQ1QnLFxuICAgICAgICAgICAgdHlwZTogJ1dBTExFVF9DT05ORUNUJyxcbiAgICAgICAgICAgIGNoYWluSWQ6IE51bWJlcihwYXJhbXMuY2hhaW5JZCksXG4gICAgICAgICAgICBwcm92aWRlcjogdGhpcy5wcm92aWRlcixcbiAgICAgICAgICAgIGFkZHJlc3M6ICcnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdG9yID0gdGhpcy5nZXRXYWxsZXRDb25uZWN0Q29ubmVjdG9yKCk7XG4gICAgICAgICAgICBhd2FpdCBjb25uZWN0b3IuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdkaXNjb25uZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VuaXZlcnNhbEFkYXB0ZXI6ZGlzY29ubmVjdCAtIGVycm9yJywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGNvbm5lY3Rpb25zOiBbXSB9O1xuICAgIH1cbiAgICBzeW5jQ29ubmVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgYXN5bmMgd3JpdGVTb2xhbmFUcmFuc2FjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBoYXNoOiAnJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0QWNjb3VudHMoeyBuYW1lc3BhY2UgfSkge1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMucHJvdmlkZXI7XG4gICAgICAgIGNvbnN0IGFkZHJlc3NlcyA9IChwcm92aWRlcj8uc2Vzc2lvbj8ubmFtZXNwYWNlcz8uW25hbWVzcGFjZV0/LmFjY291bnRzXG4gICAgICAgICAgICA/Lm1hcChhY2NvdW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFssICwgYWRkcmVzc10gPSBhY2NvdW50LnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICByZXR1cm4gYWRkcmVzcztcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoKGFkZHJlc3MsIGluZGV4LCBzZWxmKSA9PiBzZWxmLmluZGV4T2YoYWRkcmVzcykgPT09IGluZGV4KSB8fCBbXSk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgYWNjb3VudHM6IGFkZHJlc3Nlcy5tYXAoYWRkcmVzcyA9PiBDb3JlSGVscGVyVXRpbC5jcmVhdGVBY2NvdW50KG5hbWVzcGFjZSwgYWRkcmVzcywgbmFtZXNwYWNlID09PSAnYmlwMTIyJyA/ICdwYXltZW50JyA6ICdlb2EnKSlcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHN5bmNDb25uZWN0b3JzKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldEJhbGFuY2UocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IGlzQmFsYW5jZVN1cHBvcnRlZCA9IHBhcmFtcy5jYWlwTmV0d29yayAmJlxuICAgICAgICAgICAgQ29yZUNvbnN0YW50c1V0aWwuQkFMQU5DRV9TVVBQT1JURURfQ0hBSU5TLmluY2x1ZGVzKHBhcmFtcy5jYWlwTmV0d29yaz8uY2hhaW5OYW1lc3BhY2UpO1xuICAgICAgICBpZiAoIWlzQmFsYW5jZVN1cHBvcnRlZCB8fCBwYXJhbXMuY2FpcE5ldHdvcms/LnRlc3RuZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYmFsYW5jZTogJzAuMDAnLFxuICAgICAgICAgICAgICAgIHN5bWJvbDogcGFyYW1zLmNhaXBOZXR3b3JrPy5uYXRpdmVDdXJyZW5jeS5zeW1ib2wgfHwgJydcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWNjb3VudERhdGEgPSBDaGFpbkNvbnRyb2xsZXIuZ2V0QWNjb3VudERhdGEoKTtcbiAgICAgICAgaWYgKGFjY291bnREYXRhPy5iYWxhbmNlTG9hZGluZyAmJlxuICAgICAgICAgICAgcGFyYW1zLmNoYWluSWQgPT09IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDYWlwTmV0d29yaz8uaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYmFsYW5jZTogYWNjb3VudERhdGE/LmJhbGFuY2UgfHwgJzAuMDAnLFxuICAgICAgICAgICAgICAgIHN5bWJvbDogYWNjb3VudERhdGE/LmJhbGFuY2VTeW1ib2wgfHwgJydcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmFsYW5jZXMgPSBhd2FpdCBDaGFpbkNvbnRyb2xsZXIuZmV0Y2hUb2tlbkJhbGFuY2UoKTtcbiAgICAgICAgY29uc3QgYmFsYW5jZSA9IGJhbGFuY2VzLmZpbmQoYiA9PiBiLmNoYWluSWQgPT09IGAke3BhcmFtcy5jYWlwTmV0d29yaz8uY2hhaW5OYW1lc3BhY2V9OiR7cGFyYW1zLmNoYWluSWR9YCAmJlxuICAgICAgICAgICAgYi5zeW1ib2wgPT09IHBhcmFtcy5jYWlwTmV0d29yaz8ubmF0aXZlQ3VycmVuY3kuc3ltYm9sKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJhbGFuY2U6IGJhbGFuY2U/LnF1YW50aXR5Lm51bWVyaWMgfHwgJzAuMDAnLFxuICAgICAgICAgICAgc3ltYm9sOiBiYWxhbmNlPy5zeW1ib2wgfHwgcGFyYW1zLmNhaXBOZXR3b3JrPy5uYXRpdmVDdXJyZW5jeS5zeW1ib2wgfHwgJydcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgc2lnbk1lc3NhZ2UocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvdmlkZXIsIG1lc3NhZ2UsIGFkZHJlc3MgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKCFwcm92aWRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbml2ZXJzYWxBZGFwdGVyOnNpZ25NZXNzYWdlIC0gcHJvdmlkZXIgaXMgdW5kZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNpZ25hdHVyZSA9ICcnO1xuICAgICAgICBpZiAoQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNhaXBOZXR3b3JrPy5jaGFpbk5hbWVzcGFjZSA9PT0gQ29uc3RhbnRzVXRpbC5DSEFJTi5TT0xBTkEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcHJvdmlkZXIucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnc29sYW5hX3NpZ25NZXNzYWdlJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYnM1OC5lbmNvZGUobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKG1lc3NhZ2UpKSxcbiAgICAgICAgICAgICAgICAgICAgcHVia2V5OiBhZGRyZXNzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNhaXBOZXR3b3JrPy5jYWlwTmV0d29ya0lkKTtcbiAgICAgICAgICAgIHNpZ25hdHVyZSA9IHJlc3BvbnNlLnNpZ25hdHVyZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNpZ25hdHVyZSA9IGF3YWl0IHByb3ZpZGVyLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ3BlcnNvbmFsX3NpZ24nLFxuICAgICAgICAgICAgICAgIHBhcmFtczogW21lc3NhZ2UsIGFkZHJlc3NdXG4gICAgICAgICAgICB9LCBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2FpcE5ldHdvcms/LmNhaXBOZXR3b3JrSWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHNpZ25hdHVyZSB9O1xuICAgIH1cbiAgICAvLyAtLSBUcmFuc2FjdGlvbiBtZXRob2RzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8qKlxuICAgICAqXG4gICAgICogVGhlc2UgbWV0aG9kcyBhcmUgc3VwcG9ydGVkIG9ubHkgb24gYHdhZ21pYCBhbmQgYGV0aGVyc2Agc2luY2UgdGhlIFNvbGFuYSBTREsgZG9lcyBub3Qgc3VwcG9ydCB0aGVtIGluIHRoZSBzYW1lIHdheS5cbiAgICAgKiBUaGVzZSBmdW5jdGlvbiBkZWZpbml0aW9uIGlzIHRvIGhhdmUgYSB0eXBlIHBhcml0eSBiZXR3ZWVuIHRoZSBjbGllbnRzLiBDdXJyZW50bHkgbm90IGluIHVzZS5cbiAgICAgKi9cbiAgICBhc3luYyBlc3RpbWF0ZUdhcygpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBnYXM6IEJpZ0ludCgwKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZFRyYW5zYWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIGhhc2g6ICcnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3YWxsZXRHZXRBc3NldHMoX3BhcmFtcykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTtcbiAgICB9XG4gICAgYXN5bmMgd3JpdGVDb250cmFjdCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBoYXNoOiAnJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1pdEZpcnN0QXZhaWxhYmxlQ29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcGFyc2VVbml0cygpIHtcbiAgICAgICAgcmV0dXJuIDBuO1xuICAgIH1cbiAgICBmb3JtYXRVbml0cygpIHtcbiAgICAgICAgcmV0dXJuICcwJztcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q2FwYWJpbGl0aWVzKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTtcbiAgICB9XG4gICAgYXN5bmMgZ3JhbnRQZXJtaXNzaW9ucygpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7fSk7XG4gICAgfVxuICAgIGFzeW5jIHJldm9rZVBlcm1pc3Npb25zKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCcweCcpO1xuICAgIH1cbiAgICBhc3luYyBzeW5jQ29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBpZDogJ1dBTExFVF9DT05ORUNUJyxcbiAgICAgICAgICAgIHR5cGU6ICdXQUxMRVRfQ09OTkVDVCcsXG4gICAgICAgICAgICBjaGFpbklkOiAxLFxuICAgICAgICAgICAgcHJvdmlkZXI6IHRoaXMucHJvdmlkZXIsXG4gICAgICAgICAgICBhZGRyZXNzOiAnJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9yZXF1aXJlLWF3YWl0XG4gICAgYXN5bmMgc3dpdGNoTmV0d29yayhwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyBjYWlwTmV0d29yayB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCBjb25uZWN0b3IgPSB0aGlzLmdldFdhbGxldENvbm5lY3RDb25uZWN0b3IoKTtcbiAgICAgICAgaWYgKGNhaXBOZXR3b3JrLmNoYWluTmFtZXNwYWNlID09PSBDb25zdGFudHNVdGlsLkNIQUlOLkVWTSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjb25uZWN0b3IucHJvdmlkZXI/LnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpbicsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogW3sgY2hhaW5JZDogdG9IZXgoY2FpcE5ldHdvcmsuaWQpIH1dXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChzd2l0Y2hFcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChzd2l0Y2hFcnJvci5jb2RlID09PSBXY0NvbnN0YW50c1V0aWwuRVJST1JfQ09ERV9VTlJFQ09HTklaRURfQ0hBSU5fSUQgfHxcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoRXJyb3IuY29kZSA9PT0gV2NDb25zdGFudHNVdGlsLkVSUk9SX0lOVkFMSURfQ0hBSU5fSUQgfHxcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoRXJyb3IuY29kZSA9PT0gV2NDb25zdGFudHNVdGlsLkVSUk9SX0NPREVfREVGQVVMVCB8fFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hFcnJvcj8uZGF0YT8ub3JpZ2luYWxFcnJvcj8uY29kZSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFdjQ29uc3RhbnRzVXRpbC5FUlJPUl9DT0RFX1VOUkVDT0dOSVpFRF9DSEFJTl9JRCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29ubmVjdG9yLnByb3ZpZGVyPy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfYWRkRXRoZXJldW1DaGFpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IHRvSGV4KGNhaXBOZXR3b3JrLmlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJwY1VybHM6IFtjYWlwTmV0d29yaz8ucnBjVXJsc1snY2hhaW5EZWZhdWx0J10/Lmh0dHBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5OYW1lOiBjYWlwTmV0d29yay5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlQ3VycmVuY3k6IGNhaXBOZXR3b3JrLm5hdGl2ZUN1cnJlbmN5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tFeHBsb3JlclVybHM6IFtjYWlwTmV0d29yay5ibG9ja0V4cGxvcmVycz8uZGVmYXVsdC51cmxdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2hhaW4gaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3Rvci5wcm92aWRlci5zZXREZWZhdWx0Q2hhaW4oY2FpcE5ldHdvcmsuY2FpcE5ldHdvcmtJZCk7XG4gICAgfVxuICAgIGdldFdhbGxldENvbm5lY3RQcm92aWRlcigpIHtcbiAgICAgICAgY29uc3QgY29ubmVjdG9yID0gdGhpcy5jb25uZWN0b3JzLmZpbmQoYyA9PiBjLnR5cGUgPT09ICdXQUxMRVRfQ09OTkVDVCcpO1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IGNvbm5lY3Rvcj8ucHJvdmlkZXI7XG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/universal-adapter/client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/utils/ConfigUtil.js":
/*!*****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/utils/ConfigUtil.js ***!
  \*****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigUtil: () => (/* binding */ ConfigUtil)\n/* harmony export */ });\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/utils/ConstantsUtil.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ApiController.js\");\n/* harmony import */ var _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @reown/appkit-controllers */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-controllers@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_buf_1196da0b51d638590a039389848dc12f/node_modules/@reown/appkit-controllers/dist/esm/src/controllers/AlertController.js\");\n/* harmony import */ var _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @reown/appkit-utils */ \"(ssr)/./node_modules/.pnpm/@reown+appkit-utils@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferuti_27588a39054def81394fb486614d2b2b/node_modules/@reown/appkit-utils/dist/esm/src/ErrorUtil.js\");\n\n\nconst FEATURE_KEYS = [\n    'email',\n    'socials',\n    'swaps',\n    'onramp',\n    'activity',\n    'reownBranding',\n    'multiWallet',\n    'emailCapture',\n    'payWithExchange',\n    'payments',\n    'reownAuthentication',\n    'headless'\n];\nconst featureConfig = {\n    email: {\n        apiFeatureName: 'social_login',\n        localFeatureName: 'email',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => {\n            if (!apiConfig?.config) {\n                return false;\n            }\n            const config = apiConfig.config;\n            return Boolean(apiConfig.isEnabled) && config.includes('email');\n        },\n        processFallback: (localValue) => {\n            if (localValue === undefined) {\n                return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.email;\n            }\n            return Boolean(localValue);\n        }\n    },\n    socials: {\n        apiFeatureName: 'social_login',\n        localFeatureName: 'socials',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => {\n            if (!apiConfig?.config) {\n                return false;\n            }\n            const config = apiConfig.config;\n            return Boolean(apiConfig.isEnabled) && config.length > 0\n                ? config.filter((s) => s !== 'email')\n                : false;\n        },\n        processFallback: (localValue) => {\n            if (localValue === undefined) {\n                return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.socials;\n            }\n            if (typeof localValue === 'boolean') {\n                return localValue ? _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.socials : false;\n            }\n            return localValue;\n        }\n    },\n    swaps: {\n        apiFeatureName: 'swap',\n        localFeatureName: 'swaps',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => {\n            if (!apiConfig?.config) {\n                return false;\n            }\n            const config = apiConfig.config;\n            return Boolean(apiConfig.isEnabled) && config.length > 0 ? config : false;\n        },\n        processFallback: (localValue) => {\n            if (localValue === undefined) {\n                return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.swaps;\n            }\n            if (typeof localValue === 'boolean') {\n                return localValue ? _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.swaps : false;\n            }\n            return localValue;\n        }\n    },\n    onramp: {\n        apiFeatureName: 'onramp',\n        localFeatureName: 'onramp',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => {\n            if (!apiConfig?.config) {\n                return false;\n            }\n            const config = apiConfig.config;\n            return Boolean(apiConfig.isEnabled) && config.length > 0 ? config : false;\n        },\n        processFallback: (localValue) => {\n            if (localValue === undefined) {\n                return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.onramp;\n            }\n            if (typeof localValue === 'boolean') {\n                return localValue ? _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.onramp : false;\n            }\n            return localValue;\n        }\n    },\n    activity: {\n        apiFeatureName: 'activity',\n        localFeatureName: 'history',\n        returnType: false,\n        isLegacy: true,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => Boolean(apiConfig.isEnabled),\n        processFallback: (localValue) => {\n            if (localValue === undefined) {\n                return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.activity;\n            }\n            return Boolean(localValue);\n        }\n    },\n    reownBranding: {\n        apiFeatureName: 'reown_branding',\n        localFeatureName: 'reownBranding',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => Boolean(apiConfig.isEnabled),\n        processFallback: (localValue) => {\n            if (localValue === undefined) {\n                return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.reownBranding;\n            }\n            return Boolean(localValue);\n        }\n    },\n    emailCapture: {\n        apiFeatureName: 'email_capture',\n        localFeatureName: 'emailCapture',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => apiConfig.isEnabled && (apiConfig.config ?? []),\n        processFallback: (_localValue) => false\n    },\n    multiWallet: {\n        apiFeatureName: 'multi_wallet',\n        localFeatureName: 'multiWallet',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => Boolean(apiConfig.isEnabled),\n        processFallback: () => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.multiWallet\n    },\n    payWithExchange: {\n        apiFeatureName: 'fund_from_exchange',\n        localFeatureName: 'payWithExchange',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => Boolean(apiConfig.isEnabled),\n        processFallback: () => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.payWithExchange\n    },\n    payments: {\n        apiFeatureName: 'payments',\n        localFeatureName: 'payments',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => Boolean(apiConfig.isEnabled),\n        processFallback: () => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.payments\n    },\n    reownAuthentication: {\n        apiFeatureName: 'reown_authentication',\n        localFeatureName: 'reownAuthentication',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => Boolean(apiConfig.isEnabled),\n        processFallback: (localValue) => {\n            if (typeof localValue === 'undefined') {\n                return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.reownAuthentication;\n            }\n            return Boolean(localValue);\n        }\n    },\n    headless: {\n        apiFeatureName: 'headless',\n        localFeatureName: 'headless',\n        returnType: false,\n        isLegacy: false,\n        isAvailableOnBasic: false,\n        processApi: (apiConfig) => Boolean(apiConfig.isEnabled),\n        processFallback: () => _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES.headless\n    }\n};\nconst ConfigUtil = {\n    localSettingsOverridden: new Set(),\n    getApiConfig(id, apiProjectConfig) {\n        return apiProjectConfig?.find((f) => f.id === id);\n    },\n    addWarning(localFeatureValue, featureKey) {\n        if (localFeatureValue !== undefined) {\n            const config = featureConfig[featureKey];\n            const warningName = config.isLegacy\n                ? `\"features.${config.localFeatureName}\" (now \"${featureKey}\")`\n                : `\"features.${featureKey}\"`;\n            this.localSettingsOverridden.add(warningName);\n        }\n    },\n    processFeature(featureKey, localFeatures, apiProjectConfig, useApi, isBasic) {\n        const config = featureConfig[featureKey];\n        const localValue = localFeatures[config.localFeatureName];\n        if (isBasic && !config.isAvailableOnBasic) {\n            return false;\n        }\n        if (useApi) {\n            const apiConfig = this.getApiConfig(config.apiFeatureName, apiProjectConfig);\n            if (apiConfig?.config === null) {\n                return this.processFallbackFeature(featureKey, localValue);\n            }\n            if (!apiConfig?.config) {\n                return false;\n            }\n            if (localValue !== undefined) {\n                this.addWarning(localValue, featureKey);\n            }\n            return this.processApiFeature(featureKey, apiConfig);\n        }\n        return this.processFallbackFeature(featureKey, localValue);\n    },\n    processApiFeature(featureKey, apiConfig) {\n        return featureConfig[featureKey].processApi(apiConfig);\n    },\n    processFallbackFeature(featureKey, localValue) {\n        return featureConfig[featureKey].processFallback(localValue);\n    },\n    async fetchRemoteFeatures(config) {\n        const isBasic = config.basic ?? false;\n        const localFeatures = config.features || {};\n        this.localSettingsOverridden.clear();\n        let apiProjectConfig = null;\n        let shouldUseApiConfig = false;\n        try {\n            apiProjectConfig = await _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_1__.ApiController.fetchProjectConfig();\n            shouldUseApiConfig = apiProjectConfig !== null && apiProjectConfig !== undefined;\n        }\n        catch (e) {\n            console.warn('[Reown Config] Failed to fetch remote project configuration. Using local/default values.', e);\n        }\n        const remoteFeaturesConfig = shouldUseApiConfig && !isBasic\n            ? _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES\n            : _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES_DISABLED;\n        try {\n            for (const featureKey of FEATURE_KEYS) {\n                const result = this.processFeature(featureKey, localFeatures, apiProjectConfig, shouldUseApiConfig, isBasic);\n                Object.assign(remoteFeaturesConfig, { [featureKey]: result });\n            }\n        }\n        catch (e) {\n            console.warn('[Reown Config] Failed to process the configuration from Cloud. Using default values.', e);\n            return _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_0__.ConstantsUtil.DEFAULT_REMOTE_FEATURES;\n        }\n        if (shouldUseApiConfig && this.localSettingsOverridden.size > 0) {\n            const warningMessage = `Your local configuration for ${Array.from(this.localSettingsOverridden).join(', ')} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;\n            _reown_appkit_controllers__WEBPACK_IMPORTED_MODULE_2__.AlertController.open({\n                debugMessage: _reown_appkit_utils__WEBPACK_IMPORTED_MODULE_3__.ErrorUtil.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(warningMessage)\n            }, 'warning');\n        }\n        return remoteFeaturesConfig;\n    }\n};\n//# sourceMappingURL=ConfigUtil.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL3NyYy91dGlscy9Db25maWdVdGlsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTBGO0FBQzFDO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsdUJBQXVCLG9FQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx1QkFBdUIsb0VBQWE7QUFDcEM7QUFDQTtBQUNBLG9DQUFvQyxvRUFBYTtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx1QkFBdUIsb0VBQWE7QUFDcEM7QUFDQTtBQUNBLG9DQUFvQyxvRUFBYTtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx1QkFBdUIsb0VBQWE7QUFDcEM7QUFDQTtBQUNBLG9DQUFvQyxvRUFBYTtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9FQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0VBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isb0VBQWE7QUFDNUMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9FQUFhO0FBQzVDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixvRUFBYTtBQUM1QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9FQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixvRUFBYTtBQUM1QztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isd0JBQXdCLFVBQVUsV0FBVztBQUM1RSwrQkFBK0IsV0FBVztBQUMxQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLG9FQUFhO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0VBQWE7QUFDM0IsY0FBYyxvRUFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsc0JBQXNCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9FQUFhO0FBQ2hDO0FBQ0E7QUFDQSxtRUFBbUUscURBQXFEO0FBQ3hILFlBQVksc0VBQWU7QUFDM0IsOEJBQThCLDBEQUFTO0FBQ3ZDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvaG9tZS9iZXJndGF0dC9wcm9qZWN0cy9lbXRweWxhYi9saWtlbGkvbm9kZV9tb2R1bGVzLy5wbnBtL0ByZW93bithcHBraXRAMS44LjE3LXdjLWNpcmN1bGFyLWRlcGVuZGVuY2llcy1maXguMF9AdHlwZXMrcmVhY3RAMTkuMi45X2J1ZmZlcnV0aWxANC4xLl8xOGRhMDI4NzJiNTRmMjcxYzkwOWE1MzlmOTQ1ZTE1Yi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC9kaXN0L2VzbS9zcmMvdXRpbHMvQ29uZmlnVXRpbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBbGVydENvbnRyb2xsZXIsIEFwaUNvbnRyb2xsZXIsIENvbnN0YW50c1V0aWwgfSBmcm9tICdAcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzJztcbmltcG9ydCB7IEVycm9yVXRpbCB9IGZyb20gJ0ByZW93bi9hcHBraXQtdXRpbHMnO1xuY29uc3QgRkVBVFVSRV9LRVlTID0gW1xuICAgICdlbWFpbCcsXG4gICAgJ3NvY2lhbHMnLFxuICAgICdzd2FwcycsXG4gICAgJ29ucmFtcCcsXG4gICAgJ2FjdGl2aXR5JyxcbiAgICAncmVvd25CcmFuZGluZycsXG4gICAgJ211bHRpV2FsbGV0JyxcbiAgICAnZW1haWxDYXB0dXJlJyxcbiAgICAncGF5V2l0aEV4Y2hhbmdlJyxcbiAgICAncGF5bWVudHMnLFxuICAgICdyZW93bkF1dGhlbnRpY2F0aW9uJyxcbiAgICAnaGVhZGxlc3MnXG5dO1xuY29uc3QgZmVhdHVyZUNvbmZpZyA9IHtcbiAgICBlbWFpbDoge1xuICAgICAgICBhcGlGZWF0dXJlTmFtZTogJ3NvY2lhbF9sb2dpbicsXG4gICAgICAgIGxvY2FsRmVhdHVyZU5hbWU6ICdlbWFpbCcsXG4gICAgICAgIHJldHVyblR5cGU6IGZhbHNlLFxuICAgICAgICBpc0xlZ2FjeTogZmFsc2UsXG4gICAgICAgIGlzQXZhaWxhYmxlT25CYXNpYzogZmFsc2UsXG4gICAgICAgIHByb2Nlc3NBcGk6IChhcGlDb25maWcpID0+IHtcbiAgICAgICAgICAgIGlmICghYXBpQ29uZmlnPy5jb25maWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSBhcGlDb25maWcuY29uZmlnO1xuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oYXBpQ29uZmlnLmlzRW5hYmxlZCkgJiYgY29uZmlnLmluY2x1ZGVzKCdlbWFpbCcpO1xuICAgICAgICB9LFxuICAgICAgICBwcm9jZXNzRmFsbGJhY2s6IChsb2NhbFZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnN0YW50c1V0aWwuREVGQVVMVF9SRU1PVEVfRkVBVFVSRVMuZW1haWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihsb2NhbFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc29jaWFsczoge1xuICAgICAgICBhcGlGZWF0dXJlTmFtZTogJ3NvY2lhbF9sb2dpbicsXG4gICAgICAgIGxvY2FsRmVhdHVyZU5hbWU6ICdzb2NpYWxzJyxcbiAgICAgICAgcmV0dXJuVHlwZTogZmFsc2UsXG4gICAgICAgIGlzTGVnYWN5OiBmYWxzZSxcbiAgICAgICAgaXNBdmFpbGFibGVPbkJhc2ljOiBmYWxzZSxcbiAgICAgICAgcHJvY2Vzc0FwaTogKGFwaUNvbmZpZykgPT4ge1xuICAgICAgICAgICAgaWYgKCFhcGlDb25maWc/LmNvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IGFwaUNvbmZpZy5jb25maWc7XG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihhcGlDb25maWcuaXNFbmFibGVkKSAmJiBjb25maWcubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgID8gY29uZmlnLmZpbHRlcigocykgPT4gcyAhPT0gJ2VtYWlsJylcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBwcm9jZXNzRmFsbGJhY2s6IChsb2NhbFZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAobG9jYWxWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnN0YW50c1V0aWwuREVGQVVMVF9SRU1PVEVfRkVBVFVSRVMuc29jaWFscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbG9jYWxWYWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFsdWUgPyBDb25zdGFudHNVdGlsLkRFRkFVTFRfUkVNT1RFX0ZFQVRVUkVTLnNvY2lhbHMgOiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhbHVlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzd2Fwczoge1xuICAgICAgICBhcGlGZWF0dXJlTmFtZTogJ3N3YXAnLFxuICAgICAgICBsb2NhbEZlYXR1cmVOYW1lOiAnc3dhcHMnLFxuICAgICAgICByZXR1cm5UeXBlOiBmYWxzZSxcbiAgICAgICAgaXNMZWdhY3k6IGZhbHNlLFxuICAgICAgICBpc0F2YWlsYWJsZU9uQmFzaWM6IGZhbHNlLFxuICAgICAgICBwcm9jZXNzQXBpOiAoYXBpQ29uZmlnKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWFwaUNvbmZpZz8uY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gYXBpQ29uZmlnLmNvbmZpZztcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKGFwaUNvbmZpZy5pc0VuYWJsZWQpICYmIGNvbmZpZy5sZW5ndGggPiAwID8gY29uZmlnIDogZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIHByb2Nlc3NGYWxsYmFjazogKGxvY2FsVmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmIChsb2NhbFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29uc3RhbnRzVXRpbC5ERUZBVUxUX1JFTU9URV9GRUFUVVJFUy5zd2FwcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbG9jYWxWYWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFsdWUgPyBDb25zdGFudHNVdGlsLkRFRkFVTFRfUkVNT1RFX0ZFQVRVUkVTLnN3YXBzIDogZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25yYW1wOiB7XG4gICAgICAgIGFwaUZlYXR1cmVOYW1lOiAnb25yYW1wJyxcbiAgICAgICAgbG9jYWxGZWF0dXJlTmFtZTogJ29ucmFtcCcsXG4gICAgICAgIHJldHVyblR5cGU6IGZhbHNlLFxuICAgICAgICBpc0xlZ2FjeTogZmFsc2UsXG4gICAgICAgIGlzQXZhaWxhYmxlT25CYXNpYzogZmFsc2UsXG4gICAgICAgIHByb2Nlc3NBcGk6IChhcGlDb25maWcpID0+IHtcbiAgICAgICAgICAgIGlmICghYXBpQ29uZmlnPy5jb25maWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSBhcGlDb25maWcuY29uZmlnO1xuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oYXBpQ29uZmlnLmlzRW5hYmxlZCkgJiYgY29uZmlnLmxlbmd0aCA+IDAgPyBjb25maWcgOiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgcHJvY2Vzc0ZhbGxiYWNrOiAobG9jYWxWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBDb25zdGFudHNVdGlsLkRFRkFVTFRfUkVNT1RFX0ZFQVRVUkVTLm9ucmFtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbG9jYWxWYWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFsdWUgPyBDb25zdGFudHNVdGlsLkRFRkFVTFRfUkVNT1RFX0ZFQVRVUkVTLm9ucmFtcCA6IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFsdWU7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFjdGl2aXR5OiB7XG4gICAgICAgIGFwaUZlYXR1cmVOYW1lOiAnYWN0aXZpdHknLFxuICAgICAgICBsb2NhbEZlYXR1cmVOYW1lOiAnaGlzdG9yeScsXG4gICAgICAgIHJldHVyblR5cGU6IGZhbHNlLFxuICAgICAgICBpc0xlZ2FjeTogdHJ1ZSxcbiAgICAgICAgaXNBdmFpbGFibGVPbkJhc2ljOiBmYWxzZSxcbiAgICAgICAgcHJvY2Vzc0FwaTogKGFwaUNvbmZpZykgPT4gQm9vbGVhbihhcGlDb25maWcuaXNFbmFibGVkKSxcbiAgICAgICAgcHJvY2Vzc0ZhbGxiYWNrOiAobG9jYWxWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBDb25zdGFudHNVdGlsLkRFRkFVTFRfUkVNT1RFX0ZFQVRVUkVTLmFjdGl2aXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4obG9jYWxWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlb3duQnJhbmRpbmc6IHtcbiAgICAgICAgYXBpRmVhdHVyZU5hbWU6ICdyZW93bl9icmFuZGluZycsXG4gICAgICAgIGxvY2FsRmVhdHVyZU5hbWU6ICdyZW93bkJyYW5kaW5nJyxcbiAgICAgICAgcmV0dXJuVHlwZTogZmFsc2UsXG4gICAgICAgIGlzTGVnYWN5OiBmYWxzZSxcbiAgICAgICAgaXNBdmFpbGFibGVPbkJhc2ljOiBmYWxzZSxcbiAgICAgICAgcHJvY2Vzc0FwaTogKGFwaUNvbmZpZykgPT4gQm9vbGVhbihhcGlDb25maWcuaXNFbmFibGVkKSxcbiAgICAgICAgcHJvY2Vzc0ZhbGxiYWNrOiAobG9jYWxWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGxvY2FsVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBDb25zdGFudHNVdGlsLkRFRkFVTFRfUkVNT1RFX0ZFQVRVUkVTLnJlb3duQnJhbmRpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihsb2NhbFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZW1haWxDYXB0dXJlOiB7XG4gICAgICAgIGFwaUZlYXR1cmVOYW1lOiAnZW1haWxfY2FwdHVyZScsXG4gICAgICAgIGxvY2FsRmVhdHVyZU5hbWU6ICdlbWFpbENhcHR1cmUnLFxuICAgICAgICByZXR1cm5UeXBlOiBmYWxzZSxcbiAgICAgICAgaXNMZWdhY3k6IGZhbHNlLFxuICAgICAgICBpc0F2YWlsYWJsZU9uQmFzaWM6IGZhbHNlLFxuICAgICAgICBwcm9jZXNzQXBpOiAoYXBpQ29uZmlnKSA9PiBhcGlDb25maWcuaXNFbmFibGVkICYmIChhcGlDb25maWcuY29uZmlnID8/IFtdKSxcbiAgICAgICAgcHJvY2Vzc0ZhbGxiYWNrOiAoX2xvY2FsVmFsdWUpID0+IGZhbHNlXG4gICAgfSxcbiAgICBtdWx0aVdhbGxldDoge1xuICAgICAgICBhcGlGZWF0dXJlTmFtZTogJ211bHRpX3dhbGxldCcsXG4gICAgICAgIGxvY2FsRmVhdHVyZU5hbWU6ICdtdWx0aVdhbGxldCcsXG4gICAgICAgIHJldHVyblR5cGU6IGZhbHNlLFxuICAgICAgICBpc0xlZ2FjeTogZmFsc2UsXG4gICAgICAgIGlzQXZhaWxhYmxlT25CYXNpYzogZmFsc2UsXG4gICAgICAgIHByb2Nlc3NBcGk6IChhcGlDb25maWcpID0+IEJvb2xlYW4oYXBpQ29uZmlnLmlzRW5hYmxlZCksXG4gICAgICAgIHByb2Nlc3NGYWxsYmFjazogKCkgPT4gQ29uc3RhbnRzVXRpbC5ERUZBVUxUX1JFTU9URV9GRUFUVVJFUy5tdWx0aVdhbGxldFxuICAgIH0sXG4gICAgcGF5V2l0aEV4Y2hhbmdlOiB7XG4gICAgICAgIGFwaUZlYXR1cmVOYW1lOiAnZnVuZF9mcm9tX2V4Y2hhbmdlJyxcbiAgICAgICAgbG9jYWxGZWF0dXJlTmFtZTogJ3BheVdpdGhFeGNoYW5nZScsXG4gICAgICAgIHJldHVyblR5cGU6IGZhbHNlLFxuICAgICAgICBpc0xlZ2FjeTogZmFsc2UsXG4gICAgICAgIGlzQXZhaWxhYmxlT25CYXNpYzogZmFsc2UsXG4gICAgICAgIHByb2Nlc3NBcGk6IChhcGlDb25maWcpID0+IEJvb2xlYW4oYXBpQ29uZmlnLmlzRW5hYmxlZCksXG4gICAgICAgIHByb2Nlc3NGYWxsYmFjazogKCkgPT4gQ29uc3RhbnRzVXRpbC5ERUZBVUxUX1JFTU9URV9GRUFUVVJFUy5wYXlXaXRoRXhjaGFuZ2VcbiAgICB9LFxuICAgIHBheW1lbnRzOiB7XG4gICAgICAgIGFwaUZlYXR1cmVOYW1lOiAncGF5bWVudHMnLFxuICAgICAgICBsb2NhbEZlYXR1cmVOYW1lOiAncGF5bWVudHMnLFxuICAgICAgICByZXR1cm5UeXBlOiBmYWxzZSxcbiAgICAgICAgaXNMZWdhY3k6IGZhbHNlLFxuICAgICAgICBpc0F2YWlsYWJsZU9uQmFzaWM6IGZhbHNlLFxuICAgICAgICBwcm9jZXNzQXBpOiAoYXBpQ29uZmlnKSA9PiBCb29sZWFuKGFwaUNvbmZpZy5pc0VuYWJsZWQpLFxuICAgICAgICBwcm9jZXNzRmFsbGJhY2s6ICgpID0+IENvbnN0YW50c1V0aWwuREVGQVVMVF9SRU1PVEVfRkVBVFVSRVMucGF5bWVudHNcbiAgICB9LFxuICAgIHJlb3duQXV0aGVudGljYXRpb246IHtcbiAgICAgICAgYXBpRmVhdHVyZU5hbWU6ICdyZW93bl9hdXRoZW50aWNhdGlvbicsXG4gICAgICAgIGxvY2FsRmVhdHVyZU5hbWU6ICdyZW93bkF1dGhlbnRpY2F0aW9uJyxcbiAgICAgICAgcmV0dXJuVHlwZTogZmFsc2UsXG4gICAgICAgIGlzTGVnYWN5OiBmYWxzZSxcbiAgICAgICAgaXNBdmFpbGFibGVPbkJhc2ljOiBmYWxzZSxcbiAgICAgICAgcHJvY2Vzc0FwaTogKGFwaUNvbmZpZykgPT4gQm9vbGVhbihhcGlDb25maWcuaXNFbmFibGVkKSxcbiAgICAgICAgcHJvY2Vzc0ZhbGxiYWNrOiAobG9jYWxWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBsb2NhbFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBDb25zdGFudHNVdGlsLkRFRkFVTFRfUkVNT1RFX0ZFQVRVUkVTLnJlb3duQXV0aGVudGljYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihsb2NhbFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGVhZGxlc3M6IHtcbiAgICAgICAgYXBpRmVhdHVyZU5hbWU6ICdoZWFkbGVzcycsXG4gICAgICAgIGxvY2FsRmVhdHVyZU5hbWU6ICdoZWFkbGVzcycsXG4gICAgICAgIHJldHVyblR5cGU6IGZhbHNlLFxuICAgICAgICBpc0xlZ2FjeTogZmFsc2UsXG4gICAgICAgIGlzQXZhaWxhYmxlT25CYXNpYzogZmFsc2UsXG4gICAgICAgIHByb2Nlc3NBcGk6IChhcGlDb25maWcpID0+IEJvb2xlYW4oYXBpQ29uZmlnLmlzRW5hYmxlZCksXG4gICAgICAgIHByb2Nlc3NGYWxsYmFjazogKCkgPT4gQ29uc3RhbnRzVXRpbC5ERUZBVUxUX1JFTU9URV9GRUFUVVJFUy5oZWFkbGVzc1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgQ29uZmlnVXRpbCA9IHtcbiAgICBsb2NhbFNldHRpbmdzT3ZlcnJpZGRlbjogbmV3IFNldCgpLFxuICAgIGdldEFwaUNvbmZpZyhpZCwgYXBpUHJvamVjdENvbmZpZykge1xuICAgICAgICByZXR1cm4gYXBpUHJvamVjdENvbmZpZz8uZmluZCgoZikgPT4gZi5pZCA9PT0gaWQpO1xuICAgIH0sXG4gICAgYWRkV2FybmluZyhsb2NhbEZlYXR1cmVWYWx1ZSwgZmVhdHVyZUtleSkge1xuICAgICAgICBpZiAobG9jYWxGZWF0dXJlVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gZmVhdHVyZUNvbmZpZ1tmZWF0dXJlS2V5XTtcbiAgICAgICAgICAgIGNvbnN0IHdhcm5pbmdOYW1lID0gY29uZmlnLmlzTGVnYWN5XG4gICAgICAgICAgICAgICAgPyBgXCJmZWF0dXJlcy4ke2NvbmZpZy5sb2NhbEZlYXR1cmVOYW1lfVwiIChub3cgXCIke2ZlYXR1cmVLZXl9XCIpYFxuICAgICAgICAgICAgICAgIDogYFwiZmVhdHVyZXMuJHtmZWF0dXJlS2V5fVwiYDtcbiAgICAgICAgICAgIHRoaXMubG9jYWxTZXR0aW5nc092ZXJyaWRkZW4uYWRkKHdhcm5pbmdOYW1lKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcHJvY2Vzc0ZlYXR1cmUoZmVhdHVyZUtleSwgbG9jYWxGZWF0dXJlcywgYXBpUHJvamVjdENvbmZpZywgdXNlQXBpLCBpc0Jhc2ljKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGZlYXR1cmVDb25maWdbZmVhdHVyZUtleV07XG4gICAgICAgIGNvbnN0IGxvY2FsVmFsdWUgPSBsb2NhbEZlYXR1cmVzW2NvbmZpZy5sb2NhbEZlYXR1cmVOYW1lXTtcbiAgICAgICAgaWYgKGlzQmFzaWMgJiYgIWNvbmZpZy5pc0F2YWlsYWJsZU9uQmFzaWMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlQXBpKSB7XG4gICAgICAgICAgICBjb25zdCBhcGlDb25maWcgPSB0aGlzLmdldEFwaUNvbmZpZyhjb25maWcuYXBpRmVhdHVyZU5hbWUsIGFwaVByb2plY3RDb25maWcpO1xuICAgICAgICAgICAgaWYgKGFwaUNvbmZpZz8uY29uZmlnID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0ZhbGxiYWNrRmVhdHVyZShmZWF0dXJlS2V5LCBsb2NhbFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYXBpQ29uZmlnPy5jb25maWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobG9jYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRXYXJuaW5nKGxvY2FsVmFsdWUsIGZlYXR1cmVLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0FwaUZlYXR1cmUoZmVhdHVyZUtleSwgYXBpQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmFsbGJhY2tGZWF0dXJlKGZlYXR1cmVLZXksIGxvY2FsVmFsdWUpO1xuICAgIH0sXG4gICAgcHJvY2Vzc0FwaUZlYXR1cmUoZmVhdHVyZUtleSwgYXBpQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBmZWF0dXJlQ29uZmlnW2ZlYXR1cmVLZXldLnByb2Nlc3NBcGkoYXBpQ29uZmlnKTtcbiAgICB9LFxuICAgIHByb2Nlc3NGYWxsYmFja0ZlYXR1cmUoZmVhdHVyZUtleSwgbG9jYWxWYWx1ZSkge1xuICAgICAgICByZXR1cm4gZmVhdHVyZUNvbmZpZ1tmZWF0dXJlS2V5XS5wcm9jZXNzRmFsbGJhY2sobG9jYWxWYWx1ZSk7XG4gICAgfSxcbiAgICBhc3luYyBmZXRjaFJlbW90ZUZlYXR1cmVzKGNvbmZpZykge1xuICAgICAgICBjb25zdCBpc0Jhc2ljID0gY29uZmlnLmJhc2ljID8/IGZhbHNlO1xuICAgICAgICBjb25zdCBsb2NhbEZlYXR1cmVzID0gY29uZmlnLmZlYXR1cmVzIHx8IHt9O1xuICAgICAgICB0aGlzLmxvY2FsU2V0dGluZ3NPdmVycmlkZGVuLmNsZWFyKCk7XG4gICAgICAgIGxldCBhcGlQcm9qZWN0Q29uZmlnID0gbnVsbDtcbiAgICAgICAgbGV0IHNob3VsZFVzZUFwaUNvbmZpZyA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXBpUHJvamVjdENvbmZpZyA9IGF3YWl0IEFwaUNvbnRyb2xsZXIuZmV0Y2hQcm9qZWN0Q29uZmlnKCk7XG4gICAgICAgICAgICBzaG91bGRVc2VBcGlDb25maWcgPSBhcGlQcm9qZWN0Q29uZmlnICE9PSBudWxsICYmIGFwaVByb2plY3RDb25maWcgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbUmVvd24gQ29uZmlnXSBGYWlsZWQgdG8gZmV0Y2ggcmVtb3RlIHByb2plY3QgY29uZmlndXJhdGlvbi4gVXNpbmcgbG9jYWwvZGVmYXVsdCB2YWx1ZXMuJywgZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlRmVhdHVyZXNDb25maWcgPSBzaG91bGRVc2VBcGlDb25maWcgJiYgIWlzQmFzaWNcbiAgICAgICAgICAgID8gQ29uc3RhbnRzVXRpbC5ERUZBVUxUX1JFTU9URV9GRUFUVVJFU1xuICAgICAgICAgICAgOiBDb25zdGFudHNVdGlsLkRFRkFVTFRfUkVNT1RFX0ZFQVRVUkVTX0RJU0FCTEVEO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBmZWF0dXJlS2V5IG9mIEZFQVRVUkVfS0VZUykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucHJvY2Vzc0ZlYXR1cmUoZmVhdHVyZUtleSwgbG9jYWxGZWF0dXJlcywgYXBpUHJvamVjdENvbmZpZywgc2hvdWxkVXNlQXBpQ29uZmlnLCBpc0Jhc2ljKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHJlbW90ZUZlYXR1cmVzQ29uZmlnLCB7IFtmZWF0dXJlS2V5XTogcmVzdWx0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tSZW93biBDb25maWddIEZhaWxlZCB0byBwcm9jZXNzIHRoZSBjb25maWd1cmF0aW9uIGZyb20gQ2xvdWQuIFVzaW5nIGRlZmF1bHQgdmFsdWVzLicsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIENvbnN0YW50c1V0aWwuREVGQVVMVF9SRU1PVEVfRkVBVFVSRVM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZFVzZUFwaUNvbmZpZyAmJiB0aGlzLmxvY2FsU2V0dGluZ3NPdmVycmlkZGVuLnNpemUgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCB3YXJuaW5nTWVzc2FnZSA9IGBZb3VyIGxvY2FsIGNvbmZpZ3VyYXRpb24gZm9yICR7QXJyYXkuZnJvbSh0aGlzLmxvY2FsU2V0dGluZ3NPdmVycmlkZGVuKS5qb2luKCcsICcpfSB3YXMgaWdub3JlZCBiZWNhdXNlIGEgcmVtb3RlIGNvbmZpZ3VyYXRpb24gd2FzIHN1Y2Nlc3NmdWxseSBmZXRjaGVkLiBQbGVhc2UgbWFuYWdlIHRoZXNlIGZlYXR1cmVzIHZpYSB5b3VyIHByb2plY3QgZGFzaGJvYXJkIG9uIGRhc2hib2FyZC5yZW93bi5jb20uYDtcbiAgICAgICAgICAgIEFsZXJ0Q29udHJvbGxlci5vcGVuKHtcbiAgICAgICAgICAgICAgICBkZWJ1Z01lc3NhZ2U6IEVycm9yVXRpbC5BTEVSVF9XQVJOSU5HUy5MT0NBTF9DT05GSUdVUkFUSU9OX0lHTk9SRUQuZGVidWdNZXNzYWdlKHdhcm5pbmdNZXNzYWdlKVxuICAgICAgICAgICAgfSwgJ3dhcm5pbmcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVtb3RlRmVhdHVyZXNDb25maWc7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbmZpZ1V0aWwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/utils/ConfigUtil.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/utils/ConstantsUtil.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/utils/ConstantsUtil.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WcConstantsUtil: () => (/* binding */ WcConstantsUtil)\n/* harmony export */ });\nconst WcConstantsUtil = {\n    ERROR_CODE_UNRECOGNIZED_CHAIN_ID: 4902,\n    ERROR_CODE_DEFAULT: 5000,\n    ERROR_INVALID_CHAIN_ID: 32603\n};\n//# sourceMappingURL=ConstantsUtil.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL3NyYy91dGlscy9Db25zdGFudHNVdGlsLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9ob21lL2Jlcmd0YXR0L3Byb2plY3RzL2VtdHB5bGFiL2xpa2VsaS9ub2RlX21vZHVsZXMvLnBucG0vQHJlb3duK2FwcGtpdEAxLjguMTctd2MtY2lyY3VsYXItZGVwZW5kZW5jaWVzLWZpeC4wX0B0eXBlcytyZWFjdEAxOS4yLjlfYnVmZmVydXRpbEA0LjEuXzE4ZGEwMjg3MmI1NGYyNzFjOTA5YTUzOWY5NDVlMTViL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0L2Rpc3QvZXNtL3NyYy91dGlscy9Db25zdGFudHNVdGlsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBXY0NvbnN0YW50c1V0aWwgPSB7XG4gICAgRVJST1JfQ09ERV9VTlJFQ09HTklaRURfQ0hBSU5fSUQ6IDQ5MDIsXG4gICAgRVJST1JfQ09ERV9ERUZBVUxUOiA1MDAwLFxuICAgIEVSUk9SX0lOVkFMSURfQ0hBSU5fSUQ6IDMyNjAzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29uc3RhbnRzVXRpbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@reown+appkit@1.8.17-wc-circular-dependencies-fix.0_@types+react@19.2.9_bufferutil@4.1._18da02872b54f271c909a539f945e15b/node_modules/@reown/appkit/dist/esm/src/utils/ConstantsUtil.js\n");

/***/ })

};
;